webpackJsonp([0],{171:function(e,t,n){n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204)},176:function(e,t,n){(function(t){(function(){!function(){var n={},r=function(e){for(var t=a(e),n=e.split("."),r=Function("return this;")(),o=0;o<n.length-1;++o)void 0===r[n[o]]&&(r[n[o]]={}),r=r[n[o]];r[n[n.length-1]]=t},o=function(e){for(var t=n[e],r=t.deps,o=t.defn,i=r.length,c=Array(i),l=0;l<i;++l)c[l]=a(r[l]);var s=o.apply(null,c);if(void 0===s)throw"module ["+e+"] returned undefined";t.instance=s},i=function(e,t,r){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===r)throw"no definition function for "+e;n[e]={deps:t,defn:r,instance:void 0}},a=function(e){var t=n[e];if(void 0===t)throw"module ["+e+"] was undefined";return void 0===t.instance&&o(e),t.instance},c=function(e,t){for(var n=e.length,r=Array(n),o=0;o<n;++o)r.push(a(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:i,require:c,demand:a}}};var l=i,s=c,u=a,d=function(e,t){l(e,[],function(){return t})};l("tinymce.core.geom.Rect",[],function(){"use strict";function e(e,t,n){var r,o,a,c,l,u;return r=t.x,o=t.y,a=e.w,c=e.h,l=t.w,u=t.h,n=(n||"").split(""),"b"===n[0]&&(o+=u),"r"===n[1]&&(r+=l),"c"===n[0]&&(o+=s(u/2)),"c"===n[1]&&(r+=s(l/2)),"b"===n[3]&&(o-=c),"r"===n[4]&&(r-=a),"c"===n[3]&&(o-=s(c/2)),"c"===n[4]&&(r-=s(a/2)),i(r,o,a,c)}function t(t,n,r,o){var i,a;for(a=0;a<o.length;a++)if(i=e(t,n,o[a]),i.x>=r.x&&i.x+i.w<=r.w+r.x&&i.y>=r.y&&i.y+i.h<=r.h+r.y)return o[a];return null}function n(e,t,n){return i(e.x-t,e.y-n,e.w+2*t,e.h+2*n)}function r(e,t){var n,r,o,a;return n=l(e.x,t.x),r=l(e.y,t.y),o=c(e.x+e.w,t.x+t.w),a=c(e.y+e.h,t.y+t.h),o-n<0||a-r<0?null:i(n,r,o-n,a-r)}function o(e,t,n){var r,o,a,c,s,u,d,f,m,p;return s=e.x,u=e.y,d=e.x+e.w,f=e.y+e.h,m=t.x+t.w,p=t.y+t.h,r=l(0,t.x-s),o=l(0,t.y-u),a=l(0,d-m),c=l(0,f-p),s+=r,u+=o,n&&(d+=r,f+=o,s-=a,u-=c),d-=a,f-=c,i(s,u,d-s,f-u)}function i(e,t,n,r){return{x:e,y:t,w:n,h:r}}function a(e){return i(e.left,e.top,e.width,e.height)}var c=Math.min,l=Math.max,s=Math.round;return{inflate:n,relativePosition:e,findBestRelativePosition:t,intersect:r,clamp:o,create:i,fromClientRect:a}}),l("tinymce.core.util.Promise",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,e(o,this),e(i,this))}function r(e){var t=this;if(null===this._state)return void this._deferreds.push(e);s(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void l(e(n,t),e(o,this),e(i,this))}this._state=!0,this._value=t,a.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;e<t;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var s=n.immediateFn||"function"==typeof t&&t||function(e){setTimeout(e,1)},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var o=this;return new n(function(n,i){r.call(o,new c(e,t,n,i))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new n(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(e){r(i,e)},n)}e[i]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},n}),l("tinymce.core.util.Delay",["tinymce.core.util.Promise"],function(e){function t(e,t){function n(e){window.setTimeout(e,0)}var r,o=window.requestAnimationFrame,i=["ms","moz","webkit"];for(r=0;r<3&&!o;r++)o=window[i[r]+"RequestAnimationFrame"];o||(o=n),o(e,t)}function n(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)}function r(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)}function o(e){return clearTimeout(e)}function i(e){return clearInterval(e)}function a(e,t){var r,o;return o=function(){var o=arguments;clearTimeout(r),r=n(function(){e.apply(this,o)},t)},o.stop=function(){clearTimeout(r)},o}var c;return{requestAnimationFrame:function(n,r){if(c)return void c.then(n);c=new e(function(e){r||(r=document.body),t(e,r)}).then(n)},setTimeout:n,setInterval:r,setEditorTimeout:function(e,t,r){return n(function(){e.removed||t()},r)},setEditorInterval:function(e,t,n){var o;return o=r(function(){e.removed?clearInterval(o):t()},n)},debounce:a,throttle:a,clearInterval:i,clearTimeout:o}}),l("tinymce.core.Env",[],function(){function e(e){return"matchMedia"in window&&matchMedia(e).matches}var t=navigator,n=t.userAgent,r,o,i,a,c,l,s,u,d,f,m,p,g;return r=window.opera&&window.opera.buildNumber,d=/Android/.test(n),o=/WebKit/.test(n),i=!o&&!r&&/MSIE/gi.test(n)&&/Explorer/gi.test(t.appName),i=i&&/MSIE (\w+)\./.exec(n)[1],a=-1!=n.indexOf("Trident/")&&(-1!=n.indexOf("rv:")||-1!=t.appName.indexOf("Netscape"))&&11,c=-1!=n.indexOf("Edge/")&&!i&&!a&&12,i=i||a||c,l=!o&&!a&&/Gecko/.test(n),s=-1!=n.indexOf("Mac"),u=/(iPad|iPhone)/.test(n),f="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,m=e("only screen and (max-device-width: 480px)")&&(d||u),p=e("only screen and (min-width: 800px)")&&(d||u),g=-1!=n.indexOf("Windows Phone"),c&&(o=!1),{opera:r,webkit:o,ie:i,gecko:l,mac:s,iOS:u,android:d,contentEditable:!u||f||n.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i&&!c?document.documentMode||7:10,fileApi:f,ceFalse:!1===i||i>8,canHaveCSP:!1===i||i>11,desktop:!m&&!p,windowsPhone:g}}),l("tinymce.core.dom.EventUtils",["tinymce.core.util.Delay","tinymce.core.Env"],function(e,t){"use strict";function n(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function r(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function o(e,t){var n,r=t;return n=e.path,n&&n.length>0&&(r=n[0]),e.deepPath&&(n=e.deepPath())&&n.length>0&&(r=n[0]),r}function i(e,n){var r,i=n||{},a;for(r in e)u[r]||(i[r]=e[r]);if(i.target||(i.target=i.srcElement||document),t.experimentalShadowDom&&(i.target=o(e,i.target)),e&&s.test(e.type)&&e.pageX===a&&e.clientX!==a){var c=i.target.ownerDocument||document,l=c.documentElement,p=c.body;i.pageX=e.clientX+(l&&l.scrollLeft||p&&p.scrollLeft||0)-(l&&l.clientLeft||p&&p.clientLeft||0),i.pageY=e.clientY+(l&&l.scrollTop||p&&p.scrollTop||0)-(l&&l.clientTop||p&&p.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=m,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=m,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=m,i.stopPropagation()},!1===d(i)&&(i.isDefaultPrevented=f,i.isPropagationStopped=f,i.isImmediatePropagationStopped=f),void 0===i.metaKey&&(i.metaKey=!1),i}function a(o,i,a){function c(){return"complete"===d.readyState||"interactive"===d.readyState&&d.body}function l(){a.domLoaded||(a.domLoaded=!0,i(f))}function s(){c()&&(r(d,"readystatechange",s),l())}function u(){try{d.documentElement.doScroll("left")}catch(t){return void e.setTimeout(u)}l()}var d=o.document,f={type:"ready"};if(a.domLoaded)return void i(f);!d.addEventListener||t.ie&&t.ie<11?(n(d,"readystatechange",s),d.documentElement.doScroll&&o.self===o.top&&u()):c()?l():n(o,"DOMContentLoaded",l),n(o,"load",l)}function c(){function e(e,t){var n,r,i,a,c=o[t];if(n=c&&c[e.type])for(r=0,i=n.length;r<i;r++)if(a=n[r],a&&!1===a.func.call(a.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}var t=this,o={},c,s,u,d,f;s=l+(+new Date).toString(32),d="onmouseenter"in document.documentElement,u="onfocusin"in document.documentElement,f={mouseenter:"mouseover",mouseleave:"mouseout"},c=1,t.domLoaded=!1,t.events=o,t.bind=function(r,l,m,p){function g(t){e(i(t||T.event),h)}var h,v,y,b,x,C,w,T=window;if(r&&3!==r.nodeType&&8!==r.nodeType){for(r[s]?h=r[s]:(h=c++,r[s]=h,o[h]={}),p=p||r,l=l.split(" "),y=l.length;y--;)b=l[y],C=g,x=w=!1,"DOMContentLoaded"===b&&(b="ready"),t.domLoaded&&"ready"===b&&"complete"==r.readyState?m.call(p,i({type:b})):(d||(x=f[b])&&(C=function(t){var n,r;if(n=t.currentTarget,(r=t.relatedTarget)&&n.contains)r=n.contains(r);else for(;r&&r!==n;)r=r.parentNode;r||(t=i(t||T.event),t.type="mouseout"===t.type?"mouseleave":"mouseenter",t.target=n,e(t,h))}),u||"focusin"!==b&&"focusout"!==b||(w=!0,x="focusin"===b?"focus":"blur",C=function(t){t=i(t||T.event),t.type="focus"===t.type?"focusin":"focusout",e(t,h)}),v=o[h][b],v?"ready"===b&&t.domLoaded?m({type:b}):v.push({func:m,scope:p}):(o[h][b]=v=[{func:m,scope:p}],v.fakeName=x,v.capture=w,v.nativeHandler=C,"ready"===b?a(r,C,t):n(r,x||b,C,w)));return r=v=0,m}},t.unbind=function(e,n,i){var a,c,l,u,d,f;if(!e||3===e.nodeType||8===e.nodeType)return t;if(a=e[s]){if(f=o[a],n){for(n=n.split(" "),l=n.length;l--;)if(d=n[l],c=f[d]){if(i)for(u=c.length;u--;)if(c[u].func===i){var m=c.nativeHandler,p=c.fakeName,g=c.capture;c=c.slice(0,u).concat(c.slice(u+1)),c.nativeHandler=m,c.fakeName=p,c.capture=g,f[d]=c}i&&0!==c.length||(delete f[d],r(e,c.fakeName||d,c.nativeHandler,c.capture))}}else{for(d in f)c=f[d],r(e,c.fakeName||d,c.nativeHandler,c.capture);f={}}for(d in f)return t;delete o[a];try{delete e[s]}catch(t){e[s]=null}}return t},t.fire=function(n,r,o){var a;if(!n||3===n.nodeType||8===n.nodeType)return t;o=i(null,o),o.type=r,o.target=n;do{a=n[s],a&&e(o,a),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!o.isPropagationStopped());return t},t.clean=function(e){var n,r,o=t.unbind;if(!e||3===e.nodeType||8===e.nodeType)return t;if(e[s]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),r=e.getElementsByTagName("*"),n=r.length;n--;)e=r[n],e[s]&&o(e);return t},t.destroy=function(){o={}},t.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var l="mce-data-",s=/^(?:mouse|contextmenu)|click/,u={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},d=function(e){return e.isDefaultPrevented===m||e.isDefaultPrevented===f},f=function(){return!1},m=function(){return!0};return c.Event=new c,c.Event.bind(window,"ready",function(){}),c}),l("tinymce.core.dom.Sizzle",[],function(){function e(e,t,n,r){var o,i,a,c,l,u,f,m,p,g;if((t?t.ownerDocument||t:H)!==B&&_(t),t=t||B,n=n||[],!e||"string"!=typeof e)return n;if(1!==(c=t.nodeType)&&9!==c)return[];if(D&&!r){if(o=he.exec(e))if(a=o[1]){if(9===c){if(!(i=t.getElementById(a))||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(a))&&L(t,i)&&i.id===a)return n.push(i),n}else{if(o[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&x.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(a)),n}if(x.qsa&&(!M||!M.test(e))){if(m=f=F,p=t,g=9===c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(u=k(e),(f=t.getAttribute("id"))?m=f.replace(ye,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=u.length;l--;)u[l]=m+d(u[l]);p=ve.test(e)&&s(t.parentNode)||t,g=u.join(",")}if(g)try{return Q.apply(n,p.querySelectorAll(g)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return S(e.replace(ae,"$1"),t,n,r)}function t(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function n(e){return e[F]=!0,e}function r(e){var t=B.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)C.attrHandle[n[r]]=t}function i(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return n(function(t){return t=+t,n(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function s(e){return e&&typeof e.getElementsByTagName!==$&&e}function u(){}function d(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=z++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var c,l,s=[U,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(l=t[F]||(t[F]={}),(c=l[r])&&c[0]===U&&c[1]===i)return s[2]=c[2];if(l[r]=s,s[2]=e(t,n,a))return!0}}}function m(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function p(t,n,r){for(var o=0,i=n.length;o<i;o++)e(t,n[o],r);return r}function g(e,t,n,r,o){for(var i,a=[],c=0,l=e.length,s=null!=t;c<l;c++)(i=e[c])&&(n&&!n(i,r,o)||(a.push(i),s&&t.push(c)));return a}function h(e,t,r,o,i,a){return o&&!o[F]&&(o=h(o)),i&&!i[F]&&(i=h(i,a)),n(function(n,a,c,l){var s,u,d,f=[],m=[],h=a.length,v=n||p(t||"*",c.nodeType?[c]:c,[]),y=!e||!n&&t?v:g(v,f,e,c,l),b=r?i||(n?e:h||o)?[]:a:y;if(r&&r(y,b,c,l),o)for(s=g(b,m),o(s,[],c,l),u=s.length;u--;)(d=s[u])&&(b[m[u]]=!(y[m[u]]=d));if(n){if(i||e){if(i){for(s=[],u=b.length;u--;)(d=b[u])&&s.push(y[u]=d);i(null,b=[],s,l)}for(u=b.length;u--;)(d=b[u])&&(s=i?ee.call(n,d):f[u])>-1&&(n[s]=!(a[s]=d))}}else b=g(b===a?b.splice(h,b.length):b),i?i(null,a,b,l):Q.apply(a,b)})}function v(e){for(var t,n,r,o=e.length,i=C.relative[e[0].type],a=i||C.relative[" "],c=i?1:0,l=f(function(e){return e===t},a,!0),s=f(function(e){return ee.call(t,e)>-1},a,!0),u=[function(e,n,r){return!i&&(r||n!==N)||((t=n).nodeType?l(e,n,r):s(e,n,r))}];c<o;c++)if(n=C.relative[e[c].type])u=[f(m(u),n)];else{if(n=C.filter[e[c].type].apply(null,e[c].matches),n[F]){for(r=++c;r<o&&!C.relative[e[r].type];r++);return h(c>1&&m(u),c>1&&d(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(ae,"$1"),n,c<r&&v(e.slice(c,r)),r<o&&v(e=e.slice(r)),r<o&&d(e))}u.push(n)}return m(u)}function y(t,r){var o=r.length>0,i=t.length>0,a=function(n,a,c,l,s){var u,d,f,m=0,p="0",h=n&&[],v=[],y=N,b=n||i&&C.find.TAG("*",s),x=U+=null==y?1:Math.random()||.1,w=b.length;for(s&&(N=a!==B&&a);p!==w&&null!=(u=b[p]);p++){if(i&&u){for(d=0;f=t[d++];)if(f(u,a,c)){l.push(u);break}s&&(U=x)}o&&((u=!f&&u)&&m--,n&&h.push(u))}if(m+=p,o&&p!==m){for(d=0;f=r[d++];)f(h,v,a,c);if(n){if(m>0)for(;p--;)h[p]||v[p]||(v[p]=G.call(l));v=g(v)}Q.apply(l,v),s&&!n&&v.length>0&&m+r.length>1&&e.uniqueSort(l)}return s&&(U=x,N=y),h};return o?n(a):a}var b,x,C,w,T,k,E,S,N,R,A,_,B,P,D,M,I,O,L,F="sizzle"+-new Date,H=window.document,U=0,z=0,W=t(),V=t(),j=t(),q=function(e,t){return e===t&&(A=!0),0},$="undefined",K=1<<31,Y={}.hasOwnProperty,X=[],G=X.pop,J=X.push,Q=X.push,Z=X.slice,ee=X.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",ie=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=RegExp("^"+ne+"*,"+ne+"*"),le=RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),se=RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=RegExp(ie),de=RegExp("^"+re+"$"),fe={ID:RegExp("^#("+re+")"),CLASS:RegExp("^\\.("+re+")"),TAG:RegExp("^("+re+"|[*])"),ATTR:RegExp("^"+oe),PSEUDO:RegExp("^"+ie),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:RegExp("^(?:"+te+")$","i"),needsContext:RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,he=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,ye=/'|\\/g,be=RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),xe=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Q.apply(X=Z.call(H.childNodes),H.childNodes),X[H.childNodes.length].nodeType}catch(e){Q={apply:X.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=e.support={},T=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},_=e.setDocument=function(e){function t(e){try{return e.top}catch(e){}return null}var n,o=e?e.ownerDocument||e:H,a=o.defaultView;return o!==B&&9===o.nodeType&&o.documentElement?(B=o,P=o.documentElement,D=!T(o),a&&a!==t(a)&&(a.addEventListener?a.addEventListener("unload",function(){_()},!1):a.attachEvent&&a.attachEvent("onunload",function(){_()})),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(o.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=ge.test(o.getElementsByClassName),x.getById=r(function(e){return P.appendChild(e).id=F,!o.getElementsByName||!o.getElementsByName(F).length}),x.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==$&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(be,xe);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(be,xe);return function(e){var n=typeof e.getAttributeNode!==$&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=x.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==$)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},C.find.CLASS=x.getElementsByClassName&&function(e,t){if(D)return t.getElementsByClassName(e)},I=[],M=[],(x.qsa=ge.test(o.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll(":checked").length||M.push(":checked")}),r(function(e){var t=o.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(x.matchesSelector=ge.test(O=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&r(function(e){x.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),I.push("!=",ie)}),M=M.length&&RegExp(M.join("|")),I=I.length&&RegExp(I.join("|")),n=ge.test(P.compareDocumentPosition),L=n||ge.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=n?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===o||e.ownerDocument===H&&L(H,e)?-1:t===o||t.ownerDocument===H&&L(H,t)?1:R?ee.call(R,e)-ee.call(R,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,a=e.parentNode,c=t.parentNode,l=[e],s=[t];if(!a||!c)return e===o?-1:t===o?1:a?-1:c?1:R?ee.call(R,e)-ee.call(R,t):0;if(a===c)return i(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;l[r]===s[r];)r++;return r?i(l[r],s[r]):l[r]===H?-1:s[r]===H?1:0},o):B},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==B&&_(t),n=n.replace(se,"='$1']"),x.matchesSelector&&D&&(!I||!I.test(n))&&(!M||!M.test(n)))try{var r=O.call(t,n);if(r||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(e){}return e(n,B,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==B&&_(e),L(e,t)},e.attr=function(e,t){(e.ownerDocument||e)!==B&&_(e);var n=C.attrHandle[t.toLowerCase()],r=n&&Y.call(C.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==r?r:x.attributes||!D?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},e.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],r=0,o=0;if(A=!x.detectDuplicates,R=!x.sortStable&&e.slice(0),e.sort(q),A){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return R=null,e},w=e.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=w(t);return n},C=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(be,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==$&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(o){var i=e.attr(o,t);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),c="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var s,u,d,f,m,p,g=i!==a?"nextSibling":"previousSibling",h=t.parentNode,v=c&&t.nodeName.toLowerCase(),y=!l&&!c;if(h){if(i){for(;g;){for(d=t;d=d[g];)if(c?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?h.firstChild:h.lastChild],a&&y){for(u=h[F]||(h[F]={}),s=u[e]||[],m=s[0]===U&&s[1],f=s[0]===U&&s[2],d=m&&h.childNodes[m];d=++m&&d&&d[g]||(f=m=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[U,m,f];break}}else if(y&&(s=(t[F]||(t[F]={}))[e])&&s[0]===U)f=s[1];else for(;(d=++m&&d&&d[g]||(f=m=0)||p.pop())&&((c?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[F]||(d[F]={}))[e]=[U,f]),d!==t)););return(f-=o)===r||f%r==0&&f/r>=0}}},PSEUDO:function(t,r){var o,i=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[F]?i(r):i.length>1?(o=[t,t,"",r],C.setFilters.hasOwnProperty(t.toLowerCase())?n(function(e,t){for(var n,o=i(e,r),a=o.length;a--;)n=ee.call(e,o[a]),e[n]=!(t[n]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:n(function(e){var t=[],r=[],o=E(e.replace(ae,"$1"));return o[F]?n(function(e,t,n,r){for(var i,a=o(e,null,r,[]),c=e.length;c--;)(i=a[c])&&(e[c]=!(t[c]=i))}):function(e,n,i){return t[0]=e,o(t,null,i,r),!r.pop()}}),has:n(function(t){return function(n){return e(t,n).length>0}}),contains:n(function(e){return e=e.replace(be,xe),function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:n(function(t){return de.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(be,xe).toLowerCase(),function(e){var n;do{if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===P},focus:function(e){return e===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})C.pseudos[b]=c(b);return u.prototype=C.filters=C.pseudos,C.setFilters=new u,k=e.tokenize=function(t,n){var r,o,i,a,c,l,s,u=V[t+" "];if(u)return n?0:u.slice(0);for(c=t,l=[],s=C.preFilter;c;){r&&!(o=ce.exec(c))||(o&&(c=c.slice(o[0].length)||c),l.push(i=[])),r=!1,(o=le.exec(c))&&(r=o.shift(),i.push({value:r,type:o[0].replace(ae," ")}),c=c.slice(r.length));for(a in C.filter)!(o=fe[a].exec(c))||s[a]&&!(o=s[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),c=c.slice(r.length));if(!r)break}return n?c.length:c?e.error(t):V(t,l).slice(0)},E=e.compile=function(e,t){var n,r=[],o=[],i=j[e+" "];if(!i){for(t||(t=k(e)),n=t.length;n--;)i=v(t[n]),i[F]?r.push(i):o.push(i);i=j(e,y(o,r)),i.selector=e}return i},S=e.select=function(e,t,n,r){var o,i,a,c,l,u="function"==typeof e&&e,f=!r&&k(e=u.selector||e);if(n=n||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&x.getById&&9===t.nodeType&&D&&C.relative[i[1].type]){if(!(t=(C.find.ID(a.matches[0].replace(be,xe),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=fe.needsContext.test(e)?0:i.length;o--&&(a=i[o],!C.relative[c=a.type]);)if((l=C.find[c])&&(r=l(a.matches[0].replace(be,xe),ve.test(i[0].type)&&s(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&d(i)))return Q.apply(n,r),n;break}}return(u||E(e,f))(r,t,!D,n,ve.test(e)&&s(t.parentNode)||t),n},x.sortStable=F.split("").sort(q).join("")===F,x.detectDuplicates=!!A,_(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(B.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),e}),l("tinymce.core.util.Arr",[],function(){function e(e){var t=e,n,r;if(!s(e))for(t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t}function t(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1}function n(e,n){var r=[];return t(e,function(t,o){r.push(n(t,o,e))}),r}function r(e,n){var r=[];return t(e,function(t,o){n&&!n(t,o,e)||r.push(t)}),r}function o(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function i(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n}function a(e,t,n){var r,o;for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1}function c(e,t,n){var r=a(e,t,n);if(-1!==r)return e[r]}function l(e){return e[e.length-1]}var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{isArray:s,toArray:e,each:t,map:n,filter:r,indexOf:o,reduce:i,findIndex:a,find:c,last:l}}),l("tinymce.core.util.Tools",["tinymce.core.Env","tinymce.core.util.Arr"],function(e,t){function n(e){return null===e||void 0===e?"":(""+e).replace(m,"")}function r(e,n){return n?!("array"!=n||!t.isArray(e))||typeof e==n:void 0!==e}function o(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t,n){var r=this,o,i,a,c,l,s=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),a=e[3].match(/(^|\.)(\w+)$/i)[2],i=r.createNS(e[3].replace(/\.\w+$/,""),n),!i[a]){if("static"==e[2])return i[a]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[a]));t[a]||(t[a]=function(){},s=1),i[a]=t[a],r.extend(i[a].prototype,t),e[5]&&(o=r.resolve(e[5]).prototype,c=e[5].match(/\.(\w+)$/i)[1],l=i[a],i[a]=s?function(){return o[c].apply(this,arguments)}:function(){return this.parent=o[c],l.apply(this,arguments)},i[a].prototype[a]=i[a],r.each(o,function(e,t){i[a].prototype[t]=o[t]}),r.each(t,function(e,t){o[t]?i[a].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=a&&(i[a].prototype[t]=e)})),r.each(t.static,function(e,t){i[a][t]=e})}}function c(e,t){var n,r,o,i=arguments,a;for(n=1,r=i.length;n<r;n++){t=i[n];for(o in t)t.hasOwnProperty(o)&&void 0!==(a=t[o])&&(e[o]=a)}return e}function l(e,n,r,o){o=o||this,e&&(r&&(e=e[r]),t.each(e,function(e,t){if(!1===n.call(o,e,t,r))return!1;l(e,n,r,o)}))}function s(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function u(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;n<r&&(t=t[e[n]]);n++);return t}function d(e,o){return!e||r(e,"array")?e:t.map(e.split(o||","),n)}function f(t){var n=e.cacheSuffix;return n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),t}var m=/^\s*|\s*$/g;return{trim:n,isArray:t.isArray,is:r,toArray:t.toArray,makeMap:o,each:t.each,map:t.map,grep:t.filter,inArray:t.indexOf,hasOwn:i,extend:c,create:a,walk:l,createNS:s,resolve:u,explode:d,_addCacheSuffix:f}}),l("tinymce.core.dom.DomQuery",["tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.util.Tools","tinymce.core.Env"],function(e,t,n,r){function o(e){return void 0!==e}function i(e){return"string"==typeof e}function a(e){return e&&e==e.window}function c(e,t){var n,r,o;for(t=t||C,o=t.createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;r=o.firstChild;)n.appendChild(r);return n}function l(e,t,n,r){var o;if(i(t))t=c(t,h(e[0]));else if(t.length&&!t.nodeType){if(t=d.makeArray(t),r)for(o=t.length-1;o>=0;o--)l(e,t[o],n,r);else for(o=0;o<t.length;o++)l(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e}function s(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function u(e,t,n){var r,o;return t=d(t)[0],e.each(function(){var e=this;n&&r==e.parentNode?o.appendChild(e):(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e),o.appendChild(e))}),e}function d(e,t){return new d.fn.init(e,t)}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function m(e){return null===e||e===S?"":(""+e).replace(M,"")}function p(e,t){var n,r,o,i,a;if(e)if((n=e.length)===i){for(r in e)if(e.hasOwnProperty(r)&&(a=e[r],!1===t.call(a,r,a)))break}else for(o=0;o<n&&(a=e[o],!1!==t.call(a,o,a));o++);return e}function g(e,t){var n=[];return p(e,function(e,r){t(r,e)&&n.push(r)}),n}function h(e){return e?9==e.nodeType?e:e.ownerDocument:C}function v(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof d&&(n=n[0]);o&&9!==o.nodeType;){if(void 0!==n){if(o===n)break;if("string"==typeof n&&d(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r}function y(e,t,n,r){var o=[];for(r instanceof d&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&d(e).is(r))break}o.push(e)}return o}function b(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function x(e,t,n){p(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})}var C=document,w=Array.prototype.push,T=Array.prototype.slice,k=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=e.Event,S,N=n.makeMap("children,contents,next,prev"),R=n.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),A=n.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),_={for:"htmlFor",class:"className",readonly:"readOnly"},B={float:"cssFloat"},P={},D={},M=/^\s*|\s*$/g;return d.fn=d.prototype={constructor:d,selector:"",context:null,length:0,init:function(e,t){var n=this,r,o;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(t&&t.nodeType)n.context=t;else{if(t)return d(e).attr(t);n.context=t=document}if(i(e)){if(n.selector=e,!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:k.exec(e)))return d(t).find(e);if(r[1])for(o=c(e,h(t)).firstChild;o;)w.call(n,o),o=o.nextSibling;else{if(!(o=h(t).getElementById(r[2])))return n;if(o.id!==r[2])return n.find(e);n.length=1,n[0]=o}}else this.add(e,!1);return n},toArray:function(){return n.toArray(this)},add:function(e,t){var n=this,r,o;if(i(e))return n.add(d(e));if(!1!==t)for(r=d.unique(n.toArray().concat(d.makeArray(e))),n.length=r.length,o=0;o<r.length;o++)n[o]=r[o];else w.apply(n,d.makeArray(e));return n},attr:function(e,t){var n=this,r;if("object"==typeof e)p(e,function(e,t){n.attr(e,t)});else{if(!o(t)){if(n[0]&&1===n[0].nodeType){if((r=P[e])&&r.get)return r.get(n[0],e);if(A[e])return n.prop(e)?e:S;t=n[0].getAttribute(e,2),null===t&&(t=S)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=P[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=_[e]||e))p(e,function(e,t){n.prop(e,t)});else{if(!o(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function r(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var i=this,a,c;if("object"==typeof e)p(e,function(e,t){i.css(e,t)});else if(o(t))e=n(e),"number"!=typeof t||R[e]||(t+="px"),i.each(function(){var n=this.style;if((c=D[e])&&c.set)return void c.set(this,t);try{this.style[B[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(r(e)):n.removeAttribute(e))});else{if(a=i[0],(c=D[e])&&c.get)return c.get(a);if(a.ownerDocument.defaultView)try{return a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue(r(e))}catch(e){return S}else if(a.currentStyle)return a.currentStyle[n(e)]}return i},remove:function(){for(var e=this,t,n=this.length;n--;)t=e[n],E.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var e=this,t,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(e){var t=this,n;if(o(e)){n=t.length;try{for(;n--;)t[n].innerHTML=e}catch(r){d(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(o(e)){for(n=t.length;n--;)"innerText"in t[n]?t[n].innerText=e:t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return d(e).append(this),this},prependTo:function(e){return d(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return u(this,e)},wrapAll:function(e){return u(this,e,!0)},wrapInner:function(e){return this.each(function(){d(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),d(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var o,i;(i=s(r,e))!==t&&(o=r.className,i?r.className=m((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e)}),n)},hasClass:function(e){return s(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){E.bind(this,e,t)})},off:function(e,t){return this.each(function(){E.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?E.fire(this,e.type,e):E.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new d(T.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)d.find(e,this[t],r);return d(r)},filter:function(e){return d("function"==typeof e?g(this.toArray(),function(t,n){return e(n,t)}):d.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof d&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&d(r).is(e)){t.push(r);break}if(r==e){t.push(r);break}r=r.parentNode}}),d(t)},offset:function(e){var t,n,r,o=0,i=0,a;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,r=n.documentElement,t.getBoundingClientRect&&(a=t.getBoundingClientRect(),o=a.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,i=a.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:i})},push:w,sort:[].sort,splice:[].splice},n.extend(d,{extend:n.extend,makeArray:function(e){return a(e)||e.nodeType?[e]:n.toArray(e)},inArray:f,isArray:n.isArray,each:p,trim:m,grep:g,find:t,expr:t.selectors,unique:t.uniqueSort,text:t.getText,contains:t.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!=t[r].nodeType&&t.splice(r,1);return t=1===t.length?d.find.matchesSelector(t[0],e)?[t[0]]:[]:d.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v(e,"parentNode")},next:function(e){return b(e,"nextSibling",1)},prev:function(e){return b(e,"previousSibling",1)},children:function(e){return y(e.firstChild,"nextSibling",1)},contents:function(e){return n.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){d.fn[e]=function(n){var r=this,o=[];return r.each(function(){var e=t.call(o,this,n,o);e&&(d.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(N[e]||(o=d.unique(o)),0===e.indexOf("parents")&&(o=o.reverse())),o=d(o),n?o.filter(n):o}}),p({parentsUntil:function(e,t){return v(e,"parentNode",t)},nextUntil:function(e,t){return y(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return y(e,"previousSibling",1,t).slice(1)}},function(e,t){d.fn[e]=function(n,r){var o=this,i=[];return o.each(function(){var e=t.call(i,this,n,i);e&&(d.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=d.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=d(i),r?i.filter(r):i}}),d.fn.is=function(e){return!!e&&this.filter(e).length>0},d.fn.init.prototype=d.fn,d.overrideDefaults=function(e){function t(r,o){return n=n||e(),0===arguments.length&&(r=n.element),o||(o=n.context),new t.fn.init(r,o)}var n;return d.extend(t,this),t},r.ie&&r.ie<8&&(x(P,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?S:t},size:function(e){var t=e.size;return 20===t?S:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?S:t}}),x(P,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),r.ie&&r.ie<9&&(B.float="styleFloat",x(D,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),d.attrHooks=P,d.cssHooks=D,d}),l("tinymce.core.html.Styles",[],function(){return function(e,t){function n(e,t,n,r){function o(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+o(t)+o(n)+o(r)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,c,l={},s,u,d,f="\ufeff";for(e=e||{},t&&(u=t.getValidStyles(),d=t.getInvalidStyles()),s="\\\" \\' \\; \\: ; : \ufeff".split(" "),c=0;c<s.length;c++)l[s[c]]="\ufeff"+c,l["\ufeff"+c]=s[c];return{toHex:function(e){return e.replace(r,n)},parse:function(t){function s(e,t,n){var r,o,i,a;if((r=v[e+"-top"+t])&&(o=v[e+"-right"+t])&&(i=v[e+"-bottom"+t])&&(a=v[e+"-left"+t])){var l=[r,o,i,a];for(c=l.length-1;c--&&l[c]===l[c+1];);c>-1&&n||(v[e+t]=-1==c?l[0]:l.join(" "),delete v[e+"-top"+t],delete v[e+"-right"+t],delete v[e+"-bottom"+t],delete v[e+"-left"+t])}}function u(e){var t=v[e],n;if(t){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return v[e]=t[0],!0}}function d(e,t,n,r){u(t)&&u(n)&&u(r)&&(v[e]=v[t]+" "+v[n]+" "+v[r],delete v[t],delete v[n],delete v[r])}function f(e){return C=!0,l[e]}function m(e,t){return C&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e){return String.fromCharCode(parseInt(e.slice(1),16))}function g(e){return e.replace(/\\[0-9a-f]+/gi,p)}function h(t,n,r,o,i,a){if(i=i||a)return i=m(i),"'"+i.replace(/\'/g,"\\'")+"'";if(n=m(n||r||o),!e.allow_script_urls){var c=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(c))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(c))return""}return w&&(n=w.call(T,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var v={},y,b,x,C,w=e.url_converter,T=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,f)});y=i.exec(t);)if(i.lastIndex=y.index+y[0].length,b=y[1].replace(a,"").toLowerCase(),x=y[2].replace(a,""),b&&x){if(b=g(b),x=g(x),-1!==b.indexOf("\ufeff")||-1!==b.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"==b||/expression\s*\(|\/\*|\*\//.test(x)))continue;"font-weight"===b&&"700"===x?x="bold":"color"!==b&&"background-color"!==b||(x=x.toLowerCase()),x=x.replace(r,n),x=x.replace(o,h),v[b]=C?m(x,!0):x}s("border","",!0),s("border","-width"),s("border","-color"),s("border","-style"),s("padding",""),s("margin",""),d("border","border-width","border-style","border-color"),"medium none"===v.border&&delete v.border,"none"===v["border-image"]&&delete v["border-image"]}return v},serialize:function(e,t){function n(t){var n,r,i,a;if(n=u[t])for(r=0,i=n.length;r<i;r++)t=n[r],(a=e[t])&&(o+=(o.length>0?" ":"")+t+": "+a+";")}function r(e,t){var n;return(!(n=d["*"])||!n[e])&&(!(n=d[t])||!n[e])}var o="",i,a;if(t&&u)n("*"),n(t);else for(i in e)!(a=e[i])||d&&!r(i,t)||(o+=(o.length>0?" ":"")+i+": "+a+";");return o}}}}),l("tinymce.core.dom.TreeWalker",[],function(){return function(e,t){function n(e,n,r,o){var i,a;if(e){if(!o&&e[n])return e[n];if(e!=t){if(i=e[r])return i;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(i=a[r])return i}}}function r(e,n,r,o){var i,a,c;if(e){if(i=e[r],t&&i===t)return;if(i){if(!o)for(c=i[n];c;c=c[n])if(!c[n])return c;return i}if((a=e.parentNode)&&a!==t)return a}}var o=e;this.current=function(){return o},this.next=function(e){return o=n(o,"firstChild","nextSibling",e)},this.prev=function(e){return o=n(o,"lastChild","previousSibling",e)},this.prev2=function(e){return o=r(o,"lastChild","previousSibling",e)}}}),l("tinymce.core.html.Entities",["tinymce.core.util.Tools"],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,o,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),i[r]||(o="&"+e[n+1]+";",a[r]=o,a[o]=r);return a}}var r=e.makeMap,o,i,a,c=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\"\']/g,u=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,d={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},a={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},o=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?c:l,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(s,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?c:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||o,e.replace(t?c:l,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(e,t){function a(e,n){return e.replace(n?c:l,function(e){return void 0!==i[e]?i[e]:void 0!==t[e]?t[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}function s(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||o,e=r(e.replace(/\+/g,",")),e.named&&e.numeric?a:e.named?t?s:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(u,function(e,n){return n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):d[n]||String.fromCharCode(n)):a[e]||o[e]||t(e)})}};return f}),l("tinymce.core.dom.Range",["tinymce.core.util.Tools"],function(e){function t(n){function r(){return I.createDocumentFragment()}function o(e,t){T(H,e,t)}function i(e,t){T(U,e,t)}function a(e){o(e.parentNode,$(e))}function c(e){o(e.parentNode,$(e)+1)}function l(e){i(e.parentNode,$(e))}function s(e){i(e.parentNode,$(e)+1)}function u(e){e?(M[V]=M[W],M[j]=M[z]):(M[W]=M[V],M[z]=M[j]),M.collapsed=H}function d(e){a(e),s(e)}function f(e){o(e,0),i(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function m(e,t){var n=M[W],r=M[z],o=M[V],i=M[j],a=t.startContainer,c=t.startOffset,l=t.endContainer,s=t.endOffset;return 0===e?w(n,r,a,c):1===e?w(o,i,a,c):2===e?w(o,i,l,s):3===e?w(n,r,l,s):void 0}function p(){k(F)}function g(){return k(O)}function h(){return k(L)}function v(e){var t=this[W],r=this[z],o,i;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(i=t.childNodes[r]),i?t.insertBefore(e,i):3==t.nodeType?n.insertAfter(e,t):t.appendChild(e)):r?r>=t.nodeValue.length?n.insertAfter(e,t):(o=t.splitText(r),t.parentNode.insertBefore(e,o)):t.parentNode.insertBefore(e,t)}function y(e){var t=M.extractContents();M.insertNode(e),e.appendChild(t),M.selectNode(e)}function b(){return q(new t(n),{startContainer:M[W],startOffset:M[z],endContainer:M[V],endOffset:M[j],collapsed:M.collapsed,commonAncestorContainer:M.commonAncestorContainer})}function x(e,t){var n;if(3==e.nodeType)return e;if(t<0)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n||e}function C(){return M[W]==M[V]&&M[z]==M[j]}function w(e,t,r,o){var i,a,c,l,s,u;if(e==r)return t==o?0:t<o?-1:1;for(i=r;i&&i.parentNode!=e;)i=i.parentNode;if(i){for(a=0,c=e.firstChild;c!=i&&a<t;)a++,c=c.nextSibling;return t<=a?-1:1}for(i=e;i&&i.parentNode!=r;)i=i.parentNode;if(i){for(a=0,c=r.firstChild;c!=i&&a<o;)a++,c=c.nextSibling;return a<o?-1:1}for(l=n.findCommonAncestor(e,r),s=e;s&&s.parentNode!=l;)s=s.parentNode;for(s||(s=l),u=r;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),s==u)return 0;for(c=l.firstChild;c;){if(c==s)return-1;if(c==u)return 1;c=c.nextSibling}}function T(e,t,r){var o,i;for(e?(M[W]=t,M[z]=r):(M[V]=t,M[j]=r),o=M[V];o.parentNode;)o=o.parentNode;for(i=M[W];i.parentNode;)i=i.parentNode;i==o?w(M[W],M[z],M[V],M[j])>0&&M.collapse(e):M.collapse(e),M.collapsed=C(),M.commonAncestorContainer=n.findCommonAncestor(M[W],M[V])}function k(e){var t,n=0,r=0,o,i,a,c,l,s;if(M[W]==M[V])return E(e);for(t=M[V],o=t.parentNode;o;t=o,o=o.parentNode){if(o==M[W])return S(t,e);++n}for(t=M[W],o=t.parentNode;o;t=o,o=o.parentNode){if(o==M[V])return N(t,e);++r}for(i=r-n,a=M[W];i>0;)a=a.parentNode,i--;for(c=M[V];i<0;)c=c.parentNode,i++;for(l=a.parentNode,s=c.parentNode;l!=s;l=l.parentNode,s=s.parentNode)a=l,c=s;return R(a,c,e)}function E(e){var t,n,o,i,a,c,l,s,u;if(e!=F&&(t=r()),M[z]==M[j])return t;if(3==M[W].nodeType){if(n=M[W].nodeValue,o=n.substring(M[z],M[j]),e!=L&&(i=M[W],s=M[z],u=M[j]-M[z],0===s&&u>=i.nodeValue.length-1?i.parentNode.removeChild(i):i.deleteData(s,u),M.collapse(H)),e==F)return;return o.length>0&&t.appendChild(I.createTextNode(o)),t}for(i=x(M[W],M[z]),a=M[j]-M[z];i&&a>0;)c=i.nextSibling,l=P(i,e),t&&t.appendChild(l),--a,i=c;return e!=L&&M.collapse(H),t}function S(e,t){var n,o,i,a,c,l;if(t!=F&&(n=r()),o=A(e,t),n&&n.appendChild(o),i=$(e),(a=i-M[z])<=0)return t!=L&&(M.setEndBefore(e),M.collapse(U)),n;for(o=e.previousSibling;a>0;)c=o.previousSibling,l=P(o,t),n&&n.insertBefore(l,n.firstChild),--a,o=c;return t!=L&&(M.setEndBefore(e),M.collapse(U)),n}function N(e,t){var n,o,i,a,c,l;for(t!=F&&(n=r()),i=_(e,t),n&&n.appendChild(i),o=$(e),++o,a=M[j]-o,i=e.nextSibling;i&&a>0;)c=i.nextSibling,l=P(i,t),n&&n.appendChild(l),--a,i=c;return t!=L&&(M.setStartAfter(e),M.collapse(H)),n}function R(e,t,n){var o,i,a,c,l,s,u;for(n!=F&&(i=r()),o=_(e,n),i&&i.appendChild(o),a=$(e),c=$(t),++a,l=c-a,s=e.nextSibling;l>0;)u=s.nextSibling,o=P(s,n),i&&i.appendChild(o),s=u,--l;return o=A(t,n),i&&i.appendChild(o),n!=L&&(M.setStartAfter(e),M.collapse(H)),i}function A(e,t){var n=x(M[V],M[j]-1),r,o,i,a,c,l=n!=M[V];if(n==e)return B(n,l,U,t);for(r=n.parentNode,o=B(r,U,U,t);r;){for(;n;)i=n.previousSibling,a=B(n,l,U,t),t!=F&&o.insertBefore(a,o.firstChild),l=H,n=i;if(r==e)return o;n=r.previousSibling,r=r.parentNode,c=B(r,U,U,t),t!=F&&c.appendChild(o),o=c}}function _(e,t){var n=x(M[W],M[z]),r=n!=M[W],o,i,a,c,l;if(n==e)return B(n,r,H,t);for(o=n.parentNode,i=B(o,U,H,t);o;){for(;n;)a=n.nextSibling,c=B(n,r,H,t),t!=F&&i.appendChild(c),r=H,n=a;if(o==e)return i;n=o.nextSibling,o=o.parentNode,l=B(o,U,H,t),t!=F&&l.appendChild(i),i=l}}function B(e,t,r,o){var i,a,c,l,s;if(t)return P(e,o);if(3==e.nodeType){if(i=e.nodeValue,r?(l=M[z],a=i.substring(l),c=i.substring(0,l)):(l=M[j],a=i.substring(0,l),c=i.substring(l)),o!=L&&(e.nodeValue=c),o==F)return;return s=n.clone(e,U),s.nodeValue=a,s}if(o!=F)return n.clone(e,U)}function P(e,t){if(t!=F)return t==L?n.clone(e,H):e;e.parentNode.removeChild(e)}function D(){return n.create("body",null,h()).outerText}var M=this,I=n.doc,O=0,L=1,F=2,H=!0,U=!1,z="startOffset",W="startContainer",V="endContainer",j="endOffset",q=e.extend,$=n.nodeIndex;return q(M,{startContainer:I,startOffset:0,endContainer:I,endOffset:0,collapsed:H,commonAncestorContainer:I,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:i,setStartBefore:a,setStartAfter:c,setEndBefore:l,setEndAfter:s,collapse:u,selectNode:d,selectNodeContents:f,compareBoundaryPoints:m,deleteContents:p,extractContents:g,cloneContents:h,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:D}),M}return t.prototype.toString=function(){return this.toStringIE()},t}),d("global!Array",Array),d("global!Error",Error),l("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),d("global!Object",Object),l("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},c=function(e){return e},l=function(){},s={fold:function(e,t){return e()},is:n,isSome:n,isNone:r,getOr:c,getOrThunk:a,getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},or:c,orThunk:a,map:o,ap:o,each:l,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},c=function(){return u},l=function(t){return a(t(e))},s=function(t){return t(e)},u={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:c,orThunk:c,map:l,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?u:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),d("global!String",String),l("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},c=function(e,t){return b(e,t).isSome()},l=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},u=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},d=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},f=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},m=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},p=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var c=e[i],l=t(c);l!==n&&(r.push(o),o=[]),n=l,o.push(c)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},C=t.prototype.push,w=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);C.apply(r,e[o])}return r},T=function(e,t){var n=u(e,t);return w(n)},k=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},E=function(e,t){return e.length===t.length&&k(e,function(e,n){return e===t[n]})},S=t.prototype.slice;return{map:u,each:d,eachr:f,partition:m,filter:p,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:w,bind:T,forall:k,exists:c,contains:a,equal:E,reverse:function(e){var t=S.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return p(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=S.call(e,0);return n.sort(t),n},range:l}}),d("global!setTimeout",setTimeout),l("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option","global!setTimeout"],function(e,t,n){var r=function(o){var i=t.none(),a=[],c=function(e){return r(function(t){l(function(n){t(e(n))})})},l=function(e){u()?f(e):a.push(e)},s=function(e){i=t.some(e),d(a),a=[]},u=function(){return i.isSome()},d=function(t){e.each(t,f)},f=function(e){i.each(function(t){n(function(){e(t)},0)})};return o(s),{get:l,map:c,isReady:u}};return{nu:r,pure:function(e){return r(function(t){t(e)})}}}),l("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(e,t){return{bounce:function(n){return function(){var r=e.prototype.slice.call(arguments),o=this;t(function(){n.apply(o,r)},0)}}}}),l("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(e,t){var n=function(r){var o=function(e){r(t.bounce(e))};return{map:function(e){return n(function(t){o(function(n){var r=e(n);t(r)})})},bind:function(e){return n(function(t){o(function(n){e(n).get(t)})})},anonBind:function(e){return n(function(t){o(function(n){e.get(t)})})},toLazy:function(){return e.nu(o)},get:o}};return{nu:n,pure:function(e){return n(function(t){t(e)})}}}),l("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(e){return{par:function(t,n){return n(function(n){var r=[],o=0,i=function(e){return function(i){r[e]=i,++o>=t.length&&n(r)}};0===t.length?n([]):e.each(t,function(e,t){e.get(i(t))})})}}}),l("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(e,t,n){var r=function(e){return n.par(e,t.nu)};return{par:r,mapM:function(t,n){var o=e.map(t,n);return r(o)},compose:function(e,t){return function(n){return t(n).bind(e)}}}}),l("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){var o=function(e){return r===e},i=function(e){return n(r)},a=function(e){return n(r)},c=function(e){return n(e(r))},l=function(e){e(r)},s=function(e){return e(r)},u=function(e,t){return t(r)},d=function(e){return e(r)},f=function(e){return e(r)},m=function(){return t.some(r)};return{is:o,isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:i,orThunk:a,fold:u,map:c,each:l,bind:s,exists:d,forall:f,toOption:m}},r=function(n){var o=function(e){return e()},i=function(){return e.die(n)()},a=function(e){return e},c=function(e){return e()},l=function(e){return r(n)},s=function(e){return r(n)},u=function(e,t){return e(n)};return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:o,getOrDie:i,or:a,orThunk:c,fold:u,map:l,each:e.noop,bind:s,exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:r}}),l("tinymce.core.dom.StyleSheetLoader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Future","ephox.katamari.api.Futures","ephox.katamari.api.Result","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){"use strict";return function(c,l){function s(e){c.getElementsByTagName("head")[0].appendChild(e)}function u(e,t,n){function r(){for(var e=b.passed,t=e.length;t--;)e[t]();b.status=2,b.passed=[],b.failed=[]}function o(){for(var e=b.failed,t=e.length;t--;)e[t]();b.status=3,b.passed=[],b.failed=[]}function l(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function u(e,t){e()||((new Date).getTime()-y<m?i.setTimeout(t):o())}function p(){u(function(){for(var e=c.styleSheets,t,n=e.length,o;n--;)if(t=e[n],(o=t.ownerNode?t.ownerNode:t.owningElement)&&o.id===h.id)return r(),!0},p)}function g(){u(function(){try{var e=v.sheet.cssRules;return r(),!!e}catch(e){}},g)}var h,v,y,b;if(e=a._addCacheSuffix(e),f[e]?b=f[e]:(b={passed:[],failed:[]},f[e]=b),t&&b.passed.push(t),n&&b.failed.push(n),1!=b.status){if(2==b.status)return void r();if(3==b.status)return void o();if(b.status=1,h=c.createElement("link"),h.rel="stylesheet",h.type="text/css",h.id="u"+d++,h.async=!1,h.defer=!1,y=(new Date).getTime(),"onload"in h&&!l())h.onload=p,h.onerror=o;else{if(navigator.userAgent.indexOf("Firefox")>0)return v=c.createElement("style"),v.textContent='@import "'+e+'"',g(),void s(v);p()}s(h),h.href=e}}var d=0,f={},m;l=l||{},m=l.maxLoadTime||5e3;var p=function(e){return n.nu(function(n){u(e,t.compose(n,t.constant(o.value(e))),t.compose(n,t.constant(o.error(e))))})},g=function(e){return e.fold(t.identity,t.identity)};return{load:u,loadAll:function(t,n,o){r.par(e.map(t,p)).get(function(t){var r=e.partition(t,function(e){return e.isValue()});r.fail.length>0?o(r.fail.map(g)):n(r.pass.map(g))})}}}}),l("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(e){function t(t,n){return t=e.trim(t),t?t.split(n||" "):[]}function n(e){function n(e,n,r){function o(e,t){var n={},r,o;for(r=0,o=e.length;r<o;r++)n[e[r]]=t||{};return n}var c,s,u;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),e=t(e),c=e.length;c--;)s=t([l,n].join(" ")),u={attributes:o(s),attributesOrder:s,children:o(r,i)},a[e[c]]=u}function r(e,n){var r,o,i,c;for(e=t(e),r=e.length,n=t(n);r--;)for(o=a[e[r]],i=0,c=n.length;i<c;i++)o.attributes[n[i]]={},o.attributesOrder.push(n[i])}var a={},l,s,u,d,f,m;return o[e]?o[e]:(l="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",u="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=e&&(l+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure header footer hgroup section nav",u+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=e&&(l+=" xml:lang",m="acronym applet basefont big font strike tt",u=[u,m].join(" "),c(t(m),function(e){n(e,"",u)}),f="center dir isindex noframes",s=[s,f].join(" "),d=[s,u].join(" "),c(t(f),function(e){n(e,"",d)})),d=d||[s,u].join(" "),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",d),n("address dt dd div caption","",d),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",u),n("blockquote","cite",d),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",d),n("dl","","dt dd"),n("a","href target rel media hreflang type",u),n("q","cite",u),n("ins del","cite datetime",d),n("img","src sizes srcset alt usemap ismap width height"),n("iframe","src name width height",d),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",[d,"param"].join(" ")),n("param","name value"),n("map","name",[d,"area"].join(" ")),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",d),n("th","colspan rowspan headers scope abbr",d),n("form","accept-charset action autocomplete enctype method name novalidate target",d),n("fieldset","disabled form name",[d,"legend"].join(" ")),n("label","form for",u),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?d:u),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",[d,"li"].join(" ")),n("noscript","",d),"html4"!=e&&(n("wbr"),n("ruby","",[u,"rt rp"].join(" ")),n("figcaption","",d),n("mark rt rp summary bdi","",u),n("canvas","width height",d),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[d,"track source"].join(" ")),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[d,"track source"].join(" ")),n("picture","","img source"),n("source","src srcset type media sizes"),n("track","kind src srclang label default"),n("datalist","",[u,"option"].join(" ")),n("article section nav aside header footer","",d),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",[d,"figcaption"].join(" ")),n("time","datetime",u),n("dialog","open",d),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",u),n("progress","value max",u),n("meter","value min max low high optimum",u),n("details","open",[d,"summary"].join(" ")),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(r("script","language xml:space"),r("style","xml:space"),r("object","declare classid code codebase codetype archive standby align border hspace vspace"),r("embed","align name hspace vspace"),r("param","valuetype type"),r("a","charset name rev shape coords"),r("br","clear"),r("applet","codebase archive code object alt name width height align hspace vspace"),r("img","name longdesc align border hspace vspace"),r("iframe","longdesc frameborder marginwidth marginheight scrolling align"),r("font basefont","size color face"),r("input","usemap align"),r("select","onchange"),r("textarea"),r("h1 h2 h3 h4 h5 h6 div p legend caption","align"),r("ul","type compact"),r("li","type"),r("ol dl menu dir","compact"),r("pre","width xml:space"),r("hr","align noshade size width"),r("isindex","prompt"),r("table","summary width frame rules cellspacing cellpadding align bgcolor"),r("col","width align char charoff valign"),r("colgroup","width align char charoff valign"),r("thead","align char charoff valign"),r("tr","align char charoff valign bgcolor"),r("th","axis align char charoff valign nowrap bgcolor width height"),r("form","accept"),r("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),r("tfoot","align char charoff valign"),r("tbody","align char charoff valign"),r("area","nohref"),r("body","background bgcolor text link vlink alink")),"html4"!=e&&(r("input button select textarea","autofocus"),r("input textarea","placeholder"),r("a","download"),r("link script img","crossorigin"),r("iframe","sandbox seamless allowfullscreen")),c(t("a form meter progress dfn"),function(e){a[e]&&delete a[e].children[e]}),delete a.caption.children.table,delete a.script,o[e]=a,a)}function r(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),c(e,function(e,r){n[r]=n[r.toUpperCase()]="map"==t?a(e,/[, ]/):s(e,/[, ]/)})),n}var o={},i={},a=e.makeMap,c=e.each,l=e.extend,s=e.explode,u=e.inArray;return function(e){function i(t,n,r){var i=e[t];return i?i=a(i,/[, ]/,a(i.toUpperCase(),/[, ]/)):(i=o[t])||(i=a(n," ",a(n.toUpperCase()," ")),i=l(i,r),o[t]=i),i}function d(e){return RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function f(e){var n,r,o,i,c,l,s,f,m,p,g,h,v,b,C,w,T,k,E,S=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,N=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,R=/[*?+]/;if(e)for(e=t(e,","),y["@"]&&(w=y["@"].attributes,T=y["@"].attributesOrder),n=0,r=e.length;n<r;n++)if(c=S.exec(e[n])){if(b=c[1],m=c[2],C=c[3],f=c[5],h={},v=[],l={attributes:h,attributesOrder:v},"#"===b&&(l.paddEmpty=!0),"-"===b&&(l.removeEmpty=!0),"!"===c[4]&&(l.removeEmptyAttrs=!0),w){for(k in w)h[k]=w[k];v.push.apply(v,T)}if(f)for(f=t(f,"|"),o=0,i=f.length;o<i;o++)if(c=N.exec(f[o])){if(s={},g=c[1],p=c[2].replace(/::/g,":"),b=c[3],E=c[4],"!"===g&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),s.required=!0),"-"===g){delete h[p],v.splice(u(v,p),1);continue}b&&("="===b&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:E}),s.defaultValue=E),":"===b&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:E}),s.forcedValue=E),"<"===b&&(s.validValues=a(E,"?"))),R.test(p)?(l.attributePatterns=l.attributePatterns||[],s.pattern=d(p),l.attributePatterns.push(s)):(h[p]||v.push(p),h[p]=s)}w||"@"!=m||(w=h,T=v),C&&(l.outputName=m,y[C]=l),R.test(m)?(l.pattern=d(m),x.push(l)):y[m]=l}}function m(e){y={},x=[],f(e),c(T,function(e,t){b[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&(o.text_block_elements=o.block_elements=null,c(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],o=r?"span":"div",i=t[2];if(b[i]=b[o],M[i]=o,r||(A[i.toUpperCase()]={},A[i]={}),!y[i]){var a=y[o];a=l({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,y[i]=a}c(b,function(e,t){e[o]&&(b[t]=e=l({},b[t]),e[i]=e[o])})}))}function g(n){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;o[e.schema]=null,n&&c(t(n,","),function(e){var n=r.exec(e),o,i;n&&(i=n[1],o=i?b[n[2]]:b[n[2]]={"#comment":{}},o=b[n[2]],c(t(n[3],"|"),function(e){"-"===i?delete o[e]:o[e]={}}))})}function h(e){var t=y[e],n;if(t)return t;for(n=x.length;n--;)if(t=x[n],t.pattern.test(e))return t}var v=this,y={},b={},x=[],C,w,T,k,E,S,N,R,A,_,B,P,D,M={},I={};e=e||{},T=n(e.schema),!1===e.verify_html&&(e.valid_elements="*[*]"),C=r(e.valid_styles),w=r(e.invalid_styles,"map"),R=r(e.valid_classes,"map"),k=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),E=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),S=i("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),N=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),_=i("non_empty_elements","td th iframe video audio object script pre code",S),B=i("move_caret_before_on_enter_elements","table",_),P=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),A=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",P),D=i("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),c((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){I[e]=RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?m(e.valid_elements):(c(T,function(e,t){y[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},b[t]=e.children}),"html5"!=e.schema&&c(t("strong/b em/i"),function(e){e=t(e,"/"),y[e[1]].outputName=e[0]}),c(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){y[e]&&(y[e].removeEmpty=!0)}),c(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){y[e].paddEmpty=!0}),c(t("span"),function(e){y[e].removeEmptyAttrs=!0})),p(e.custom_elements),g(e.valid_children),f(e.extended_valid_elements),g("+ol[ul|ol],+ul[ul|ol]"),c({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,n){y[n]&&(y[n].parentsRequired=t(e))}),e.invalid_elements&&c(s(e.invalid_elements),function(e){y[e]&&delete y[e]}),h("span")||f("span[!data-mce-type|*]"),v.children=b,v.getValidStyles=function(){return C},v.getInvalidStyles=function(){return w},v.getValidClasses=function(){return R},v.getBoolAttrs=function(){return N},v.getBlockElements=function(){return A},v.getTextBlockElements=function(){return P},v.getTextInlineElements=function(){return D},v.getShortEndedElements=function(){return S},v.getSelfClosingElements=function(){return E},v.getNonEmptyElements=function(){return _},v.getMoveCaretBeforeOnEnterElements=function(){return B},v.getWhiteSpaceElements=function(){return k},v.getSpecialElements=function(){return I},v.isValidChild=function(e,t){var n=b[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},v.isValid=function(e,t){var n,r,o=h(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},v.getElementRule=h,v.getCustomElements=function(){return M},v.addValidElements=f,v.setValidElements=m,v.addCustomElements=p,v.addValidChildren=g,v.elements=y}}),l("tinymce.core.dom.DOMUtils",["tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.Range","tinymce.core.dom.Sizzle","tinymce.core.dom.StyleSheetLoader","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.html.Entities","tinymce.core.html.Schema","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,c,l,s,u){function d(e,t){var n={},r=t.keep_values,o;return o={set:function(n,r,o){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||e,r,o,n[0])),n.attr("data-mce-"+o,r).attr(o,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},n={style:{set:function(e,t){if(null!==t&&"object"==typeof t)return void e.css(t);r&&e.attr("data-mce-style",t),e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},r&&(n.href=n.src=o),n}function f(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n||(n=null),t.attr("data-mce-style",n)}function m(e,t){var n=0,r,o;if(e)for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)o=e.nodeType,(!t||3!=o||o!=r&&e.nodeValue.length)&&(n++,r=o);return n}function p(n,r){var i=this,a;i.doc=n,i.win=window,i.files={},i.counter=0,i.stdMode=!b||n.documentMode>=8,i.boxModel=!b||"CSS1Compat"==n.compatMode||i.stdMode,i.styleSheetLoader=new o(n),i.boundEvents=[],i.settings=r=r||{},i.schema=r.schema?r.schema:new l({}),i.styles=new s({url_converter:r.url_converter,url_converter_scope:r.url_converter_scope},r.schema),i.fixDoc(n),i.events=r.ownEvents?new t(r.proxy):t.Event,i.attrHooks=d(i,r),a=r.schema?r.schema.getBlockElements():{},i.$=e.overrideDefaults(function(){return{context:n,element:i.getRoot()}}),i.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!a[e.nodeName]):!!a[e]}}var g=u.each,h=u.is,v=u.grep,y=u.trim,b=a.ie,x=/^([a-z0-9],?)+$/i,C=/^[ \t\r\n]*$/;return p.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t=this.settings,n;if(b&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,r,o;return!b||1!==e.nodeType||t?e.cloneNode(t):(o=n.doc,t?r.firstChild:(r=o.createElement(e.nodeName),g(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e||this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===r.indexOf("px")&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,r){var o=this,i,a=[];for(e=o.get(e),r=void 0===r,n=n||("BODY"!=o.getRoot().nodeName?o.getRoot().parentNode:null),h(t,"string")&&(i=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return o.is(e,i)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;a.push(e)}e=e.parentNode}return r?a:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return r(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e)return!1;if(void 0===e.length){if("*"===t)return 1==e.nodeType;if(x.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;n>=0;n--)if(t[n]==e)return!0;return!1}}if(e.nodeType&&1!=e.nodeType)return!1;var o=e.nodeType?[e]:e;return r(t,o[0].ownerDocument||o[0],null,o).length>0},add:function(e,t,n,r,o){var i=this;return this.run(e,function(e){var a;return a=h(t,"string")?i.doc.createElement(t):t,i.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):i.setHTML(a,r)),o?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",o;r+="<"+e;for(o in t)t.hasOwnProperty(o)&&null!==t[o]&&void 0!==t[o]&&(r+=" "+o+'="'+this.encode(t[o])+'"');return void 0!==n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,r=this.doc,o;for(o=r.createElement("div"),t=r.createDocumentFragment(),e&&(o.innerHTML=e);n=o.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&f(this,e)},getStyle:function(e,t,n){return e=this.$$(e),n?e.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=a.ie&&a.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:void 0)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&f(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this,o,i,a=r.settings;""===n&&(n=null),e=r.$$(e),o=e.attr(t),e.length&&(i=r.attrHooks[t],i&&i.set?i.set(e,n,t):e.attr(t,n),o!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){g(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r=this,o,i;return e=r.$$(e),e.length&&(o=r.attrHooks[t],i=o&&o.get?o.get(e,t):e.attr(t)),void 0===i&&(i=n||""),i},getPos:function(t,n){var r=this,o=0,i=0,a,c=r.doc,l=c.body,s;if(t=r.get(t),n=n||l,t){if(n===l&&t.getBoundingClientRect&&"static"===e(l).css("position"))return s=t.getBoundingClientRect(),n=r.boxModel?c.documentElement:l,o=s.left+(c.documentElement.scrollLeft||l.scrollLeft)-n.clientLeft,i=s.top+(c.documentElement.scrollTop||l.scrollTop)-n.clientTop,{x:o,y:i};for(a=t;a&&a!=n&&a.nodeType;)o+=a.offsetLeft||0,i+=a.offsetTop||0,a=a.offsetParent;for(a=t.parentNode;a&&a!=n&&a.nodeType;)o-=a.scrollLeft||0,i-=a.scrollTop||0,a=a.parentNode}return{x:o,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,o;if(t!==p.DOM&&n===document){var i=p.DOM.addedStyles;if(i=i||[],i[e])return;i[e]=!0,p.DOM.addedStyles=i}o=n.getElementById("mceDefaultStyles"),o||(o=n.createElement("style"),o.id="mceDefaultStyles",o.type="text/css",r=n.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o)),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,r;if(t!==p.DOM&&n===document)return void p.DOM.loadCSS(e);e||(e=""),r=n.getElementsByTagName("head")[0],g(e.split(","),function(e){var o;e=u._addCacheSuffix(e),t.files[e]||(t.files[e]=!0,o=t.create("link",{rel:"stylesheet",href:e}),b&&n.documentMode&&n.recalc&&(o.onload=function(){n.recalc&&n.recalc(),o.onload=null}),r.appendChild(o))})},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(t,n,r){this.$$(t).toggleClass(n,r).each(function(){""===this.className&&e(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(t,n){t=this.$$(t),b?t.each(function(t,r){if(!1!==r.canHaveHTML){for(;r.firstChild;)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+n,r.removeChild(r.firstChild)}catch(t){e("<div></div>").html("<br>"+n).contents().slice(1).appendTo(r)}return n}}):t.html(n)},getOuterHTML:function(t){return t=this.get(t),1==t.nodeType&&"outerHTML"in t?t.outerHTML:e("<div></div>").append(e(t).clone()).html()},setOuterHTML:function(t,n){var r=this;r.$$(t).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=n)}catch(e){}r.remove(e(this).html(n),!0)})},decode:c.decode,encode:c.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){return this.run(t,function(t){return h(t,"array")&&(e=e.cloneNode(!0)),n&&g(v(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;return e.nodeName!=t.toUpperCase()&&(r=n.create(t),g(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){for(var n=e,r;n;){for(r=t;r&&n!=r;)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(u.trim(e))},run:function(e,t,n){var r=this,o;return"string"==typeof e&&(e=r.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(o=[],g(e,function(e,i){e&&("string"==typeof e&&(e=r.get(e)),o.push(t.call(n,e,i)))}),o))},getAttribs:function(e){var t;if(!(e=this.get(e)))return[];if(b){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,o,a,c,l,s,u=0;if(e=e.firstChild){l=new i(e,e.parentNode),t=t||(n.schema?n.schema.getNonEmptyElements():null),c=n.schema?n.schema.getWhiteSpaceElements():{};do{if(1===(a=e.nodeType)){var d=e.getAttribute("data-mce-bogus");if(d){e=l.next("all"===d);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){u++,e=l.next();continue}return!1}for(o=n.getAttribs(e),r=o.length;r--;)if("name"===(s=o[r].nodeName)||"data-mce-bookmark"===s)return!1}if(8==a)return!1;if(3===a&&!C.test(e.nodeValue))return!1;if(3===a&&e.parentNode&&c[e.parentNode.nodeName]&&C.test(e.nodeValue))return!1;e=l.next()}while(e)}return u<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new n(this)},nodeIndex:m,split:function(e,t,n){function r(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,i=e.childNodes,a=e.nodeType;if(1!=a||"bookmark"!=e.getAttribute("data-mce-type")){for(n=i.length-1;n>=0;n--)r(i[n]);if(9!=a){if(3==a&&e.nodeValue.length>0){var c=y(e.nodeValue).length;if(!o.isBlock(e.parentNode)||c>0||0===c&&t(e))return}else if(1==a&&(i=e.childNodes,1==i.length&&i[0]&&1==i[0].nodeType&&"bookmark"==i[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(i[0],e),i.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;o.remove(e)}return e}}var o=this,i=o.createRng(),a,c,l;if(e&&t)return i.setStart(e.parentNode,o.nodeIndex(e)),i.setEnd(t.parentNode,o.nodeIndex(t)),a=i.extractContents(),i=o.createRng(),i.setStart(t.parentNode,o.nodeIndex(t)+1),i.setEnd(e.parentNode,o.nodeIndex(e)+1),c=i.extractContents(),l=e.parentNode,l.insertBefore(r(a),e),n?l.insertBefore(n,e):l.insertBefore(t,e),l.insertBefore(r(c),e),o.remove(e),n||t},bind:function(e,t,n,r){var o=this;if(u.isArray(e)){for(var i=e.length;i--;)e[i]=o.bind(e[i],t,n,r);return e}return!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,n,r]),o.events.bind(e,t,n,r||o)},unbind:function(e,t,n){var r=this,o;if(u.isArray(e)){for(o=e.length;o--;)e[o]=r.unbind(e[o],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win))for(o=r.boundEvents.length;o--;){var i=r.boundEvents[o];e!=i[0]||t&&t!=i[1]||n&&n!=i[2]||this.events.unbind(i[0],i[1],i[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&null===(n=this.getContentEditable(e));e=e.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var t=e.boundEvents.length;t--;){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}r.setDocument&&r.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,o=t;if(e)for("string"==typeof o&&(o=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(o(e))return e;return null}},p.DOM=new p(document),p.nodeIndex=m,p}),l("tinymce.core.dom.ScriptLoader",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t){function n(){function e(e,n,o){function i(){l.remove(u),s&&(s.onreadystatechange=s.onload=s=null),n()}function c(){a(o)?o():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)}var l=r,s,u;u=l.uniqueId(),s=document.createElement("script"),s.id=u,s.type="text/javascript",s.src=t._addCacheSuffix(e),"onreadystatechange"in s?s.onreadystatechange=function(){/loaded|complete/.test(s.readyState)&&i()}:s.onload=i,s.onerror=c,(document.getElementsByTagName("head")[0]||document.body).appendChild(s)}var n=0,c=1,l=2,s=3,u={},d=[],f={},m=[],p=0,g;this.isDone=function(e){return 2==u[e]},this.markDone=function(e){u[e]=2},this.add=this.load=function(e,t,n,r){u[e]==g&&(d.push(e),u[e]=0),t&&(f[e]||(f[e]=[]),f[e].push({success:t,failure:r,scope:n||this}))},this.remove=function(e){delete u[e],delete f[e]},this.loadQueue=function(e,t,n){this.loadScripts(d,e,t,n)},this.loadScripts=function(t,n,r,c){function l(e,t){o(f[t],function(t){a(t[e])&&t[e].call(t.scope)}),f[t]=g}var s,d=[];m.push({success:n,failure:c,scope:r||this}),(s=function(){var n=i(t);t.length=0,o(n,function(t){return 2===u[t]?void l("success",t):3===u[t]?void l("failure",t):void(1!==u[t]&&(u[t]=1,p++,e(t,function(){u[t]=2,p--,l("success",t),s()},function(){u[t]=3,p--,d.push(t),l("failure",t),s()})))}),p||(o(m,function(e){0===d.length?a(e.success)&&e.success.call(e.scope):a(e.failure)&&e.failure.call(e.scope,d)}),m.length=0)})()}}var r=e.DOM,o=t.each,i=t.grep,a=function(e){return"function"==typeof e};return n.ScriptLoader=new n,n}),l("tinymce.core.AddOnManager",["tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(e,t){function n(){var e=this;e.items=[],e.urls={},e.lookup={}}var r=t.each;return n.prototype={get:function(e){if(this.lookup[e])return this.lookup[e].instance},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,r){var o=n.language;if(o&&!1!==n.languageLoad){if(r)if(r=","+r+",",-1!=r.indexOf(","+o.substr(0,2)+","))o=o.substr(0,2);else if(-1==r.indexOf(","+o+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+o+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var o=this.urls[t];r(n,function(t){e.ScriptLoader.add(o+"/"+t)})},load:function(t,o,i,a,c){function l(){var n=s.dependencies(t);r(n,function(e){var t=s.createUrl(o,e);s.load(t.resource,t,void 0,void 0)}),i&&(a?i.call(a):i.call(e))}var s=this,u=o;s.urls[t]||("object"==typeof o&&(u=o.prefix+o.resource+o.suffix),0!==u.indexOf("/")&&-1==u.indexOf("://")&&(u=n.baseURL+"/"+u),s.urls[t]=u.substring(0,u.lastIndexOf("/")),s.lookup[t]?l():e.ScriptLoader.add(u,l,a,c))}},n.PluginManager=new n,n.ThemeManager=new n,n}),l("tinymce.core.dom.NodeType",[],function(){function e(e){return function(t){return!!t&&t.nodeType==e}}function t(e){return e=e.toLowerCase().split(" "),function(t){var n,r;if(t&&t.nodeType)for(r=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(r===e[n])return!0;return!1}}function n(e,t){return t=t.toLowerCase().split(" "),function(n){var r,o;if(l(n))for(r=0;r<t.length;r++)if((o=n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(e))===t[r])return!0;return!1}}function r(e,t){return function(n){return l(n)&&n[e]===t}}function o(e,t){return function(t){return l(t)&&t.hasAttribute(e)}}function i(e,t){return function(n){return l(n)&&n.getAttribute(e)===t}}function a(e){return l(e)&&e.hasAttribute("data-mce-bogus")}function c(e){return function(t){if(l(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}}var l=e(1);return{isText:e(3),isElement:l,isComment:e(8),isBr:t("br"),isContentEditableTrue:c("true"),isContentEditableFalse:c("false"),matchNodeNames:t,hasPropValue:r,hasAttribute:o,hasAttributeValue:i,matchStyleValues:n,isBogus:a}}),l("tinymce.core.text.Zwsp",[],function(){var e="\ufeff";return{isZwsp:function(t){return t===e},ZWSP:e,trim:function(t){return t.replace(RegExp(e,"g"),"")}}}),l("tinymce.core.caret.CaretContainer",["tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t){function n(e){return m(e)&&(e=e.parentNode),f(e)&&e.hasAttribute("data-mce-caret")}function r(e){return m(e)&&t.isZwsp(e.data)}function o(e){return n(e)||r(e)}function i(e,n){var r,i,a,c;if(r=e.ownerDocument,a=r.createTextNode(t.ZWSP),c=e.parentNode,n){if(i=e.previousSibling,m(i)){if(o(i))return i;if(s(i))return i.splitText(i.data.length-1)}c.insertBefore(a,e)}else{if(i=e.nextSibling,m(i)){if(o(i))return i;if(l(i))return i.splitText(1),i}e.nextSibling?c.insertBefore(a,e.nextSibling):c.appendChild(a)}return a}function a(){var e=document.createElement("br");return e.setAttribute("data-mce-bogus","1"),e}function c(e,t,n){var r,o,i;return r=t.ownerDocument,o=r.createElement(e),o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(a()),i=t.parentNode,n?i.insertBefore(o,t):t.nextSibling?i.insertBefore(o,t.nextSibling):i.appendChild(o),o}function l(e){return m(e)&&e.data[0]==t.ZWSP}function s(e){return m(e)&&e.data[e.data.length-1]==t.ZWSP}function u(t){var n=t.getElementsByTagName("br"),r=n[n.length-1];e.isBogus(r)&&r.parentNode.removeChild(r)}function d(e){return e&&e.hasAttribute("data-mce-caret")?(u(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null}var f=e.isElement,m=e.isText,p=function(t){return t.firstChild!==t.lastChild||!e.isBr(t.firstChild)};return{isCaretContainer:o,isCaretContainerBlock:n,isCaretContainerInline:r,showCaretContainerBlock:d,insertInline:i,prependInline:function(n){if(e.isText(n)){var r=n.data;return r.length>0&&r.charAt(0)!==t.ZWSP&&n.insertData(0,t.ZWSP),n}return null},appendInline:function(n){if(e.isText(n)){var r=n.data;return r.length>0&&r.charAt(r.length-1)!==t.ZWSP&&n.insertData(r.length,t.ZWSP),n}return null},isBeforeInline:function(n){return n&&e.isText(n.container())&&n.container().data.charAt(n.offset())===t.ZWSP},isAfterInline:function(n){return n&&e.isText(n.container())&&n.container().data.charAt(n.offset()-1)===t.ZWSP},insertBlock:c,hasContent:p,startsWithCaretContainer:l,endsWithCaretContainer:s}}),l("tinymce.core.dom.RangeUtils",["tinymce.core.util.Tools","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.dom.Range","tinymce.core.caret.CaretContainer"],function(e,t,n,r,o){function i(e){return h(e)||v(e)}function a(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e}function c(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}function l(e,t,n){return null!==c(e,t,n)}function s(e,t,n){return l(e,t,function(e){return e.nodeName===n})}function u(e){return"_mce_caret"===e.id}function d(e,t){return y(e)&&!1===l(e,t,u)}function f(e){this.walk=function(t,n){function r(e){var t;return t=e[0],3===t.nodeType&&t===l&&s>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===d&&e.length>0&&t===u&&3===t.nodeType&&e.splice(e.length-1,1),e}function o(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function i(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function c(e,t,i){var a=i?"nextSibling":"previousSibling";for(h=e,v=h.parentNode;h&&h!=t;h=v)v=h.parentNode,y=o(h==e?h:h[a],a),y.length&&(i||y.reverse(),n(r(y)))}var l=t.startContainer,s=t.startOffset,u=t.endContainer,d=t.endOffset,f,m,p,h,v,y,b;if(b=e.select("td[data-mce-selected],th[data-mce-selected]"),b.length>0)return void g(b,function(e){n([e])});if(1==l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[s]),1==u.nodeType&&u.hasChildNodes()&&(u=a(u,d)),l==u)return n(r([l]));for(f=e.findCommonAncestor(l,u),h=l;h;h=h.parentNode){if(h===u)return c(l,f,!0);if(h===f)break}for(h=u;h;h=h.parentNode){if(h===l)return c(u,f);if(h===f)break}m=i(l,f)||l,p=i(u,f)||u,c(l,m,!0),y=o(m==l?m:m.nextSibling,"nextSibling",p==u?p.nextSibling:p),y.length&&n(r(y)),c(u,p)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset;return n==o&&3==n.nodeType?r>0&&r<n.nodeValue.length&&(o=t(n,r),n=o.previousSibling,i>r?(i-=r,n=o=t(o,i).previousSibling,i=o.nodeValue.length,r=0):i=0):(3==n.nodeType&&r>0&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==o.nodeType&&i>0&&i<o.nodeValue.length&&(o=t(o,i).previousSibling,i=o.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:o,endOffset:i}},this.normalize=function(n){function r(r){function a(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)}function c(n,r){for(var o=new t(n,e.getParent(n.parentNode,e.isBlock)||h);n=o[r?"prev":"next"]();)if("BR"===n.nodeName)return!0}function l(e){for(;e&&e!=h;){if(v(e))return!0;e=e.parentNode}return!1}function u(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function f(n,r){var a,c,l;if(r=r||m,l=e.getParent(r.parentNode,e.isBlock)||h,n&&"BR"==r.nodeName&&w&&e.isEmpty(l))return m=r.parentNode,p=e.nodeIndex(r),void(o=!0);for(a=new t(r,l);b=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(b)||d(b,e.getRoot()))return;if(3===b.nodeType&&b.nodeValue.length>0)return void(!1===s(b,h,"A")&&(m=b,p=n?b.nodeValue.length:0,o=!0));if(e.isBlock(b)||x[b.nodeName.toLowerCase()])return;c=b}i&&c&&(m=c,o=!0,p=0)}var m,p,g,h=e.getRoot(),b,x,C,w;if(m=n[(r?"start":"end")+"Container"],p=n[(r?"start":"end")+"Offset"],w=1==m.nodeType&&p===m.childNodes.length,x=e.schema.getNonEmptyElements(),C=r,!y(m)){if(1==m.nodeType&&p>m.childNodes.length-1&&(C=!1),9===m.nodeType&&(m=e.getRoot(),p=0),m===h){if(C&&(b=m.childNodes[p>0?p-1:0])){if(y(b))return;if(x[b.nodeName]||"TABLE"==b.nodeName)return}if(m.hasChildNodes()){if(p=Math.min(!C&&p>0?p-1:p,m.childNodes.length-1),m=m.childNodes[p],p=0,!i&&m===h.lastChild&&"TABLE"===m.nodeName)return;if(l(m)||y(m))return;if(m.hasChildNodes()&&!/TABLE/.test(m.nodeName)){b=m,g=new t(m,h);do{if(v(b)||y(b)){o=!1;break}if(3===b.nodeType&&b.nodeValue.length>0){p=C?0:b.nodeValue.length,m=b,o=!0;break}if(x[b.nodeName.toLowerCase()]&&!a(b)){p=e.nodeIndex(b),m=b.parentNode,"IMG"!=b.nodeName||C||p++,o=!0;break}}while(b=C?g.next():g.prev())}}}i&&(3===m.nodeType&&0===p&&f(!0),1===m.nodeType&&(b=m.childNodes[p],b||(b=m.childNodes[p-1]),!b||"BR"!==b.nodeName||u(b,"A")||c(b)||c(b,!0)||f(!0,b))),C&&!i&&3===m.nodeType&&p===m.nodeValue.length&&f(!1),o&&n["set"+(r?"Start":"End")](m,p)}}var o=!1,i;return i=n.collapsed,r(!0),i||r(),o&&i&&n.collapse(!0),o}}function m(t,n,r){var o,i,a;if(o=r.elementFromPoint(t,n),i=r.body.createTextRange(),o&&"HTML"!=o.tagName||(o=r.body),i.moveToElementText(o),a=e.toArray(i.getClientRects()),a=a.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),a.length>0){n=(a[0].bottom+a[0].top)/2;try{return i.moveToPoint(t,n),i.collapse(!0),i}catch(e){}}return null}function p(e,t){var n=e&&e.parentElement?e.parentElement():null;return v(c(n,t,i))?null:e}var g=e.each,h=n.isContentEditableTrue,v=n.isContentEditableFalse,y=o.isCaretContainer;return f.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},f.getCaretRangeFromPoint=function(e,t,n){var r,o;if(n.caretPositionFromPoint)o=n.caretPositionFromPoint(e,t),r=n.createRange(),r.setStart(o.offsetNode,o.offset),r.collapse(!0);else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){r=n.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=m(e,t,n)}return p(r,n.body)}return r},f.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},f.getNode=function(e,t){return 1==e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},f}),l("tinymce.core.html.Node",[],function(){function e(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,o,i;if("string"!=typeof e){for(o in e)n.attr(o,e[o]);return n}if(r=n.attributes){if(t!==i){if(null===t){if(e in r.map)for(delete r.map[e],o=r.length;o--;)if(r[o].name===e)return r=r.splice(o,1),n;return n}if(e in r.map){for(o=r.length;o--;)if(r[o].name===e){r[o].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,n=new t(e.name,e.type),r,o,i,a,c;if(i=e.attributes){for(c=[],c.map={},r=0,o=i.length;r<o;r++)a=i[r],"id"!==a.name&&(c[c.length]={name:a.name,value:a.value},c.map[a.name]=a.value);n.attributes=c}return n.value=e.value,n.shortEnded=e.shortEnded,n},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n=this,r,o=[];for(r=n.firstChild;r;r=e(r,n))r.name===t&&o.push(r);return o},empty:function(){var t=this,n,r,o;if(t.firstChild){for(n=[],o=t.firstChild;o;o=e(o,t))n.push(o);for(r=n.length;r--;)o=n[r],o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}return t.firstChild=t.lastChild=null,t},isEmpty:function(t,r){var o=this,i=o.firstChild,a,c;if(r=r||{},i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(t[i.name])return!1;for(a=i.attributes.length;a--;)if("name"===(c=i.attributes[a].name)||0===c.indexOf("data-mce-bookmark"))return!1}if(8===i.type)return!1;if(3===i.type&&!n.test(i.value))return!1;if(3===i.type&&i.parent&&r[i.parent.name]&&n.test(i.value))return!1}while(i=e(i,o));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var o,i;if(o=new t(e,r[e]||1),n)for(i in n)o.attr(i,n[i]);return o},t}),l("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t,n){function r(e,t,n){var r=1,o,i,a,c;for(c=e.getShortEndedElements(),a=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,a.lastIndex=o=n;i=a.exec(t);){if(o=a.lastIndex,"/"===i[1])r--;else if(!i[1]){if(i[2]in c)continue;r++}if(0===r)break}return o}function o(o,l){function s(){}var u=this;o=o||{},u.schema=l=l||new e,!1!==o.fix_self_closing&&(o.fix_self_closing=!0),i("comment cdata text start end pi doctype".split(" "),function(e){e&&(u[e]=o[e]||s)}),u.parse=function(e){function i(e){var t,n;for(t=g.length;t--&&g[t].name!==e;);if(t>=0){for(n=g.length-1;n>=t;n--)e=g[n],e.valid&&u.end(e.name);g.length=t}}function s(e,t,n,r,i){var c,l,s=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in T?t:V(n||r||i||""),E&&!x&&!1===a(t)){if(!(c=_[t])&&B){for(l=B.length;l--&&(c=B[l],!c.pattern.test(t)););-1===l&&(c=null)}if(!c)return;if(c.validValues&&!(n in c.validValues))return}if(q[t]&&!o.allow_script_urls){var u=n.replace(s,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if($.test(u))return;if(!o.allow_html_data_urls&&K.test(u)&&!/^data:image\//i.test(u))return}x&&(t in q||0===t.indexOf("on"))||(h.map[t]=n,h.push({name:t,value:n}))}var u=this,d,f=0,m,p,g=[],h,v,y,b,x,C,w,T,k,E,S,N,R,A,_,B,P,D,M,I,O,L,F,H,U,z,W=0,V=t.decode,j,q=n.makeMap("src,href,data,background,formaction,poster"),$=/((java|vb)script|mhtml):/i,K=/^data:/i;for(F=RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),H=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,w=l.getShortEndedElements(),L=o.self_closing_elements||l.getSelfClosingElements(),T=l.getBoolAttrs(),E=o.validate,C=o.remove_internals,j=o.fix_self_closing,U=l.getSpecialElements(),I=e+">";d=F.exec(I);){if(f<d.index&&u.text(V(e.substr(f,d.index-f))),m=d[6])m=m.toLowerCase(),":"===m.charAt(0)&&(m=m.substr(1)),i(m);else if(m=d[7]){if(d.index+d[0].length>e.length){u.text(V(e.substr(d.index))),f=d.index+d[0].length;continue}if(m=m.toLowerCase(),":"===m.charAt(0)&&(m=m.substr(1)),k=m in w,j&&L[m]&&g.length>0&&g[g.length-1].name===m&&i(m),!E||(S=l.getElementRule(m))){if(N=!0,E&&(_=S.attributes,B=S.attributePatterns),(A=d[8])?(x=-1!==A.indexOf("data-mce-type"),x&&C&&(N=!1),h=[],h.map={},A.replace(H,s)):(h=[],h.map={}),E&&!x){if(P=S.attributesRequired,D=S.attributesDefault,M=S.attributesForced,O=S.removeEmptyAttrs,O&&!h.length&&(N=!1),M)for(v=M.length;v--;)R=M[v],b=R.name,z=R.value,"{$uid}"===z&&(z="mce_"+W++),h.map[b]=z,h.push({name:b,value:z});if(D)for(v=D.length;v--;)R=D[v],(b=R.name)in h.map||(z=R.value,"{$uid}"===z&&(z="mce_"+W++),h.map[b]=z,h.push({name:b,value:z}));if(P){for(v=P.length;v--&&!(P[v]in h.map););-1===v&&(N=!1)}if(R=h.map["data-mce-bogus"]){if("all"===R){f=r(l,e,F.lastIndex),F.lastIndex=f;continue}N=!1}}N&&u.start(m,h,k)}else N=!1;if(p=U[m]){p.lastIndex=f=d.index+d[0].length,(d=p.exec(e))?(N&&(y=e.substr(f,d.index-f)),f=d.index+d[0].length):(y=e.substr(f),f=e.length),N&&(y.length>0&&u.text(y,!0),u.end(m)),F.lastIndex=f;continue}k||(A&&A.indexOf("/")==A.length-1?N&&u.end(m):g.push({name:m,valid:N}))}else(m=d[1])?(">"===m.charAt(0)&&(m=" "+m),o.allow_conditional_comments||"[if"!==m.substr(0,3).toLowerCase()||(m=" "+m),u.comment(m)):(m=d[2])?u.cdata(c(m)):(m=d[3])?u.doctype(m):(m=d[4])&&u.pi(m,d[5]);f=d.index+d[0].length}for(f<e.length&&u.text(V(e.substr(f))),v=g.length-1;v>=0;v--)m=g[v],m.valid&&u.end(m.name)}}var i=n.each,a=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},c=function(e){return e.replace(/<!--|-->/g,"")};return o.findEndTag=r,o}),l("tinymce.core.html.DomParser",["tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.util.Tools"],function(e,t,n,r){var o=r.makeMap,i=r.each,a=r.explode,c=r.extend,l=function(t,n){t.padd_empty_with_br?n.empty().append(new e("br","1")).shortEnded=!0:n.empty().append(new e("#text","3")).value="\xa0"},s=function(e,t){return e&&e.firstChild===e.lastChild&&e.firstChild.name===t};return function(u,d){function f(t){var n,r,i,a,c,l,u,f,p,g,h,v,y,b,x,C;for(v=o("tr,td,th,tbody,thead,tfoot,table"),g=d.getNonEmptyElements(),h=d.getWhiteSpaceElements(),y=d.getTextBlockElements(),b=d.getSpecialElements(),n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(y[r.name]&&"li"==r.parent.name){for(x=r.next;x&&y[x.name];)x.name="li",x.fixed=!0,r.parent.insert(x,r.parent),x=x.next;r.unwrap(r)}else{for(a=[r],i=r.parent;i&&!d.isValidChild(i.name,r.name)&&!v[i.name];i=i.parent)a.push(i);if(i&&a.length>1){for(a.reverse(),c=l=m.filterNode(a[0].clone()),p=0;p<a.length-1;p++){for(d.isValidChild(l.name,a[p].name)?(u=m.filterNode(a[p].clone()),l.append(u)):u=l,f=a[p].firstChild;f&&f!=a[p+1];)C=f.next,u.append(f),f=C;l=u}c.isEmpty(g,h)?i.insert(r,a[0],!0):(i.insert(c,a[0],!0),i.insert(r,c)),i=a[0],(i.isEmpty(g,h)||s(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if((x=r.prev)&&("ul"===x.name||"ul"===x.name)){x.append(r);continue}if((x=r.next)&&("ul"===x.name||"ul"===x.name)){x.insert(r,x.firstChild,!0);continue}r.wrap(m.filterNode(new e("ul",1)));continue}d.isValidChild(r.parent.name,"div")&&d.isValidChild("div",r.name)?r.wrap(m.filterNode(new e("div",1))):b[r.name]?r.empty().remove():r.unwrap()}}}var m=this,p={},g=[],h={},v={};u=u||{},u.validate=!("validate"in u)||u.validate,u.root_name=u.root_name||"body",m.schema=d=d||new t,m.filterNode=function(e){var t,n,r;n in p&&(r=h[n],r?r.push(e):h[n]=[e]),t=g.length;for(;t--;)(n=g[t].name)in e.attributes.map&&(r=v[n],r?r.push(e):v[n]=[e]);return e},m.addNodeFilter=function(e,t){i(a(e),function(e){var n=p[e];n||(p[e]=n=[]),n.push(t)})},m.addAttributeFilter=function(e,t){i(a(e),function(e){var n;for(n=0;n<g.length;n++)if(g[n].name===e)return void g[n].callbacks.push(t);g.push({name:e,callbacks:[t]})})},m.parse=function(t,r){function i(){function e(e){e&&(t=e.firstChild,t&&3==t.type&&(t.value=t.value.replace(_,"")),(t=e.lastChild)&&3==t.type&&(t.value=t.value.replace(D,"")))}var t=b.firstChild,n,r;if(d.isValidChild(b.name,H.toLowerCase())){for(;t;)n=t.next,3==t.type||1==t.type&&"p"!==t.name&&!A[t.name]&&!t.attr("data-mce-type")?r?r.append(t):(r=a(H,1),r.attr(u.forced_root_block_attrs),b.insert(r,t),r.append(t)):(e(r),r=null),t=n;e(r)}}function a(t,n){var r=new e(t,n),o;return t in p&&(o=h[t],o?o.push(r):h[t]=[r]),r}function s(e){var t,n,r,o,i=d.getBlockElements();for(t=e.prev;t&&3===t.type;){if(r=t.value.replace(D,""),r.length>0)return void(t.value=r);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!i[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}o=t.prev,t.remove(),t=o}}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var y,b,x,C,w,T,k,E,S,N,R,A,_,B=[],P,D,M,I,O,L,F,H;if(r=r||{},h={},v={},A=c(o("script,style,head,html,body,title,meta,param"),d.getBlockElements()),F=d.getNonEmptyElements(),L=d.children,R=u.validate,H="forced_root_block"in r?r.forced_root_block:u.forced_root_block,O=d.getWhiteSpaceElements(),_=/^[ \t\r\n]+/,D=/[ \t\r\n]+$/,M=/[ \t\r\n]+/g,I=/^[ \t\r\n]+$/,y=new n({validate:R,allow_script_urls:u.allow_script_urls,allow_conditional_comments:u.allow_conditional_comments,self_closing_elements:m(d.getSelfClosingElements()),cdata:function(e){x.append(a("#cdata",4)).value=e},text:function(e,t){var n;P||(e=e.replace(M," "),x.lastChild&&A[x.lastChild.name]&&(e=e.replace(_,""))),0!==e.length&&(n=a("#text",3),n.raw=!!t,x.append(n).value=e)},comment:function(e){x.append(a("#comment",8)).value=e},pi:function(e,t){x.append(a(e,7)).value=t,s(x)},doctype:function(e){var t;t=x.append(a("#doctype",10)),t.value=e,s(x)},start:function(e,t,n){var r,o,i,c,l;if(i=R?d.getElementRule(e):{}){for(r=a(i.outputName||e,1),r.attributes=t,r.shortEnded=n,x.append(r),l=L[x.name],l&&L[r.name]&&!l[r.name]&&B.push(r),o=g.length;o--;)(c=g[o].name)in t.map&&(S=v[c],S?S.push(r):v[c]=[r]);A[e]&&s(r),n||(x=r),!P&&O[e]&&(P=!0)}},end:function(e){var t,n,r,o,i;if(n=R?d.getElementRule(e):{}){if(A[e]&&!P){if((t=x.firstChild)&&3===t.type)if(r=t.value.replace(_,""),r.length>0)t.value=r,t=t.next;else for(o=t.next,t.remove(),t=o;t&&3===t.type;)r=t.value,o=t.next,(0===r.length||I.test(r))&&(t.remove(),t=o),t=o;if((t=x.lastChild)&&3===t.type)if(r=t.value.replace(D,""),r.length>0)t.value=r,t=t.prev;else for(o=t.prev,t.remove(),t=o;t&&3===t.type;)r=t.value,o=t.prev,(0===r.length||I.test(r))&&(t.remove(),t=o),t=o}if(P&&O[e]&&(P=!1),(n.removeEmpty||n.paddEmpty)&&x.isEmpty(F,O))if(n.paddEmpty)l(u,x);else if(!x.attributes.map.name&&!x.attributes.map.id)return i=x.parent,A[x.name]?x.empty().remove():x.unwrap(),void(x=i);x=x.parent}}},d),b=x=new e(r.context||u.root_name,11),y.parse(t),R&&B.length&&(r.context?r.invalid=!0:f(B)),H&&("body"==b.name||r.isRootContent)&&i(),!r.invalid){for(N in h){for(S=p[N],C=h[N],k=C.length;k--;)C[k].parent||C.splice(k,1);for(w=0,T=S.length;w<T;w++)S[w](C,N,r)}for(w=0,T=g.length;w<T;w++)if(S=g[w],S.name in v){for(C=v[S.name],k=C.length;k--;)C[k].parent||C.splice(k,1);for(k=0,E=S.callbacks.length;k<E;k++)S.callbacks[k](C,S.name,r)}}return b},u.remove_trailing_brs&&m.addNodeFilter("br",function(t){var n,r=t.length,o,i=c({},d.getBlockElements()),a=d.getNonEmptyElements(),s,f,m,p,g=d.getNonEmptyElements(),h,v;for(i.body=1,n=0;n<r;n++)if(o=t[n],s=o.parent,i[o.parent.name]&&o===s.lastChild){for(m=o.prev;m;){if("span"!==(p=m.name)||"bookmark"!==m.attr("data-mce-type")){if("br"!==p)break;if("br"===p){o=null;break}}m=m.prev}o&&(o.remove(),s.isEmpty(a,g)&&(h=d.getElementRule(s.name))&&(h.removeEmpty?s.remove():h.paddEmpty&&l(u,s)))}else{for(f=o;s&&s.firstChild===f&&s.lastChild===f&&(f=s,!i[s.name]);)s=s.parent;f===s&&!0!==u.padd_empty_with_br&&(v=new e("#text",3),v.value="\xa0",o.replace(v))}}),m.addAttributeFilter("href",function(e){var t=e.length,n,o=function(e){return e.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")},i=function(e){var t=e?r.trim(e):"";return/\b(noopener)\b/g.test(t)?t:o(t)};if(!u.allow_unsafe_link_target)for(;t--;)n=e[t],"a"===n.name&&"_blank"===n.attr("target")&&n.attr("rel",i(n.attr("rel")))}),u.allow_html_in_named_anchor||m.addAttributeFilter("id,name",function(e){for(var t=e.length,n,r,o,i;t--;)if(i=e[t],"a"===i.name&&i.firstChild&&!i.attr("href")){o=i.parent,n=i.lastChild;do{r=n.prev,o.insert(n,i),n=r}while(n)}}),u.fix_list_elements&&m.addNodeFilter("ul,ol",function(t){for(var n=t.length,r,o;n--;)if(r=t[n],o=r.parent,"ul"===o.name||"ol"===o.name)if(r.prev&&"li"===r.prev.name)r.prev.append(r);else{var i=new e("li",1);i.attr("style","list-style-type: none"),r.wrap(i)}}),u.validate&&d.getValidClasses()&&m.addAttributeFilter("class",function(e){for(var t=e.length,n,r,o,i,a,c=d.getValidClasses(),l,s;t--;){for(n=e[t],r=n.attr("class").split(" "),a="",o=0;o<r.length;o++)i=r[o],s=!1,l=c["*"],l&&l[i]&&(s=!0),l=c[n.name],!s&&l&&l[i]&&(s=!0),s&&(a&&(a+=" "),a+=i);a.length||(a=null),n.attr("class",a)}})}}),l("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t){var n=t.makeMap;return function(t){var r=[],o,i,a,c,l;return t=t||{},o=t.indent,i=n(t.indent_before||""),a=n(t.indent_after||""),c=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),l="html"==t.element_format,{start:function(e,t,n){var s,u,d,f;if(o&&i[e]&&r.length>0&&(f=r[r.length-1],f.length>0&&"\n"!==f&&r.push("\n")),r.push("<",e),t)for(s=0,u=t.length;s<u;s++)d=t[s],r.push(" ",d.name,'="',c(d.value,!0),'"');r[r.length]=!n||l?">":" />",n&&o&&a[e]&&r.length>0&&(f=r[r.length-1],f.length>0&&"\n"!==f&&r.push("\n"))},end:function(e){var t;r.push("</",e,">"),o&&a[e]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(e,t){e.length>0&&(r[r.length]=t?e:c(e))},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("\x3c!--",e,"--\x3e")},pi:function(e,t){t?r.push("<?",e," ",c(t),"?>"):r.push("<?",e,"?>"),o&&r.push("\n")},doctype:function(e){r.push("<!DOCTYPE",e,">",o?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}}),l("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(e,t){return function(n,r){var o=this,i=new e(n);n=n||{},n.validate=!("validate"in n)||n.validate,o.schema=r=r||new t,o.writer=i,o.serialize=function(e){function t(e){var n=o[e.type],c,l,s,u,d,f,m,p,g;if(n)n(e);else{if(c=e.name,l=e.shortEnded,s=e.attributes,a&&s&&s.length>1&&(f=[],f.map={},g=r.getElementRule(e.name))){for(m=0,p=g.attributesOrder.length;m<p;m++)(u=g.attributesOrder[m])in s.map&&(d=s.map[u],f.map[u]=d,f.push({name:u,value:d}));for(m=0,p=s.length;m<p;m++)(u=s[m].name)in f.map||(d=s.map[u],f.map[u]=d,f.push({name:u,value:d}));s=f}if(i.start(e.name,s,l),!l){if(e=e.firstChild)do{t(e)}while(e=e.next);i.end(c)}}}var o,a;return a=n.validate,o={3:function(e){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do{t(e)}while(e=e.next)}},i.reset(),1!=e.type||n.inner?o[11](e):t(e),i.getContent()}}}),l("tinymce.core.dom.Serializer",["tinymce.core.dom.DOMUtils","tinymce.core.html.DomParser","tinymce.core.html.SaxParser","tinymce.core.html.Entities","tinymce.core.html.Serializer","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.text.Zwsp"],function(e,t,n,r,o,i,a,c,l,s){function u(e){function t(e){return e&&"br"===e.name}var n,r;n=e.lastChild,t(n)&&(r=n.prev,t(r)&&(n.remove(),r.remove()))}var d=l.each,f=l.trim,m=e.DOM;return function(e,i){function p(e){var t=RegExp(["<span[^>]+data-mce-bogus[^>]+>[\u200b\ufeff]+<\\/span>","\\s?("+C.join("|")+')="[^"]+"'].join("|"),"gi");return e=s.trim(e.replace(t,""))}function g(e){var t=e,r=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o,a,c,l,s,u=i.schema;for(t=p(t),s=u.getShortEndedElements();l=r.exec(t);)a=r.lastIndex,c=l[0].length,o=s[l[1]]?a:n.findEndTag(u,t,a),t=t.substring(0,a-c)+t.substring(o),r.lastIndex=a-c;return t}function h(){return g(i.getBody().innerHTML)}function v(e){-1===l.inArray(C,e)&&(x.addAttributeFilter(e,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),C.push(e))}var y,b,x,C=["data-mce-selected"];return i&&(y=i.dom,b=i.schema),y=y||m,b=b||new a(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,x=new t(e,b),x.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n=e.length,r;n--;)r=e[n],r.attr("tabindex",r.attributes.map["data-mce-tabindex"]),r.attr(t,null)}),x.addAttributeFilter("src,href,style",function(t,n){for(var r=t.length,o,i,a="data-mce-"+n,c=e.url_converter,l=e.url_converter_scope,s;r--;)o=t[r],i=o.attributes.map[a],i!==s?(o.attr(n,i.length>0?i:null),o.attr(a,null)):(i=o.attributes.map[n],"style"===n?i=y.serializeStyle(y.parseStyle(i),o.name):c&&(i=c.call(l,i,n,o.name)),o.attr(n,i.length>0?i:null))}),x.addAttributeFilter("class",function(e){for(var t=e.length,n,r;t--;)n=e[t],(r=n.attr("class"))&&(r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null))}),x.addAttributeFilter("data-mce-type",function(e,t,n){for(var r=e.length,o;r--;)o=e[r],"bookmark"!==o.attributes.map["data-mce-type"]||n.cleanup||o.remove()}),x.addNodeFilter("noscript",function(e){for(var t=e.length,n;t--;)(n=e[t].firstChild)&&(n.value=r.decode(n.value))}),x.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r=e.length,o,i,a;r--;)o=e[r],i=o.firstChild?o.firstChild.value:"","script"===t?(a=o.attr("type"),a&&o.attr("type","mce-no/type"==a?null:a.replace(/^mce\-/,"")),i.length>0&&(o.firstChild.value="// <![CDATA[\n"+n(i)+"\n// ]]>")):i.length>0&&(o.firstChild.value="\x3c!--\n"+n(i)+"\n--\x3e")}),x.addNodeFilter("#comment",function(e){for(var t=e.length,n;t--;)n=e[t],0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),x.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,r;n--;)r=e[n],7===r.type?r.remove():1===r.type&&("input"!==t||"type"in r.attributes.map||r.attr("type","text"))}),x.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:b,addNodeFilter:x.addNodeFilter,addAttributeFilter:x.addAttributeFilter,serialize:function(t,n){var r=this,i,a,l,m,p,g;return c.ie&&y.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),y.setHTML(t,p)):t=t.cloneNode(!0),i=document.implementation,i.createHTMLDocument&&(a=i.createHTMLDocument(""),d("BODY"==t.nodeName?t.childNodes:[t],function(e){a.body.appendChild(a.importNode(e,!0))}),t="BODY"!=t.nodeName?a.body.firstChild:a.body,l=y.doc,y.doc=a),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,r.onPreProcess(n)),g=x.parse(f(n.getInner?t.innerHTML:y.getOuterHTML(t)),n),u(g),m=new o(e,b),n.content=m.serialize(g),n.cleanup||(n.content=s.trim(n.content),n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||r.onPostProcess(n),l&&(y.doc=l),n.node=null,n.content},addRules:function(e){b.addValidElements(e)},setRules:function(e){b.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)},addTempAttr:v,trimHtml:p,getTrimmedContent:h,trimContent:g}}}),l("tinymce.core.util.VK",["tinymce.core.Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),l("tinymce.core.geom.ClientRect",[],function(){function e(e){return e?{left:u(e.left),top:u(e.top),bottom:u(e.bottom),right:u(e.right),width:u(e.width),height:u(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function t(t,n){return t=e(t),n?t.right=t.left:(t.left=t.left+t.width,t.right=t.left),t.width=0,t}function n(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}function r(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2}function o(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&r(t.top-e.bottom,e,t)}function i(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&r(t.bottom-e.top,e,t)}function a(e,t){return e.left<t.left}function c(e,t){return e.right>t.right}function l(e,t){return o(e,t)?-1:i(e,t)?1:a(e,t)?-1:c(e,t)?1:0}function s(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}var u=Math.round;return{clone:e,collapse:t,isEqual:n,isAbove:o,isBelow:i,isLeft:a,isRight:c,compare:l,containsXY:s}}),l("tinymce.core.dom.RangePoint",["ephox.katamari.api.Arr","tinymce.core.geom.ClientRect"],function(e,t){return{isXYWithinRange:function(n,r,o){return!o.collapsed&&e.foldl(o.getClientRects(),function(e,o){return e||t.containsXY(o,n,r)},!1)}}}),l("tinymce.core.dom.ControlSelection",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,o,i,a){function c(e,t){for(;t&&t!=e;){if(s(t)||l(t))return t;t=t.parentNode}return null}var l=t.isContentEditableFalse,s=t.isContentEditableTrue,u=function(e){return e&&"IMG"===e.nodeName},d=function(e,t){return u(e.target)&&!n.isXYWithinRange(e.clientX,e.clientY,t)},f=function(e,t){var n=t.target;d(t,e.selection.getRng())&&!t.isDefaultPrevented()&&(t.preventDefault(),e.selection.select(n))};return function(t,n){function s(e){var t=n.settings.object_resizing;return!1!==t&&!r.iOS&&("string"!=typeof t&&(t="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!=n.getBody()&&n.dom.is(e,t)))}function u(e){var t,r,o,i,c;t=e.screenX-I,r=e.screenY-O,V=t*D[2]+H,j=r*D[3]+U,V=V<5?5:V,j=j<5?5:j,o="IMG"==A.nodeName&&!1!==n.settings.resize_img_proportional?!a.modifierPressed(e):a.modifierPressed(e)||"IMG"==A.nodeName&&D[2]*D[3]!=0,o&&(Y(t)>Y(r)?(j=X(V*z),V=X(j/z)):(V=X(j/z),j=X(V*z))),N.setStyles(_,{width:V,height:j}),i=D.startPos.x+t,c=D.startPos.y+r,i=i>0?i:0,c=c>0?c:0,N.setStyles(B,{left:i,top:c,display:"block"}),B.innerHTML=V+" &times; "+j,D[2]<0&&_.clientWidth<=V&&N.setStyle(_,"left",L+(H-V)),D[3]<0&&_.clientHeight<=j&&N.setStyle(_,"top",F+(U-j)),t=G.scrollWidth-J,r=G.scrollHeight-Q,t+r!==0&&N.setStyles(B,{left:i-t,top:c-r}),W||(n.fire("ObjectResizeStart",{target:A,width:H,height:U}),W=!0)}function d(){function e(e,t){t&&(A.style[e]||!n.schema.isValid(A.nodeName.toLowerCase(),e)?N.setStyle(A,e,t):N.setAttrib(A,e,t))}W=!1,e("width",V),e("height",j),N.unbind(q,"mousemove",u),N.unbind(q,"mouseup",d),$!=q&&(N.unbind($,"mousemove",u),N.unbind($,"mouseup",d)),N.remove(_),N.remove(B),K&&"TABLE"!=A.nodeName||m(A),n.fire("ObjectResized",{target:A,width:V,height:j}),N.setAttrib(A,"style",N.getAttrib(A,"style")),n.nodeChanged()}function m(e,t,o){var i,a,c,l,f;p(),T(),i=N.getPos(e,G),L=i.x,F=i.y,f=e.getBoundingClientRect(),a=f.width||f.right-f.left,c=f.height||f.bottom-f.top,A!=e&&(w(),A=e,V=j=0),l=n.fire("ObjectSelected",{target:e}),s(e)&&!l.isDefaultPrevented()?R(P,function(e,n){function i(t){I=t.screenX,O=t.screenY,H=A.clientWidth,U=A.clientHeight,z=U/H,D=e,e.startPos={x:a*e[0]+L,y:c*e[1]+F},J=G.scrollWidth,Q=G.scrollHeight,_=A.cloneNode(!0),N.addClass(_,"mce-clonedresizable"),N.setAttrib(_,"data-mce-bogus","all"),_.contentEditable=!1,_.unSelectabe=!0,N.setStyles(_,{left:L,top:F,margin:0}),_.removeAttribute("data-mce-selected"),G.appendChild(_),N.bind(q,"mousemove",u),N.bind(q,"mouseup",d),$!=q&&(N.bind($,"mousemove",u),N.bind($,"mouseup",d)),B=N.add(G,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},H+" &times; "+U)}var l;if(t)return void(n==t&&i(o));l=N.get("mceResizeHandle"+n),l&&N.remove(l),l=N.add(G,"div",{id:"mceResizeHandle"+n,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+n+"-resize; margin:0; padding:0"}),r.ie&&(l.contentEditable=!1),N.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),i(e)}),e.elm=l,N.setStyles(l,{left:a*e[0]+L-l.offsetWidth/2,top:c*e[1]+F-l.offsetHeight/2})}):p(),A.setAttribute("data-mce-selected","1")}function p(){var e,t;T(),A&&A.removeAttribute("data-mce-selected");for(e in P)(t=N.get("mceResizeHandle"+e))&&(N.unbind(t),N.remove(t))}function g(e){function r(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)}var o,i;if(!W&&!n.removed){if(R(N.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),i="mousedown"==e.type?e.target:t.getNode(),i=N.$(i).closest(K?"table":"table,img,hr")[0],r(i,G)&&(k(),o=t.getStart(!0),r(o,i)&&r(t.getEnd(!0),i)&&(!K||i!=o&&"IMG"!==o.nodeName)))return void m(i);p()}}function h(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function v(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function y(e){var t=e.srcElement,r,o,i,a,c,l,s;r=t.getBoundingClientRect(),l=M.clientX-r.left,s=M.clientY-r.top;for(o in P)if(i=P[o],a=t.offsetWidth*i[0],c=t.offsetHeight*i[1],Y(a-l)<8&&Y(c-s)<8){D=i;break}W=!0,n.fire("ObjectResizeStart",{target:A,width:A.clientWidth,height:A.clientHeight}),n.getDoc().selection.empty(),m(t,o,M)}function b(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function x(e){return l(c(n.getBody(),e))}function C(e){var t=e.srcElement;if(x(t))return void b(e);if(t!=A){if(n.fire("ObjectSelected",{target:t}),w(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);"IMG"!=t.nodeName&&"TABLE"!=t.nodeName||(p(),A=t,h(t,"resizestart",y))}}function w(){v(A,"resizestart",y)}function T(){for(var e in P){var t=P[e];t.elm&&(N.unbind(t.elm),delete t.elm)}}function k(){try{n.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function E(e){var t;if(K){t=q.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(e){}}}function S(){A=_=null,K&&(w(),v(G,"controlselect",C))}var N=n.dom,R=i.each,A,_,B,P,D,M,I,O,L,F,H,U,z,W,V,j,q=n.getDoc(),$=document,K=r.ie&&r.ie<11,Y=Math.abs,X=Math.round,G=n.getBody(),J,Q;P={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var Z=".mce-content-body";return n.contentStyles.push(Z+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+Z+" .mce-resizehandle:hover {background: #000}"+Z+" img[data-mce-selected],"+Z+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+Z+" .mce-clonedresizable {position: absolute;"+(r.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+Z+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),n.on("init",function(){K?(n.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(p(),E(e.target))}),h(G,"controlselect",C),n.on("mousedown",function(e){M=e})):(k(),r.ie>=11&&(n.on("mousedown click",function(e){var t=e.target,r=t.nodeName;W||!/^(TABLE|IMG|HR)$/.test(r)||x(t)||(2!==e.button&&n.selection.select(t,"TABLE"==r),"mousedown"==e.type&&n.nodeChanged())}),n.dom.bind(G,"mscontrolselect",function(e){function t(e){o.setEditorTimeout(n,function(){n.selection.select(e)})}if(x(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target))})));var t=o.throttle(function(e){n.composing||g(e)});n.on("nodechange ResizeEditor ResizeWindow drop",t),n.on("keyup compositionend",function(e){A&&"TABLE"==A.nodeName&&t(e)}),n.on("hide blur",p),n.on("contextmenu",e.curry(f,n))}),n.on("remove",T),{isResizable:s,showResizeRect:m,hideResizeRect:p,updateResizeRect:g,controlSelect:E,destroy:S}}}),l("tinymce.core.util.Fun",[],function(){function e(e){return function(){return e}}function t(e){return function(t){return!e(t)}}function n(e,t){return function(n){return e(t(n))}}function r(){var e=c.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}function o(){var e=c.call(arguments);return function(t){for(var n=0;n<e.length;n++)if(!e[n](t))return!1;return!0}}function i(e){var t=c.call(arguments);return t.length-1>=e.length?e.apply(this,t.slice(1)):function(){var e=t.concat([].slice.call(arguments));return i.apply(this,e)}}function a(){}var c=[].slice;return{constant:e,negate:t,and:o,or:r,curry:i,compose:n,noop:a}}),l("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(e,t,n){function r(e){return!g(e)&&(d(e)?!f(e.parentNode):m(e)||u(e)||p(e)||s(e))}function o(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(s(e))return!1;if(l(e))return!0}return!0}function i(e){return!!s(e)&&!0!==t.reduce(e.getElementsByTagName("*"),function(e,t){return e||l(t)},!1)}function a(e){return m(e)||i(e)}function c(e,t){return r(e)&&o(e,t)}var l=e.isContentEditableTrue,s=e.isContentEditableFalse,u=e.isBr,d=e.isText,f=e.matchNodeNames("script style textarea"),m=e.matchNodeNames("img input textarea hr iframe video audio object"),p=e.matchNodeNames("table"),g=n.isCaretContainer;return{isCaretCandidate:r,isInEditable:o,isAtomic:a,isEditableCaretCandidate:c}}),l("tinymce.core.text.ExtendingChar",[],function(){function e(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&t.test(e)}var t=RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]");return{isExtendingChar:e}}),l("tinymce.core.caret.CaretPosition",["tinymce.core.util.Fun","tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.dom.RangeUtils","tinymce.core.caret.CaretCandidate","tinymce.core.geom.ClientRect","tinymce.core.text.ExtendingChar"],function(e,t,n,r,o,i,a){function c(e){return"createRange"in e?e.createRange():n.DOM.createRng()}function l(e){return e&&/[\r\n\t ]/.test(e)}function s(e){var t=e.startContainer,n=e.startOffset,r;return!!(l(""+e)&&v(t.parentNode)&&(r=t.data,l(r[n-1])||l(r[n+1])))}function u(e){function t(e){var t=e.ownerDocument,n=c(t),r=t.createTextNode("\xa0"),o=e.parentNode,a;return o.insertBefore(r,e),n.setStart(r,0),n.setEnd(r,1),a=i.clone(n.getBoundingClientRect()),o.removeChild(r),a}function n(e){var n,r;return r=e.getClientRects(),n=r.length>0?i.clone(r[0]):i.clone(e.getBoundingClientRect()),b(e)&&0===n.left?t(e):n}function r(e,t){return e=i.collapse(e,t),e.width=1,e.right=e.left+1,e}function o(e){0!==e.height&&(u.length>0&&i.isEqual(e,u[u.length-1])||u.push(e))}function l(e,t){var i=c(e.ownerDocument);if(t<e.data.length){if(a.isExtendingChar(e.data[t]))return u;if(a.isExtendingChar(e.data[t-1])&&(i.setStart(e,t),i.setEnd(e,t+1),!s(i)))return o(r(n(i),!1)),u}t>0&&(i.setStart(e,t-1),i.setEnd(e,t),s(i)||o(r(n(i),!1))),t<e.data.length&&(i.setStart(e,t),i.setEnd(e,t+1),s(i)||o(r(n(i),!0)))}var u=[],d,m;if(y(e.container()))return l(e.container(),e.offset()),u;if(f(e.container()))if(e.isAtEnd())m=C(e.container(),e.offset()),y(m)&&l(m,m.data.length),h(m)&&!b(m)&&o(r(n(m),!1));else{if(m=C(e.container(),e.offset()),y(m)&&l(m,0),h(m)&&e.isAtEnd())return o(r(n(m),!1)),u;d=C(e.container(),e.offset()-1),h(d)&&!b(d)&&(p(d)||p(m)||!h(m))&&o(r(n(d),!1)),h(m)&&o(r(n(m),!0))}return u}function d(t,n,r){function o(){return y(t),0===n}function i(){return y(t)?n>=t.data.length:n>=t.childNodes.length}function a(){var e;return e=c(t.ownerDocument),e.setStart(t,n),e.setEnd(t,n),e}function l(){return r||(r=u(new d(t,n))),r}function s(){return l().length>0}function f(e){return e&&t===e.container()&&n===e.offset()}function m(e){return C(t,e?n-1:n)}return{container:e.constant(t),offset:e.constant(n),toRange:a,getClientRects:l,isVisible:s,isAtStart:o,isAtEnd:i,isEqual:f,getNode:m}}var f=t.isElement,m=o.isCaretCandidate,p=t.matchStyleValues("display","block table"),g=t.matchStyleValues("float","left right"),h=e.and(f,m,e.negate(g)),v=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),y=t.isText,b=t.isBr,x=n.nodeIndex,C=r.getNode;return d.fromRangeStart=function(e){return new d(e.startContainer,e.startOffset)},d.fromRangeEnd=function(e){return new d(e.endContainer,e.endOffset)},d.after=function(e){return new d(e.parentNode,x(e)+1)},d.before=function(e){return new d(e.parentNode,x(e))},d.isAtStart=function(e){return!!e&&e.isAtStart()},d.isAtEnd=function(e){return!!e&&e.isAtEnd()},d.isTextPosition=function(e){return!!e&&t.isText(e.container())},d}),l("tinymce.core.caret.CaretBookmark",["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(e,t,n,r,o){function i(e){var t=e.parentNode;return v(t)?i(t):t}function a(e){return e?r.reduce(e.childNodes,function(e,t){return v(t)&&"BR"!=t.nodeName?e=e.concat(a(t)):e.push(t),e},[]):[]}function c(e,t){for(;(e=e.previousSibling)&&h(e);)t+=e.data.length;return t}function l(e){return function(t){return e===t}}function s(t){var n,o,c;return n=a(i(t)),o=r.findIndex(n,l(t),t),n=n.slice(0,o+1),c=r.reduce(n,function(e,t,r){return h(t)&&h(n[r-1])&&e++,e},0),n=r.filter(n,e.matchNodeNames(t.nodeName)),(o=r.findIndex(n,l(t),t))-c}function u(e){var t;return(t=h(e)?"text()":e.nodeName.toLowerCase())+"["+s(e)+"]"}function d(e,t,n){var r=[];for(t=t.parentNode;t!=e&&(!n||!n(t));t=t.parentNode)r.push(t);return r}function f(t,o){var i,a,l=[],s,f,m;return i=o.container(),a=o.offset(),h(i)?s=c(i,a):(f=i.childNodes,a>=f.length?(s="after",a=f.length-1):s="before",i=f[a]),l.push(u(i)),m=d(t,i),m=r.filter(m,n.negate(e.isBogus)),l=l.concat(r.map(m,function(e){return u(e)})),l.reverse().join("/")+","+s}function m(t,n,o){var i=a(t);return i=r.filter(i,function(e,t){return!h(e)||!h(i[t-1])}),i=r.filter(i,e.matchNodeNames(n)),i[o]}function p(e,t){for(var n=e,r=0,i;h(n);){if(i=n.data.length,t>=r&&t<=r+i){e=n,t-=r;break}if(!h(n.nextSibling)){e=n,t=i;break}r+=i,n=n.nextSibling}return t>e.data.length&&(t=e.data.length),new o(e,t)}function g(e,t){var n,i,a;return t?(n=t.split(","),t=n[0].split("/"),a=n.length>1?n[1]:"before",i=r.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),m(e,t[1],parseInt(t[2],10))):null},e),i?h(i)?p(i,parseInt(a,10)):(a="after"===a?y(i)+1:y(i),new o(i.parentNode,a)):null):null}var h=e.isText,v=e.isBogus,y=t.nodeIndex;return{create:f,resolve:g}}),l("tinymce.core.dom.BookmarkManager",["tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,c){function l(a){var l=a.dom;this.getBookmark=function(i,d){function f(e,t){var n=0;return c.each(l.select(e),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!=t&&void n++}),n}function m(e){function t(t){var n,r,o,i=t?"start":"end";n=e[i+"Container"],r=e[i+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(o=n.childNodes,(n=o[Math.min(t?r:r-1,o.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function p(e){function t(e,t){var r=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],i=[],a,c=0;for(3===r.nodeType?i.push(d?u(r,o):o):(a=r.childNodes,o>=a.length&&a.length&&(c=1,o=Math.max(0,a.length-1)),i.push(l.nodeIndex(a[o],d)+c));r&&r!=n;r=r.parentNode)i.push(l.nodeIndex(r,d));return i}var n=l.getRoot(),r={};return r.start=t(e,!0),a.isCollapsed()||(r.end=t(e)),r}function g(e){function n(e,n){var i;if(r.isElement(e)&&(e=o.getNode(e,n),s(e)))return e;if(t.isCaretContainer(e)){if(r.isText(e)&&t.isCaretContainerBlock(e)&&(e=e.parentNode),i=e.previousSibling,s(i))return i;if(i=e.nextSibling,s(i))return i}}return n(e.startContainer,e.startOffset)||n(e.endContainer,e.endOffset)}var h,v,y,b,x,C,w="&#xFEFF;",T;if(2==i)return C=a.getNode(),x=C?C.nodeName:null,h=a.getRng(),s(C)||"IMG"==x?{name:x,index:f(x,C)}:a.tridentSel?a.tridentSel.getBookmark(i):(C=g(h),C?(x=C.tagName,{name:x,index:f(x,C)}):p(h));if(3==i)return h=a.getRng(),{start:e.create(l.getRoot(),n.fromRangeStart(h)),end:e.create(l.getRoot(),n.fromRangeEnd(h))};if(i)return{rng:a.getRng()};if(h=a.getRng(),y=l.uniqueId(),b=a.isCollapsed(),T="overflow:hidden;line-height:0px",h.duplicate||h.item){if(h.item)return C=h.item(0),x=C.nodeName,{name:x,index:f(x,C)};v=h.duplicate();try{h.collapse(),h.pasteHTML('<span data-mce-type="bookmark" id="'+y+'_start" style="'+T+'">'+w+"</span>"),b||(v.collapse(!1),h.moveToElementText(v.parentElement()),0===h.compareEndPoints("StartToEnd",v)&&v.move("character",-1),v.pasteHTML('<span data-mce-type="bookmark" id="'+y+'_end" style="'+T+'">'+w+"</span>"))}catch(e){return null}}else{if(C=a.getNode(),"IMG"==(x=C.nodeName))return{name:x,index:f(x,C)};v=m(h.cloneRange()),b||(v.collapse(!1),v.insertNode(l.create("span",{"data-mce-type":"bookmark",id:y+"_end",style:T},w))),h=m(h),h.collapse(!0),h.insertNode(l.create("span",{"data-mce-type":"bookmark",id:y+"_start",style:T},w))}return a.moveToBookmark({id:y,keep:1}),{id:y}},this.moveToBookmark=function(t){function n(e){var n=t[e?"start":"end"],r,o,i,a;if(n){for(i=n[0],o=d,r=n.length-1;r>=1;r--){if(a=o.childNodes,n[r]>a.length-1)return;o=a[n[r]]}3===o.nodeType&&(i=Math.min(n[0],o.nodeValue.length)),1===o.nodeType&&(i=Math.min(n[0],o.childNodes.length)),e?u.setStart(o,i):u.setEnd(o,i)}return!0}function r(e){var n=l.get(t.id+"_"+e),r,o,a,s,u=t.keep;if(n&&(r=n.parentNode,"start"==e?(u?(r=n.firstChild,o=1):o=l.nodeIndex(n),f=m=r,p=g=o):(u?(r=n.firstChild,o=1):o=l.nodeIndex(n),m=r,g=o),!u)){for(s=n.previousSibling,a=n.nextSibling,c.each(c.grep(n.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});n=l.get(t.id+"_"+e);)l.remove(n,1);s&&a&&s.nodeType==a.nodeType&&3==s.nodeType&&!i.opera&&(o=s.nodeValue.length,s.appendData(a.nodeValue),l.remove(a),"start"==e?(f=m=s,p=g=o):(m=s,g=o))}}function o(e){return!l.isBlock(e)||e.innerHTML||i.ie||(e.innerHTML='<br data-mce-bogus="1" />'),e}function s(){var n,r;return n=l.createRng(),r=e.resolve(l.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=e.resolve(l.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n}var u,d,f,m,p,g;if(t)if(c.isArray(t.start)){if(u=l.createRng(),d=l.getRoot(),a.tridentSel)return a.tridentSel.moveToBookmark(t);n(!0)&&n()&&a.setRng(u)}else"string"==typeof t.start?a.setRng(s(t)):t.id?(r("start"),r("end"),f&&(u=l.createRng(),u.setStart(o(f),p),u.setEnd(o(m),g),a.setRng(u))):t.name?a.select(l.select(t.name)[t.index]):t.rng&&a.setRng(t.rng)}}var s=r.isContentEditableFalse,u=function(e,t){var n,r;for(r=a.trim(e.data.slice(0,t)).length,n=e.previousSibling;n&&3===n.nodeType;n=n.previousSibling)r+=a.trim(n.data).length;return r};return l.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},l}),l("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),l("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return void 0!==e[t]&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=void 0!==n?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),l("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(void 0===r)throw e+" not available on this browser";return r}}}),l("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),l("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var t=!1,n;return function(){return t||(t=!0,n=e.apply(null,arguments)),n}}}}),d("global!Number",Number),l("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},o=function(e,n){var o=r(e,n);if(!o)return{major:0,minor:0};var i=function(e){return t(n.replace(o,"$"+e))};return c(i(1),i(2))},i=function(e,t){var r=n(t).toLowerCase();return 0===e.length?a():o(e,r)},a=function(){return c(0,0)},c=function(e,t){return{major:e,minor:t}};return{nu:c,detect:i,unknown:a}}),l("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Edge",r="Chrome",o="IE",i="Opera",a="Firefox",c="Safari",l=function(e,t){return function(){return t===e}},s=function(){return u({current:void 0,version:t.unknown()})},u=function(e){var t=e.current;return{current:t,version:e.version,isEdge:l(n,t),isChrome:l(r,t),isIE:l(o,t),isOpera:l(i,t),isFirefox:l(a,t),isSafari:l(c,t)}};return{unknown:s,nu:u,edge:e.constant(n),chrome:e.constant(r),ie:e.constant(o),opera:e.constant(i),firefox:e.constant(a),safari:e.constant(c)}}),l("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows",r="iOS",o="Android",i="Linux",a="OSX",c="Solaris",l="FreeBSD",s=function(e,t){return function(){return t===e}},u=function(){return d({current:void 0,version:t.unknown()})},d=function(e){var t=e.current;return{current:t,version:e.version,isWindows:s(n,t),isiOS:s(r,t),isAndroid:s(o,t),isOSX:s(a,t),isLinux:s(i,t),isSolaris:s(c,t),isFreeBSD:s(l,t)}};return{unknown:u,nu:d,windows:e.constant(n),ios:e.constant(r),android:e.constant(o),linux:e.constant(i),osx:e.constant(a),solaris:e.constant(c),freebsd:e.constant(l)}}),l("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,c=t.isAndroid()&&4===t.version.major,l=o||a||c&&!0===/mobile/i.test(r),s=t.isiOS()||t.isAndroid(),u=s&&!l,d=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(i),isTablet:e.constant(l),isPhone:e.constant(u),isTouch:e.constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(d)}}}),l("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),l("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),l("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e,t){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),l("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t,n){var r=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},o=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,r){var o=t[r];return n(o)?o:e})},i=function(t,n){return d(t,n)?e.removeFromStart(t,n.length):t},a=function(t,n){return f(t,n)?e.removeFromEnd(t,n.length):t},c=function(t,n){return d(t,n)?t:e.addToStart(t,n)},l=function(t,n){return f(t,n)?t:e.addToEnd(t,n)},s=function(e,t){return-1!==e.indexOf(t)},u=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},d=function(e,t){return r(e,t,0)},f=function(e,t){return r(e,t,e.length-t.length)};return{supplant:o,startsWith:d,removeLeading:i,removeTrailing:a,ensureLeading:c,ensureTrailing:l,endsWith:f,contains:s,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:u}}),l("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(i)}}),l("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,o){return{detect:function(i){var a=o.browsers(),c=o.oses(),l=r.detectBrowser(a,i).fold(e.unknown,e.nu),s=r.detectOs(c,i).fold(t.unknown,t.nu);return{browser:l,os:s,deviceType:n(s,l,i)}}}}),d("global!navigator",navigator),l("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){return{detect:e.cached(function(){var e=n.userAgent;return t.detect(e)})}}),l("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),d("global!document",document),l("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,t,n,r){var o=function(e,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return c(i.childNodes[0])},i=function(e,t){var n=t||r,o=n.createElement(e);return c(o)},a=function(e,t){var n=t||r,o=n.createTextNode(e);return c(o)},c=function(n){if(null===n||void 0===n)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:o,fromTag:i,fromText:a,fromDom:c}}),l("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),l("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,o,i){var a=0,c=1,l=2,s=3,u=function(){var e=i.createElement("span");return void 0!==e.matches?0:void 0!==e.msMatchesSelector?1:void 0!==e.webkitMatchesSelector?2:void 0!==e.mozMatchesSelector?3:-1}(),d=r.ELEMENT,f=r.DOCUMENT,m=function(e,t){var n=e.dom();if(n.nodeType!==d)return!1;if(0===u)return n.matches(t);if(1===u)return n.msMatchesSelector(t);if(2===u)return n.webkitMatchesSelector(t);if(3===u)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},p=function(e){return e.nodeType!==d&&e.nodeType!==f||0===e.childElementCount};return{all:function(t,r){var o=void 0===r?i:r.dom();return p(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:m,one:function(e,r){var o=void 0===r?i:r.dom();return p(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),l("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o){var i=function(e,t){return e.dom()===t.dom()},a=function(e,t){return e.dom().isEqualNode(t.dom())},c=function(n,r){return e.exists(r,t.curry(i,n))},l=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},s=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())},u=r.detect().browser,d=u.isIE()?s:l;return{eq:i,isEqualNode:a,member:c,contains:d,is:o.is}}),l("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(e){var t=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},n=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()};return{scrollIntoView:function(r,o,i){var a,c,l=r.dom,s=l.getRoot(),u,d,f=0;if(!n(r,o,i)&&e.isElement(o)){if(!1===i&&(f=o.offsetHeight),"BODY"!==s.nodeName){var m=r.selection.getScrollContainer();if(m)return a=t(o).y-t(m).y+f,d=m.clientHeight,u=m.scrollTop,void((a<u||a+25>u+d)&&(m.scrollTop=a<u?a:a-d+25))}c=l.getViewPort(r.getWin()),a=l.getPos(o).y+f,u=c.y,d=c.h,(a<c.y||a+25>u+d)&&r.getWin().scrollTo(0,a<u?a:a-d+25)}}}}),l("tinymce.core.dom.TridentSelection",[],function(){function e(e){function t(t,n){var r,o=0,i,a,c,l,s,u,d=-1,f;if(r=t.duplicate(),r.collapse(n),f=r.parentElement(),f.ownerDocument===e.dom.doc){for(;"false"===f.contentEditable;)f=f.parentNode;if(!f.hasChildNodes())return{node:f,inside:1};for(c=f.children,i=c.length-1;o<=i;)if(u=Math.floor((o+i)/2),l=c[u],r.moveToElementText(l),(d=r.compareEndPoints(n?"StartToStart":"EndToEnd",t))>0)i=u-1;else{if(!(d<0))return{node:l};o=u+1}if(d<0)for(l?r.collapse(!1):(r.moveToElementText(f),r.collapse(!0),l=f,a=!0),s=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&f==r.parentElement();)s++;else for(r.collapse(!0),s=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&f==r.parentElement();)s++;return{node:l,position:d,offset:s,inside:a}}}function n(){function n(e){var n=t(i,e),r,o,c=0,l,s,u;if(r=n.node,o=n.offset,n.inside&&!r.hasChildNodes())return void a[e?"setStart":"setEnd"](r,0);if(o===s)return void a[e?"setStartBefore":"setEndAfter"](r);if(n.position<0){if(!(l=n.inside?r.firstChild:r.nextSibling))return void a[e?"setStartAfter":"setEndAfter"](r);if(!o)return void(3==l.nodeType?a[e?"setStart":"setEnd"](l,0):a[e?"setStartBefore":"setEndBefore"](l));for(;l;){if(3==l.nodeType&&(u=l.nodeValue,(c+=u.length)>=o)){r=l,c-=o,c=u.length-c;break}l=l.nextSibling}}else{if(!(l=r.previousSibling))return a[e?"setStartBefore":"setEndBefore"](r);if(!o)return void(3==r.nodeType?a[e?"setStart":"setEnd"](l,r.nodeValue.length):a[e?"setStartAfter":"setEndAfter"](l));for(;l;){if(3==l.nodeType&&(c+=l.nodeValue.length)>=o){r=l,c-=o;break}l=l.previousSibling}}a[e?"setStart":"setEnd"](r,c)}var i=e.getRng(),a=o.createRng(),c,l,s,u,d;if(c=i.item?i.item(0):i.parentElement(),c.ownerDocument!=o.doc)return a;if(l=e.isCollapsed(),i.item)return a.setStart(c.parentNode,o.nodeIndex(c)),a.setEnd(a.startContainer,a.startOffset+1),a;try{n(!0),l||n()}catch(t){if(-2147024809!=t.number)throw t;d=r.getBookmark(2),s=i.duplicate(),s.collapse(!0),c=s.parentElement(),l||(s=i.duplicate(),s.collapse(!1),u=s.parentElement(),u.innerHTML=u.innerHTML),c.innerHTML=c.innerHTML,r.moveToBookmark(d),i=e.getRng(),n(!0),l||n()}return a}var r=this,o=e.dom;this.getBookmark=function(n){function r(e){var t,n,r,i,a=[];for(t=e.parentNode,n=o.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,i=r.length;i--;)if(e===r[i]){a.push(i);break}e=t,t=t.parentNode}return a}function i(e){var n;if(n=t(a,e))return{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}}var a=e.getRng(),c={};return 2===n&&(a.item?c.start={ctrl:!0,indexes:r(a.item(0))}:(c.start=i(!0),e.isCollapsed()||(c.end=i()))),c},this.moveToBookmark=function(e){function t(e){var t,n,r,i;for(t=o.getRoot(),n=e.length-1;n>=0;n--)i=t.children,(r=e[n])<=i.length-1&&(t=i[r]);return t}function n(n){var o=e[n?"start":"end"],a,c,l,s;o&&(a=o.position>0,c=i.createTextRange(),c.moveToElementText(t(o.indexes)),s=o.offset,s!==l?(c.collapse(o.inside||a),c.moveStart("character",a?-s:s)):c.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",c),n&&r.collapse(!0))}var r,i=o.doc.body;e.start&&(e.start.ctrl?(r=i.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=i.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(t){function n(e){var t,n,i,u,m;i=o.create("a"),t=e?a:l,n=e?c:s,u=r.duplicate(),t!=d&&t!=d.documentElement||(t=f,n=0),3==t.nodeType?(t.parentNode.insertBefore(i,t),u.moveToElementText(i),u.moveStart("character",n),o.remove(i),r.setEndPoint(e?"StartToStart":"EndToEnd",u)):(m=t.childNodes,m.length?(n>=m.length?o.insertAfter(i,m[m.length-1]):t.insertBefore(i,m[n]),u.moveToElementText(i)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",i=t.firstChild,u.moveToElementText(i),u.collapse(!1)),r.setEndPoint(e?"StartToStart":"EndToEnd",u),o.remove(i))}var r,i,a,c,l,s,u,d=e.dom.doc,f=d.body,m,p;if(a=t.startContainer,c=t.startOffset,l=t.endContainer,s=t.endOffset,r=f.createTextRange(),a==l&&1==a.nodeType){if(c==s&&!a.hasChildNodes()){if(a.canHaveHTML)return u=a.previousSibling,u&&!u.hasChildNodes()&&o.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,a.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(a.lastChild),r.select(),o.doc.selection.clear(),a.innerHTML="",void(u&&(u.innerHTML=""));c=o.nodeIndex(a),a=a.parentNode}if(c==s-1)try{if(p=a.childNodes[c],i=f.createControlRange(),i.addElement(p),i.select(),m=e.getRng(),m.item&&p===m.item(0))return}catch(e){}}n(!0),n(),r.select()},this.getRangeAt=n}return e}),l("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r},r=function(e){return function(t){return n(t)===e}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}}),l("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var i=new n(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var c={};return e.each(o,function(e,n){c[e]=t.constant(i[n])}),c}}}),l("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return void 0===e?n:e}(),r=function(e,t){for(var r=n(e),o=0,i=r.length;o<i;o++){var a=r[o];t(e[a],a,e)}},o=function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},i=function(e,t){var n={};return r(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n={},o={};return r(e,function(e,r){(t(e,r)?n:o)[r]=e}),{t:n,f:o}},c=function(e,t){var n=[];return r(e,function(e,r){n.push(t(e,r))}),n},l=function(t,r){for(var o=n(t),i=0,a=o.length;i<a;i++){var c=o[i],l=t[c];if(r(l,c,t))return e.some(l)}return e.none()},s=function(e){return c(e,function(e){return e})};return{bifilter:a,each:r,map:o,mapToArray:c,tupleMap:i,find:l,keys:n,values:s,size:function(e){return s(e).length}}}),l("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),l("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,o,i,a){return function(c,l){var s=c.concat(l);if(0===s.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",c),o.validateStrArr("optional",l),o.checkDupes(s),function(i){var u=n.keys(i);e.forall(c,function(t){return e.contains(u,t)})||o.reqMessage(c,u);var d=e.filter(u,function(t){return!e.contains(s,t)});d.length>0&&o.unsuppMessage(d);var f={};return e.each(c,function(e){f[e]=t.constant(i[e])}),e.each(l,function(e){f[e]=t.constant(a.prototype.hasOwnProperty.call(i,e)?r.some(i[e]):r.none())}),f}}}),l("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),l("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),l("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,o,i,a,c){var l=function(e){return c.fromDom(e.dom().ownerDocument)},s=function(e){var t=l(e);return c.fromDom(t.dom().documentElement)},u=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return c.fromDom(n)},d=function(e){var t=e.dom();return r.from(t.parentNode).map(c.fromDom)},f=function(e){return d(e).bind(function(n){var r=x(n);return t.findIndex(r,function(t){return a.eq(e,t)})})},m=function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),i=t.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode;){var l=i.parentNode,s=c.fromDom(l);if(a.push(s),!0===o(s))break;i=l}return a},p=function(e){var n=function(n){return t.filter(n,function(t){return!a.eq(e,t)})};return d(e).map(x).map(n).getOr([])},g=function(e){var t=e.dom();return r.from(t.offsetParent).map(c.fromDom)},h=function(e){var t=e.dom();return r.from(t.previousSibling).map(c.fromDom)},v=function(e){var t=e.dom();return r.from(t.nextSibling).map(c.fromDom)},y=function(e){return t.reverse(i.toArray(e,h))},b=function(e){return i.toArray(e,v)},x=function(e){var n=e.dom();return t.map(n.childNodes,c.fromDom)},C=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(c.fromDom)},w=function(e){return C(e,0)},T=function(e){return C(e,e.dom().childNodes.length-1)},k=o.immutable("element","offset");return{owner:l,defaultView:u,documentElement:s,parent:d,findIndex:f,parents:m,siblings:p,prevSibling:h,offsetParent:g,prevSiblings:y,nextSibling:v,nextSiblings:b,children:x,child:C,firstChild:w,lastChild:T,leaf:function(e,t){var n=x(e);return n.length>0&&t<n.length?k(n[t],0):k(e,t)}}}),l("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){e.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(n,r){e.nextSibling(n).fold(function(){e.parent(n).each(function(e){o(e,r)})},function(e){t(e,r)})},r=function(t,n){e.firstChild(t).fold(function(){o(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},o=function(e,t){e.dom().appendChild(t.dom())};return{before:t,after:n,prepend:r,append:o,appendAt:function(n,r,i){e.child(n,i).fold(function(){o(n,r)},function(e){t(e,r)})},wrap:function(e,n){t(e,n),o(n,e)}}}),l("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(t){return n(t)===e}},i=function(r){return n(r)===e.COMMENT||"#comment"===t(r)},a=o(e.ELEMENT),c=o(e.TEXT),l=o(e.DOCUMENT);return{name:t,type:n,value:r,isElement:a,isText:c,isDocument:l,isComment:i}}),l("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,o,i){var a=function(t,n,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(n,r+"")},c=function(e,t,n){a(e.dom(),t,n)},l=function(e,t){var r=e.dom();n.each(t,function(e,t){a(r,t,e)})},s=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},u=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},d=function(e,t){e.dom().removeAttribute(t)},f=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},m=function(e,t,n){u(e,n)&&!u(t,n)&&c(t,n,s(e,n))};return{clone:function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:c,setAll:l,get:s,has:u,remove:d,hasNone:f,transfer:function(e,n,o){r.isElement(e)&&r.isElement(n)&&t.each(o,function(t){m(e,n,t)})}}}),l("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){return{before:function(n,r){e.each(r,function(e){t.before(n,e)})},after:function(n,r){e.each(r,function(e,o){var i=0===o?n:r[o-1];t.after(i,e)})},prepend:function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})},append:function(n,r){e.each(r,function(e){t.append(n,e)})}}}),l("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t){t.dom().textContent="",e.each(n.children(t),function(e){o(e)})},o=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:r,remove:o,unwrap:function(e){var r=n.children(e);r.length>0&&t.before(e,r),o(e)}}}),l("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e,n){return t.fromDom(e.dom().cloneNode(n))},c=function(e){return a(e,!1)},l=function(e){return a(e,!0)},s=function(n,r){var o=t.fromTag(r),i=e.clone(n);return e.setAll(o,i),o};return{shallow:c,shallowAs:s,deep:l,copy:function(e,t){var n=s(e,t),o=i.children(l(e));return r.append(n,o),n},mutate:function(e,t){var a=s(e,t);n.before(e,a);var c=i.children(e);return r.append(a,c),o.remove(e),a}}}),l("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){return{fromElements:function(r,o){var i=o||n,a=i.createDocumentFragment();return e.each(r,function(e){a.appendChild(e.dom())}),t.fromDom(a)}}}),l("tinymce.core.dom.ElementType",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(e,t,n){var r=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],o=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],i=["td","th"],a=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],c=["h1","h2","h3","h4","h5","h6"],l=function(r){var o;return function(i){return o=o||e.mapToObject(r,t.constant(!0)),o.hasOwnProperty(n.name(i))}},s=l(c),u=l(r);return{isBlock:u,isInline:function(e){return n.isElement(e)&&!u(e)},isHeading:s,isTextBlock:l(a),isVoid:l(o),isTableCell:l(i)}}),l("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){return e.slice(0,-1)},o=function(e,o,i){return t.contains(o,e)?r(n.parents(e,function(e){return i(e)||t.eq(e,o)})):[]},i=function(t,n){return o(t,n,e.constant(!1))};return{parentsUntil:o,parents:i,parentsAndSelf:function(e,t){return[e].concat(i(e,t))}}}),l("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){return{cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(t,n){for(var r=0;r<t.length;r++){var o=n(t[r],r);if(o.isSome())return o}return e.none()},liftN:function(t,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return e.none();r.push(i.getOrDie())}return e.some(n.apply(null,r))}}}),l("tinymce.core.selection.SelectionUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,c,l){var s=function(e){var t=e.startContainer,r=e.startOffset;return l.isText(t)?0===r?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[r]).map(i.fromDom)},u=function(e){var t=e.endContainer,r=e.endOffset;return l.isText(t)?r===t.data.length?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[r-1]).map(i.fromDom)},d=function(e){return c.firstChild(e).fold(t.constant([e]),function(t){return[e].concat(d(t))})},f=function(e){return c.lastChild(e).fold(t.constant([e]),function(t){return"br"===a.name(t)?c.prevSibling(t).map(function(t){return[e].concat(f(t))}).getOr([]):[e].concat(f(t))})};return{hasAllContentsSelected:function(n,i){return r.liftN([s(i),u(i)],function(r,i){var a=e.find(d(n),t.curry(o.eq,r)),c=e.find(f(n),t.curry(o.eq,i));return a.isSome()&&c.isSome()}).getOr(!1)}}}),l("tinymce.core.selection.FragmentReader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.node.Node","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.selection.SelectionUtils"],function(e,t,n,r,o,i,a,c,l,s){var u=function(t){return e.find(t,function(e){return"ul"===a.name(e)||"ol"===a.name(e)})},d=function(n,r){return e.find(n,function(e){return"li"===a.name(e)&&s.hasAllContentsSelected(e,r)}).fold(t.constant([]),function(e){return u(n).map(function(e){return[o.fromTag("li"),o.fromTag(a.name(e))]}).getOr([])})},f=function(t,r){var o=e.foldl(r,function(e,t){return n.append(t,e),t},t);return r.length>0?i.fromElements([o]):o},m=function(t,n){var i=l.parentsAndSelf(o.fromDom(n.commonAncestorContainer),o.fromDom(t)),a=e.filter(i,function(e){return c.isInline(e)||c.isHeading(e)}),s=d(i,n);return e.map(a.concat(s),r.shallow)},p=function(e,t){return f(o.fromDom(t.cloneContents()),m(e,t))};return{read:function(e,t){return t.collapsed?i.fromElements([]):p(e,t)}}}),l("tinymce.core.dom.Selection",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.caret.CaretPosition","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ControlSelection","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.ScrollIntoView","tinymce.core.dom.TreeWalker","tinymce.core.dom.TridentSelection","tinymce.core.Env","tinymce.core.selection.FragmentReader","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m){function p(e,t,n,i){var a=this;a.dom=e,a.win=t,a.serializer=n,a.editor=i,a.bookmarkManager=new r(a),a.controlSelection=new o(a,i),a.win.getSelection||(a.tridentSel=new s(a))}var g=m.each,h=m.trim,v=u.ie,y=function(n){return!(!n||!n.ownerDocument)&&e.contains(t.fromDom(n.ownerDocument),t.fromDom(n))},b=function(e){return!!e&&(!!e.select||y(e.startContainer)&&y(e.endContainer))};return p.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();e?(r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)):(n._moveEndPoint(r,n.editor.getBody(),!0),n.setRng(r))},getContent:function(e){var t=this,n=t.getRng(),r=t.dom.create("body"),o=t.getSel(),i,a,c;return e=e||{},i=a="",e.get=!0,e.format=e.format||"html",e.selection=!0,t.editor.fire("BeforeGetContent",e),"text"===e.format?t.isCollapsed()?"":f.trim(n.text||(o.toString?""+o:"")):(n.cloneContents?(c=e.contextual?d.read(t.editor.getBody(),n).dom():n.cloneContents())&&r.appendChild(c):void 0!==n.item||void 0!==n.htmlText?(r.innerHTML="<br>"+(n.item?n.item(0).outerHTML:n.htmlText),r.removeChild(r.firstChild)):r.innerHTML=""+n,/^\s/.test(r.innerHTML)&&(i=" "),/\s+$/.test(r.innerHTML)&&(a=" "),e.getInner=!0,e.content=t.isCollapsed()?"":i+t.serializer.serialize(r,e)+a,t.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),o,i=n.win.document,a,c;if(t=t||{format:"html"},t.set=!0,t.selection=!0,t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content,r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==i&&r.endContainer==i?i.body.innerHTML=e:(r.deleteContents(),0===i.body.childNodes.length?i.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(a=i.createDocumentFragment(),c=i.createElement("div"),a.appendChild(c),c.outerHTML=e,r.insertNode(a))),o=n.dom.get("__caret"),r=i.createRange(),r.setStartBefore(o),r.setEndBefore(o),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(e){}}else r.item&&(i.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(e){var t=this,n=t.getRng(),r,o,i,a;if(n.duplicate||n.item){if(n.item)return n.item(0);for(i=n.duplicate(),i.collapse(1),r=i.parentElement(),r.ownerDocument!==t.dom.doc&&(r=t.dom.getRoot()),o=a=n.parentElement();a=a.parentNode;)if(a==r){r=o;break}return r}return r=n.startContainer,1==r.nodeType&&r.hasChildNodes()&&(e&&n.collapsed||(r=r.childNodes[Math.min(r.childNodes.length-1,n.startOffset)])),r&&3==r.nodeType?r.parentNode:r},getEnd:function(e){var t=this,n=t.getRng(),r,o;return n.duplicate||n.item?n.item?n.item(0):(n=n.duplicate(),n.collapse(0),r=n.parentElement(),r.ownerDocument!==t.dom.doc&&(r=t.dom.getRoot()),r&&"BODY"==r.nodeName?r.lastChild||r:r):(r=n.endContainer,o=n.endOffset,1==r.nodeType&&r.hasChildNodes()&&(e&&n.collapsed||(r=r.childNodes[o>0?o-1:o])),r&&3==r.nodeType?r.parentNode:r)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this,r=n.dom,o=r.createRng(),i;if(n.lastFocusBookmark=null,e){if(!t&&n.controlSelection.controlSelect(e))return;i=r.nodeIndex(e),o.setStart(e.parentNode,i),o.setEnd(e.parentNode,i+1),t&&(n._moveEndPoint(o,e,!0),n._moveEndPoint(o,e)),n.setRng(o)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var n=this,r,o,i,a,c,l;if(!n.win)return null;if(void 0===(a=n.win.document)||null===a)return null;if(!e&&n.lastFocusBookmark){var s=n.lastFocusBookmark;return s.startContainer?(o=a.createRange(),o.setStart(s.startContainer,s.startOffset),o.setEnd(s.endContainer,s.endOffset)):o=s,o}if(e&&n.tridentSel)return n.tridentSel.getRangeAt(0);try{(r=n.getSel())&&(o=r.rangeCount>0?r.getRangeAt(0):r.createRange?r.createRange():a.createRange())}catch(e){}if(l=n.editor.fire("GetSelectionRange",{range:o}),l.range!==o)return l.range;if(v&&o&&o.setStart&&a.selection){try{c=a.selection.createRange()}catch(e){}c&&c.item&&(i=c.item(0),o=a.createRange(),o.setStartBefore(i),o.setEndAfter(i))}return o||(o=a.createRange?a.createRange():a.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(i=n.dom.getRoot(),o.setStart(i,0),o.setEnd(i,0)),n.selectedRange&&n.explicitRange&&(0===t(o.START_TO_START,o,n.selectedRange)&&0===t(o.END_TO_END,o,n.selectedRange)?o=n.explicitRange:(n.selectedRange=null,n.explicitRange=null)),o},setRng:function(e,t){var n=this,r,o,i;if(b(e))if(e.select){n.explicitRange=null;try{e.select()}catch(e){}}else if(n.tridentSel){if(e.cloneRange)try{n.tridentSel.addRange(e)}catch(e){}}else{if(r=n.getSel(),i=n.editor.fire("SetSelectionRange",{range:e,forward:t}),e=i.range,r){n.explicitRange=e;try{r.removeAllRanges(),r.addRange(e)}catch(e){}!1===t&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),n.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!r.setBaseAndExtent||u.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(r.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),r.anchorNode===e.startContainer&&r.focusNode===e.endContainer||r.setBaseAndExtent(o,0,o,1)),n.editor.fire("AfterSetSelectionRange",{range:e,forward:t})}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),r,o,i,a,c,l=t.dom.getRoot();return n?(o=n.startContainer,i=n.endContainer,a=n.startOffset,c=n.endOffset,n.setStart?(r=n.commonAncestorContainer,!n.collapsed&&(o==i&&c-a<2&&o.hasChildNodes()&&(r=o.childNodes[a]),3===o.nodeType&&3===i.nodeType&&(o=o.length===a?e(o.nextSibling,!0):o.parentNode,i=0===c?e(i.previousSibling,!1):i.parentNode,o&&o===i))?o:r&&3==r.nodeType?r.parentNode:r):(r=n.item?n.item(0):n.parentElement(),r.ownerDocument!==t.win.document&&(r=l),r)):l},getSelectedBlocks:function(e,t){var n=this,r=n.dom,o,i,a=[];if(i=r.getRoot(),e=r.getParent(e||n.getStart(),r.isBlock),t=r.getParent(t||n.getEnd(),r.isBlock),e&&e!=i&&a.push(e),e&&t&&e!=t){o=e;for(var c=new l(e,i);(o=c.next())&&o!=t;)r.isBlock(o)&&a.push(o)}return t&&e!=t&&t!=i&&a.push(t),a},isForward:function(){var e=this.dom,t=this.getSel(),n,r;return!(t&&t.anchorNode&&t.focusNode)||(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),r=e.createRng(),r.setStart(t.focusNode,t.focusOffset),r.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,r)<=0)},normalize:function(){var e=this,t=e.getRng();return u.range&&new a(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n=this,r;return n.selectorChangedData||(n.selectorChangedData={},r={},n.editor.on("NodeChange",function(e){var t=e.element,o=n.dom,i=o.getParents(t,null,o.getRoot()),a={};g(n.selectorChangedData,function(e,t){g(i,function(n){if(o.is(n,t))return r[t]||(g(e,function(e){e(!0,{node:n,selector:t,parents:i})}),r[t]=e),a[t]=e,!1})}),g(r,function(e,n){a[n]||(delete r[n],g(e,function(e){e(!1,{node:t,selector:n,parents:i})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){c.scrollIntoView(this.editor,e,t)},placeCaretAt:function(e,t){this.setRng(a.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(e,t,n){var r=t,o=new l(t,r),i=this.dom.schema.getNonEmptyElements();do{if(3==t.nodeType&&0!==h(t.nodeValue).length)return void(n?e.setStart(t,0):e.setEnd(t,t.nodeValue.length));if(i[t.nodeName]&&!/^(TD|TH)$/.test(t.nodeName))return void(n?e.setStartBefore(t):"BR"==t.nodeName?e.setEndBefore(t):e.setEndAfter(t));if(u.ie&&u.ie<11&&this.dom.isBlock(t)&&this.dom.isEmpty(t))return void(n?e.setStart(t,0):e.setEnd(t,0))}while(t=n?o.next():o.prev());"BODY"==r.nodeName&&(n?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},getBoundingClientRect:function(){var e=this.getRng();return e.collapsed?n.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},p}),l("tinymce.core.dom.ElementUtils",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools"],function(e,t){function n(t){this.compare=function(n,o){function i(e){var n={};return r(t.getAttribs(e),function(r){var o=r.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(n[o]=t.getAttrib(e,o))}),n}function a(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!=n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0}return n.nodeName==o.nodeName&&(!!a(i(n),i(o))&&(!!a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(o,"style")))&&(!e.isBookmarkNode(n)&&!e.isBookmarkNode(o))))}}var r=t.each;return n}),l("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(e,t,n){function r(e,r){function o(e,t){t.classes.length&&s.addClass(e,t.classes.join(" ")),s.setAttribs(e,t.attrs)}function i(e){var t;return u="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=s.create(u.name),o(t,u),t}function a(e,n){var r="string"!=typeof e?e.nodeName.toLowerCase():e,o=f.getElementRule(r),i=o&&o.parentsRequired;return!(!i||!i.length)&&(n&&-1!==t.inArray(i,n)?n:i[0])}function c(e,n,r){var o,l,u,d=n.length>0&&n[0],f=d&&d.name;if(u=a(e,f))f==u?(l=n[0],n=n.slice(1)):l=u;else if(d)l=n[0],n=n.slice(1);else if(!r)return e;return l&&(o=i(l),o.appendChild(e)),r&&(o||(o=s.create("div"),o.appendChild(e)),t.each(r,function(t){var n=i(t);o.insertBefore(n,e)})),c(o,n,l&&l.siblings)}var l,u,d,f=r&&r.schema||new n({});return e&&e.length?(u=e[0],l=i(u),d=s.create("div"),d.appendChild(c(l,e.slice(1),u.siblings)),d):""}function o(e,t){return r(a(e),t)}function i(e){var n,r={classes:[],attrs:{}};return e=r.selector=t.trim(e),"*"!==e&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,o,i,a){switch(n){case"#":r.attrs.id=o;break;case".":r.classes.push(o);break;case":":-1!==t.inArray("checked disabled enabled read-only required".split(" "),o)&&(r.attrs[o]=o)}if("["==i){var c=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);c&&(r.attrs[c[1]]=c[2])}return""})),r.name=n||"div",r}function a(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),i),r=n.pop();return n.length&&(r.siblings=n),r}).reverse()):[]}function c(e,t){function n(e){return e.replace(/%(\w+)/g,"")}var o,i,c,u,d="",f,m;if(!1===(m=e.settings.preview_styles))return"";if("string"!=typeof m&&(m="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(m=t.preview)?"":(o=t.block||t.inline||"span",u=a(t.selector),u.length?(u[0].name||(u[0].name=o),o=t.selector,i=r(u,e)):i=r([o],e),c=s.select(o,i)[0]||i.firstChild,l(t.styles,function(e,t){(e=n(e))&&s.setStyle(c,t,e)}),l(t.attributes,function(e,t){(e=n(e))&&s.setAttrib(c,t,e)}),l(t.classes,function(e){e=n(e),s.hasClass(c,e)||s.addClass(c,e)}),e.fire("PreviewFormats"),s.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),f=s.getStyle(e.getBody(),"fontSize",!0),f=/px$/.test(f)?parseInt(f,10):0,l(m.split(" "),function(t){var n=s.getStyle(c,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=s.getStyle(e.getBody(),t,!0),"#ffffff"==s.toHex(n).toLowerCase())||"color"==t&&"#000000"==s.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===f)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*f+"px"}"border"==t&&n&&(d+="padding:0 2px;"),d+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),s.remove(i),d)}var l=t.each,s=e.DOM;return{getCssText:c,parseSelector:a,selectorToHtml:o}}),l("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(e,t,n){function r(e,t){var n=i[e];n||(i[e]=n=[]),i[e].push(t)}function o(e,t){c(i[e],function(e){e(t)})}var i={},a=e.filter,c=e.each;return r("pre",function(r){function o(t){return s(t.previousSibling)&&-1!=e.indexOf(u,t.previousSibling)}function i(e,t){n(t).remove(),n(e).append("<br><br>").append(t.childNodes)}var l=r.selection.getRng(),s,u;s=t.matchNodeNames("pre"),l.collapsed||(u=r.selection.getSelectedBlocks(),c(a(a(u,s),o),function(e){i(e.previousSibling,e)}))}),{postProcess:o}}),l("tinymce.core.Formatter",["tinymce.core.dom.TreeWalker","tinymce.core.dom.RangeUtils","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun","tinymce.core.util.Tools","tinymce.core.fmt.Preview","tinymce.core.fmt.Hooks"],function(e,t,n,r,o,i,a,c,l){return function(s){function u(e){return e.nodeType&&(e=e.nodeName),!!s.schema.getTextBlockElements()[e.toLowerCase()]}function d(e){return/^(TH|TD)$/.test(e.nodeName)}function f(e){return e&&/^(IMG)$/.test(e.nodeName)}function m(e,t){return Z.getParents(e,t,Z.getRoot())}function p(e){return 1===e.nodeType&&"_mce_caret"===e.id}function g(){y({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){he(n,function(t,n){Z.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),he("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){y(e,{block:e,remove:"all"})}),y(s.settings.formats)}function h(){s.addShortcut("meta+b","bold_desc","Bold"),s.addShortcut("meta+i","italic_desc","Italic"),s.addShortcut("meta+u","underline_desc","Underline");for(var e=1;e<=6;e++)s.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);s.addShortcut("access+7","",["FormatBlock",!1,"p"]),s.addShortcut("access+8","",["FormatBlock",!1,"div"]),s.addShortcut("access+9","",["FormatBlock",!1,"address"])}function v(e){return e?Q[e]:Q}function y(e,t){e&&("string"!=typeof e?he(e,function(e,t){y(t,e)}):(t=t.length?t:[t],he(t,function(e){e.deep===de&&(e.deep=!e.selector),e.split===de&&(e.split=!e.selector||e.inline),e.remove===de&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),Q[e]=t))}function b(e){return e&&Q[e]&&delete Q[e],Q}function x(e,t){var n=v(t);if(n)for(var r=0;r<n.length;r++)if(!1===n[r].inherit&&Z.is(e,n[r].selector))return!0;return!1}function C(e){var t;return s.dom.getParent(e,function(e){return(t=s.dom.getStyle(e,"text-decoration"))&&"none"!==t}),t}function w(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=C(e.parentNode),s.dom.getStyle(e,"color")&&t?s.dom.setStyle(e,"text-decoration",t):s.dom.getStyle(e,"text-decoration")===t&&s.dom.setStyle(e,"text-decoration",null))}function T(t,n,r){function o(e,t){if(t=t||f,e){if(t.onformat&&t.onformat(e,t,n,r),he(t.styles,function(t,r){Z.setStyle(e,r,U(t,n))}),t.styles){var o=Z.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}he(t.attributes,function(t,r){Z.setAttrib(e,r,U(t,n))}),he(t.classes,function(t){t=U(t,n),Z.hasClass(e,t)||Z.addClass(e,t)})}}function i(e,t){var n=!1;return!!f.selector&&(he(e,function(e){if(!("collapsed"in e&&e.collapsed!==h))return Z.is(t,e.selector)&&!p(t)?(o(t,e),n=!0,!1):void 0}),n)}function a(){function t(t,n){var o=new e(n);for(r=o.prev2();r;r=o.prev2()){if(3==r.nodeType&&r.data.length>0)return r;if(r.childNodes.length>1||r==t||"BR"==r.tagName)return r}}var n=s.selection.getRng(),o=n.startContainer,i=n.endContainer;if(o!=i&&0===n.endOffset){var a=t(o,i),c=3==a.nodeType?a.data.length:a.childNodes.length;n.setEnd(a,c)}return n}function c(e,r,a){var c=[],l,s,m=!0;l=f.inline||f.block,s=Z.create(l),o(s),te.walk(e,function(e){function r(e){var h,v,y,b;if(b=m,h=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&fe(e)&&(b=m,m="true"===fe(e),y=!0),D(h,"br"))return g=0,void(f.block&&Z.remove(e));if(f.wrapper&&S(e,t,n))return void(g=0);if(m&&!y&&f.block&&!f.wrapper&&u(h)&&ne(v,l))return e=Z.rename(e,l),o(e),c.push(e),void(g=0);if(f.selector){var x=i(d,e);if(!f.inline||x)return void(g=0)}!m||y||!ne(l,h)||!ne(v,l)||!a&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||p(e)||f.inline&&re(e)?(g=0,he(ve(e.childNodes),r),y&&(m=b),g=0):(g||(g=Z.clone(s,le),e.parentNode.insertBefore(g,e),c.push(g)),g.appendChild(e))}var g;he(e,r)}),!0===f.links&&he(c,function(e){function t(e){"A"===e.nodeName&&o(e,f),he(ve(e.childNodes),t)}t(e)}),he(c,function(e){function r(e){var t=0;return he(e.childNodes,function(e){z(e)||ge(e)||t++}),t}function i(e){var t=!1;return he(e.childNodes,function(e){if(I(e))return t=e,!1}),t}function a(e,t){do{if(1!==r(e))break;if(!(e=i(e)))break;if(t(e))return e}while(e);return null}function l(e){var t,n;return t=i(e),t&&!ge(t)&&P(t,f)&&(n=Z.clone(t,le),o(n),Z.replace(n,e,se),Z.remove(t,1)),n||e}var s;if(s=r(e),(c.length>1||!re(e))&&0===s)return void Z.remove(e,1);if(f.inline||f.wrapper){if(f.exact||1!==s||(e=l(e)),he(d,function(t){he(Z.select(t.inline,e),function(e){I(e)&&q(t,n,e,t.exact?e:null)}),be(t,e)}),S(e.parentNode,t,n)&&q(f,n,e)&&(e=0),f.merge_with_parents&&Z.getParent(e.parentNode,function(r){if(S(r,t,n))return q(f,n,e)&&(e=0),se}),e&&!re(e)&&!F(e,"fontSize")){var u=a(e,O("fontSize"));u&&T("fontsize",{value:F(u,"fontSize")},e)}e&&!1!==f.merge_siblings&&(e=Y(K(e),e),e=Y(e,K(e,se)))}})}var d=v(t),f=d[0],m,g,h=!r&&ee.isCollapsed();if("false"!==fe(ee.getNode())){if(f){if(r)r.nodeType?i(d,r)||(g=Z.createRng(),g.setStartBefore(r),g.setEndAfter(r),c(V(g,d),null,!0)):c(r,null,!0);else if(h&&f.inline&&!Z.select("td[data-mce-selected],th[data-mce-selected]").length)G("apply",t,n);else{var y=s.selection.getNode();oe||!d[0].defaultBlock||Z.getParent(y,Z.isBlock)||T(d[0].defaultBlock),s.selection.setRng(a()),m=ee.getBookmark(),c(V(ee.getRng(se),d),m),f.styles&&((f.styles.color||f.styles.textDecoration)&&(ye(y,w,"childNodes"),w(y)),f.styles.backgroundColor&&M(y,O("fontSize"),L("backgroundColor",U(f.styles.backgroundColor,n)))),ee.moveToBookmark(m),J(ee.getRng(se)),s.nodeChanged()}l.postProcess(t,s)}}else{r=ee.getNode();for(var b=0,x=d.length;b<x;b++)if(d[b].ceFalseOverride&&Z.is(r,d[b].selector))return void o(r,d[b])}}function k(e,t,n,r){function o(e){var n,r,i,a,c;if(1===e.nodeType&&fe(e)&&(a=y,y="true"===fe(e),c=!0),n=ve(e.childNodes),y&&!c)for(r=0,i=f.length;r<i&&!q(f[r],t,e,e);r++);if(p.deep&&n.length){for(r=0,i=n.length;r<i;r++)o(n[r]);c&&(y=a)}}function i(n){var o;return he(m(n.parentNode).reverse(),function(n){var i;o||"_start"==n.id||"_end"==n.id||(i=S(n,e,t,r))&&!1!==i.split&&(o=n)}),o}function a(e,n,r,o){var i,a,c,l,s,u;if(e){for(u=e.parentNode,i=n.parentNode;i&&i!=u;i=i.parentNode){for(a=Z.clone(i,le),s=0;s<f.length;s++)if(q(f[s],t,a,a)){a=0;break}a&&(c&&a.appendChild(c),l||(l=a),c=a)}!o||p.mixed&&re(e)||(n=Z.split(e,n)),c&&(r.parentNode.insertBefore(c,r),l.appendChild(r))}return n}function c(e){return a(i(e),e,e,!0)}function l(e){var t=Z.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return ge(n)&&(n=n[e?"firstChild":"lastChild"]),3==n.nodeType&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),Z.remove(t,!0),n}function u(e){var t,n,r=e.commonAncestorContainer;if(e=V(e,f,se),p.split){if(t=X(e,se),n=X(e),t!=n){if(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&d(n)&&n.firstChild&&(n=n.firstChild||n),Z.isChildOf(t,n)&&!re(n)&&!d(t)&&!d(n))return t=W(t,"span",{id:"_start","data-mce-type":"bookmark"}),c(t),void(t=l(se));t=W(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=W(n,"span",{id:"_end","data-mce-type":"bookmark"}),c(t),c(n),t=l(se),n=l()}else t=n=c(t);e.startContainer=t.parentNode?t.parentNode:t,e.startOffset=ie(t),e.endContainer=n.parentNode?n.parentNode:n,e.endOffset=ie(n)+1}te.walk(e,function(e){he(e,function(e){o(e),1===e.nodeType&&"underline"===s.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===C(e.parentNode)&&q({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var f=v(e),p=f[0],g,h,y=!0;if(n)return void(n.nodeType?(h=Z.createRng(),h.setStartBefore(n),h.setEndAfter(n),u(h)):u(n));if("false"!==fe(ee.getNode()))ee.isCollapsed()&&p.inline&&!Z.select("td[data-mce-selected],th[data-mce-selected]").length?G("remove",e,t,r):(g=ee.getBookmark(),u(ee.getRng(se)),ee.moveToBookmark(g),p.inline&&N(e,t,ee.getStart())&&J(ee.getRng(!0)),s.nodeChanged());else{n=ee.getNode();for(var b=0,x=f.length;b<x&&(!f[b].ceFalseOverride||!q(f[b],t,n,n));b++);}}function E(e,t,n){var r=v(e);!N(e,t,n)||"toggle"in r[0]&&!r[0].toggle?T(e,t,n):k(e,t,n)}function S(e,t,n,r){function o(e,t,o){var i,a,c=t[o],l;if(t.onmatch)return t.onmatch(e,t,o);if(c)if(c.length===de){for(i in c)if(c.hasOwnProperty(i)){if(a="attributes"===o?Z.getAttrib(e,i):F(e,i),r&&!a&&!t.exact)return;if((!r||t.exact)&&!D(a,H(U(c[i],n),i)))return}}else for(l=0;l<c.length;l++)if("attributes"===o?Z.getAttrib(e,c[l]):F(e,c[l]))return t;return t}var i=v(t),a,c,l;if(i&&e)for(c=0;c<i.length;c++)if(a=i[c],P(e,a)&&o(e,a,"attributes")&&o(e,a,"styles")){if(l=a.classes)for(c=0;c<l.length;c++)if(!Z.hasClass(e,l[c]))return;return a}}function N(e,t,n){function r(n){var r=Z.getRoot();return n!==r&&(n=Z.getParent(n,function(n){return!!x(n,e)||(n.parentNode===r||!!S(n,e,t,!0))}),S(n,e,t))}var o;return n?r(n):(n=ee.getNode(),r(n)?se:(o=ee.getStart(),o!=n&&r(o)?se:le))}function R(e,t){var n,r=[],o={};return n=ee.getStart(),Z.getParent(n,function(n){var i,a;for(i=0;i<e.length;i++)a=e[i],!o[a]&&S(n,a,t)&&(o[a]=!0,r.push(a))},Z.getRoot()),r}function A(e){var t=v(e),n,r,o,i,a;if(t)for(n=ee.getStart(),r=m(n),i=t.length-1;i>=0;i--){if(!(a=t[i].selector)||t[i].defaultBlock)return se;for(o=r.length-1;o>=0;o--)if(Z.is(r[o],a))return se}return le}function _(e,t,n){var r;return ue||(ue={},r={},s.on("NodeChange",function(e){var t=m(e.element),n={};t=a.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),he(ue,function(e,o){he(t,function(i){return S(i,o,{},e.similar)?(r[o]||(he(e,function(e){e(!0,{node:i,format:o,parents:t})}),r[o]=e),n[o]=e,!1):!x(i,o)&&void 0})}),he(r,function(o,i){n[i]||(delete r[i],he(o,function(n){n(!1,{node:e.element,format:i,parents:t})}))})})),he(e.split(","),function(e){ue[e]||(ue[e]=[],ue[e].similar=n),ue[e].push(t)}),this}function B(e){return c.getCssText(s,e)}function P(e,t){return D(e,t.inline)?se:D(e,t.block)?se:t.selector?1==e.nodeType&&Z.is(e,t.selector):void 0}function D(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function M(e,t,n){he(e.childNodes,function(e){I(e)&&(t(e)&&n(e),e.hasChildNodes()&&M(e,t,n))})}function I(e){return e&&1===e.nodeType&&!ge(e)&&!p(e)&&!o.isBogus(e)}function O(e){return i.curry(function(e,t){return!(!t||!F(t,e))},e)}function L(e,t){return i.curry(function(e,t,n){Z.setStyle(n,e,t)},e,t)}function F(e,t){return H(Z.getStyle(e,t),t)}function H(e,t){return"color"!=t&&"backgroundColor"!=t||(e=Z.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function U(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function z(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function W(e,t,n){var r=Z.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function V(t,n,r){function o(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var r,o,i,a,c;if(r=o=e?h:y,a=e?"previousSibling":"nextSibling",c=Z.getRoot(),3==r.nodeType&&!z(r)&&(e?v>0:b<r.nodeValue.length))return r;for(;;){if(!n[0].block_expand&&re(o))return o;for(i=o[a];i;i=i[a])if(!ge(i)&&!z(i)&&!t(i))return o;if(o==c||o.parentNode==c){r=o;break}o=o.parentNode}return r}function i(e,t){for(t===de&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function a(e){for(var t=e;t;){if(1===t.nodeType&&fe(t))return"false"===fe(t)?t:e;t=t.parentNode}return e}function c(t,n,o){function i(e,t){var n,i,a=e.nodeValue;return void 0===t&&(t=o?a.length:0),o?(n=a.lastIndexOf(" ",t),i=a.lastIndexOf("\xa0",t),-1===(n=n>i?n:i)||r||n++):(n=a.indexOf(" ",t),i=a.indexOf("\xa0",t),n=-1!==n&&(-1===i||n<i)?n:i),n}var a,c,l,u;if(3===t.nodeType){if(-1!==(l=i(t,n)))return{container:t,offset:l};u=t}for(a=new e(t,Z.getParent(t,re)||s.getBody());c=a[o?"prev":"next"]();)if(3===c.nodeType){if(u=c,-1!==(l=i(c)))return{container:c,offset:l}}else if(re(c))break;if(u)return n=o?0:u.length,{container:u,offset:n}}function l(e,r){var o,i,a,c;for(3==e.nodeType&&0===e.nodeValue.length&&e[r]&&(e=e[r]),o=m(e),i=0;i<o.length;i++)for(a=0;a<n.length;a++)if(!("collapsed"in(c=n[a])&&c.collapsed!==t.collapsed)&&Z.is(o[i],c.selector))return o[i];return e}function d(e,t){var r,o=Z.getRoot();if(n[0].wrapper||(r=Z.getParent(e,n[0].block,o)),r||(r=Z.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=o&&u(e)})),r&&n[0].wrapper&&(r=m(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!re(r[t])&&(r=r[t],!D(r,"br")););return r||e}var f,p,g,h=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==h.nodeType&&h.hasChildNodes()&&(f=h.childNodes.length-1,h=h.childNodes[v>f?f:v],3==h.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(f=y.childNodes.length-1,y=y.childNodes[b>f?f:b-1],3==y.nodeType&&(b=y.nodeValue.length)),h=a(h),y=a(y),(ge(h.parentNode)||ge(h))&&(h=ge(h)?h:h.parentNode,h=h.nextSibling||h,3==h.nodeType&&(v=0)),(ge(y.parentNode)||ge(y))&&(y=ge(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(g=c(h,v,!0),g&&(h=g.container,v=g.offset),(g=c(y,b))&&(y=g.container,b=g.offset)),p=i(y,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=i(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(y=p.node,y.splitText(p.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==h.nodeType&&0!==v||(h=o(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=o())),n[0].selector&&n[0].expand!==le&&!n[0].inline&&(h=l(h,"previousSibling"),y=l(y,"nextSibling")),(n[0].block||n[0].selector)&&(h=d(h,"previousSibling"),y=d(y,"nextSibling"),n[0].block&&(re(h)||(h=o(!0)),re(y)||(y=o()))),1==h.nodeType&&(v=ie(h),h=h.parentNode),1==y.nodeType&&(b=ie(y)+1,y=y.parentNode),{startContainer:h,startOffset:v,endContainer:y,endOffset:b}}function j(e,t){return t.links&&"A"==e.tagName}function q(e,t,n,r){var o,i,a;if(!P(n,e)&&!j(n,e))return le;if("all"!=e.remove)for(he(e.styles,function(o,i){o=H(U(o,t),i),"number"==typeof i&&(i=o,r=0),(e.remove_similar||!r||D(F(r,i),o))&&Z.setStyle(n,i,""),a=1}),a&&""===Z.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),he(e.attributes,function(e,o){var i;if(e=U(e,t),"number"==typeof o&&(o=e,r=0),!r||D(Z.getAttrib(r,o),e)){if("class"==o&&(e=Z.getAttrib(n,o))&&(i="",he(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)}),i))return void Z.setAttrib(n,o,i);"class"==o&&n.removeAttribute("className"),ce.test(o)&&n.removeAttribute("data-mce-"+o),n.removeAttribute(o)}}),he(e.classes,function(e){e=U(e,t),r&&!Z.hasClass(r,e)||Z.removeClass(n,e)}),i=Z.getAttribs(n),o=0;o<i.length;o++){var c=i[o].nodeName;if(0!==c.indexOf("_")&&0!==c.indexOf("data-"))return le}return"none"!=e.remove?($(n,e),se):void 0}function $(e,t){function n(e,t,n){return!(e=K(e,t,n))||"BR"==e.nodeName||re(e)}var r=e.parentNode,o;t.block&&(oe?r==Z.getRoot()&&(t.list_block&&D(e,t.list_block)||he(ve(e.childNodes),function(e){ne(oe,e.nodeName.toLowerCase())?o?o.appendChild(e):(o=W(e,oe),Z.setAttribs(o,s.settings.forced_root_block_attrs)):o=0})):re(e)&&!re(r)&&(n(e,le)||n(e.firstChild,se,1)||e.insertBefore(Z.create("br"),e.firstChild),n(e,se)||n(e.lastChild,le,1)||e.appendChild(Z.create("br")))),t.selector&&t.inline&&!D(t.inline,e)||Z.remove(e,1)}function K(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!z(e))return e}function Y(e,t){function n(e,t){for(o=e;o;o=o[t]){if(3==o.nodeType&&0!==o.nodeValue.length)return e;if(1==o.nodeType&&!ge(o))return o}return e}var o,i,a=new r(Z);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(o=e.nextSibling;o&&o!=t;)i=o,o=o.nextSibling,e.appendChild(i);return Z.remove(t),he(ve(t.childNodes),function(t){e.appendChild(t)}),e}return t}function X(t,n){var r,o,i;return r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1==r.nodeType&&(i=r.childNodes.length-1,!n&&o&&o--,r=r.childNodes[o>i?i:o]),3===r.nodeType&&n&&o>=r.nodeValue.length&&(r=new e(r,s.getBody()).next()||r),3!==r.nodeType||n||0!==o||(r=new e(r,s.getBody()).prev()||r),r}function G(t,n,r,o){function i(e){var t=Z.create("span",{id:g,"data-mce-bogus":!0,style:h?"color:red":""});return e&&t.appendChild(s.getDoc().createTextNode(ae)),t}function a(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==ae||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function c(e){for(;e;){if(e.id===g)return e;e=e.parentNode}}function l(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function d(e,t){var n,r;if(e)r=ee.getRng(!0),a(e)?(!1!==t&&(r.setStartBefore(e),r.setEndBefore(e)),Z.remove(e)):(n=l(e),n.nodeValue.charAt(0)===ae&&(n.deleteData(0,1),r.startContainer==n&&r.startOffset>0&&r.setStart(n,r.startOffset-1),r.endContainer==n&&r.endOffset>0&&r.setEnd(n,r.endOffset-1)),Z.remove(e,1)),ee.setRng(r);else if(!(e=c(ee.getStart())))for(;e=Z.get(g);)d(e,!1)}function f(){var e,t,o,a,s,u,d;e=ee.getRng(!0),a=e.startOffset,u=e.startContainer,d=u.nodeValue,(t=c(ee.getStart()))&&(o=l(t));var f=/[^\s\u00a0\u00ad\u200b\ufeff]/;d&&a>0&&a<d.length&&f.test(d.charAt(a))&&f.test(d.charAt(a-1))?(s=ee.getBookmark(),e.collapse(!0),e=V(e,v(n)),e=te.split(e),T(n,r,e),ee.moveToBookmark(s)):(t&&o.nodeValue===ae?T(n,r,t):(t=i(!0),o=t.firstChild,e.insertNode(t),a=1,T(n,r,t)),ee.setCursorLocation(o,a))}function m(){var e=ee.getRng(!0),t,a,c,l,s,d,f=[],m,p;for(t=e.startContainer,a=e.startOffset,s=t,3==t.nodeType&&(a!=t.nodeValue.length&&(l=!0),s=s.parentNode);s;){if(S(s,n,r,o)){d=s;break}s.nextSibling&&(l=!0),f.push(s),s=s.parentNode}if(d)if(l)c=ee.getBookmark(),e.collapse(!0),e=V(e,v(n),!0),e=te.split(e),k(n,r,e),ee.moveToBookmark(c);else{for(p=i(),s=p,m=f.length-1;m>=0;m--)s.appendChild(Z.clone(f[m],!1)),s=s.firstChild;s.appendChild(Z.doc.createTextNode(ae)),s=s.firstChild;var g=Z.getParent(d,u);g&&Z.isEmpty(g)?d.parentNode.replaceChild(p,d):Z.insertAfter(p,d),ee.setCursorLocation(s,1),Z.isEmpty(d)&&Z.remove(d)}}function p(){var e;(e=c(ee.getStart()))&&!Z.isEmpty(e)&&ye(e,function(e){1!=e.nodeType||e.id===g||Z.isEmpty(e)||Z.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var g="_mce_caret",h=s.settings.caret_debug;s._hasCaretEvents||(pe=function(){var e=[],t;if(a(c(ee.getStart()),e))for(t=e.length;t--;)Z.setAttrib(e[t],"data-mce-bogus","1")},me=function(e){var t=e.keyCode;d(),8==t&&ee.isCollapsed()&&ee.getStart().innerHTML==ae&&d(c(ee.getStart())),37!=t&&39!=t||d(c(ee.getStart())),p()},s.on("SetContent",function(e){e.selection&&p()}),s._hasCaretEvents=!0),"apply"==t?f():m()}function J(t){var n=t.startContainer,r=t.startOffset,o,i,a;if((t.startContainer!=t.endContainer||!f(t.startContainer.childNodes[t.startOffset]))&&(3==n.nodeType&&r>=n.nodeValue.length&&(r=ie(n),n=n.parentNode),1==n.nodeType))for(a=n.childNodes,r<a.length?(n=a[r],o=new e(n,Z.getParent(n,Z.isBlock))):(n=a[a.length-1],o=new e(n,Z.getParent(n,Z.isBlock)),o.next(!0)),i=o.current();i;i=o.next())if(3==i.nodeType&&!z(i))return t.setStart(i,0),void ee.setRng(t)}var Q={},Z=s.dom,ee=s.selection,te=new t(Z),ne=s.schema.isValidChild,re=Z.isBlock,oe=s.settings.forced_root_block,ie=Z.nodeIndex,ae="\ufeff",ce=/^(src|href|style)$/,le=!1,se=!0,ue,de,fe=Z.getContentEditable,me,pe,ge=n.isBookmarkNode,he=a.each,ve=a.grep,ye=a.walk,be=function(e,t){e.clear_child_styles&&he(Z.select("*",t),function(t){he(e.styles,function(e,n){Z.setStyle(t,n,"")})})};(0,a.extend)(this,{get:v,register:y,unregister:b,apply:T,remove:k,toggle:E,match:N,matchAll:R,matchNode:S,canApply:A,formatChanged:_,getCssText:B}),g(),h(),s.on("BeforeGetContent",function(e){pe&&"raw"!=e.format&&pe()}),s.on("mouseup keydown",function(e){me&&me(e)})}}),l("tinymce.core.undo.Diff",[],function(){var e=0,t=1,n=2;return{KEEP:0,DELETE:2,INSERT:1,diff:function(e,t){var n=e.length+t.length+2,r=Array(n),o=Array(n),i=function(e,t,n){return{start:e,end:t,diag:n}},a=function(n,r,o,i,c){var s=l(n,r,o,i);if(null===s||s.start===r&&s.diag===r-i||s.end===n&&s.diag===n-o)for(var u=n,d=o;u<r||d<i;)u<r&&d<i&&e[u]===t[d]?(c.push([0,e[u]]),++u,++d):r-n>i-o?(c.push([2,e[u]]),++u):(c.push([1,t[d]]),++d);else{a(n,s.start,o,s.start-s.diag,c);for(var f=s.start;f<s.end;++f)c.push([0,e[f]]);a(s.end,r,s.end-s.diag,i,c)}},c=function(n,r,o,a){for(var c=n;c-r<a&&c<o&&e[c]===t[c-r];)++c;return i(n,c,r)},l=function(n,i,a,l){var s=i-n,u=l-a;if(0===s||0===u)return null;var d=s-u,f=u+s,m=(f%2==0?f:f+1)/2;r[1+m]=n,o[1+m]=i+1;for(var p=0;p<=m;++p){for(var g=-p;g<=p;g+=2){var h=g+m;g===-p||g!=p&&r[h-1]<r[h+1]?r[h]=r[h+1]:r[h]=r[h-1]+1;for(var v=r[h],y=v-n+a-g;v<i&&y<l&&e[v]===t[y];)r[h]=++v,++y;if(d%2!=0&&d-p<=g&&g<=d+p&&o[h-d]<=r[h])return c(o[h-d],g+n-a,i,l)}for(g=d-p;g<=d+p;g+=2){for(h=g+m-d,g===d-p||g!=d+p&&o[h+1]<=o[h-1]?o[h]=o[h+1]-1:o[h]=o[h-1],v=o[h]-1,y=v-n+a-g;v>=n&&y>=a&&e[v]===t[y];)o[h]=v--,y--;if(d%2==0&&-p<=g&&g<=p&&o[h]<=r[h+d])return c(o[h],g+n-a,i,l)}}},s=[];return a(0,e.length,0,t.length,s),s}}}),l("tinymce.core.undo.Fragments",["tinymce.core.util.Arr","tinymce.core.html.Entities","tinymce.core.undo.Diff"],function(e,t,n){var r=function(e){return 1===e.nodeType?e.outerHTML:3===e.nodeType?t.encodeRaw(e.data,!1):8===e.nodeType?"\x3c!--"+e.data+"--\x3e":""},o=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},i=function(e,t,n){var r=o(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)},a=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},c=function(t,r){var o=0;e.each(t,function(e){e[0]===n.KEEP?o++:e[0]===n.INSERT?(i(r,e[1],o),o++):e[0]===n.DELETE&&a(r,o)})};return{read:function(t){return e.filter(e.map(t.childNodes,r),function(e){return e.length>0})},write:function(t,o){var i=e.map(o.childNodes,r);return c(n.diff(i,t),o),o}}}),l("tinymce.core.undo.Levels",["tinymce.core.util.Arr","tinymce.core.undo.Fragments"],function(e,t){var n=function(e){return-1!==e.indexOf("</iframe>")},r=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},o=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},i=function(i){var a,c,l;return a=t.read(i.getBody()),l=e.map(a,function(e){return i.serializer.trimContent(e)}),c=l.join(""),n(c)?r(l):o(c)},a=function(e,n,r){"fragmented"===n.type?t.write(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw"}),e.selection.moveToBookmark(r?n.beforeBookmark:n.bookmark)},c=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content};return{createFragmentedLevel:r,createCompleteLevel:o,createFromEditor:i,applyToEditor:a,isEq:function(e,t){return c(e)===c(t)}}}),l("tinymce.core.UndoManager",["tinymce.core.util.VK","tinymce.core.util.Tools","tinymce.core.undo.Levels"],function(e,t,n){return function(e){function r(t){e.setDirty(t)}function o(e){m(!1),a.add({},e)}function i(){a.typing&&(m(!1),a.add())}var a=this,c=0,l=[],s,u,d=0,f=function(){return 0===d},m=function(e){f()&&(a.typing=e)};return e.on("init",function(){a.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(i(),a.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&o(e)}),e.on("ObjectResizeStart Cut",function(){a.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("DragEnd",o),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(o(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),u&&a.typing&&!1===n.isEq(n.createFromEditor(e),l[0])&&(!1===e.isDirty()&&(r(!0),e.fire("change",{level:l[0],lastLevel:null})),e.fire("TypingUndo"),u=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(a.typing&&o(e));var n=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||a.typing||n||(a.beforeChange(),m(!0),a.add({},e),u=!0)}}),e.on("MouseDown",function(e){a.typing&&o(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),a={data:l,typing:!1,beforeChange:function(){f()&&(s=e.selection.getBookmark(2,!0))},add:function(o,i){var a,u=e.settings,d,m;if(m=n.createFromEditor(e),o=o||{},o=t.extend(o,m),!1===f()||e.removed)return null;if(d=l[c],e.fire("BeforeAddUndo",{level:o,lastLevel:d,originalEvent:i}).isDefaultPrevented())return null;if(d&&n.isEq(d,o))return null;if(l[c]&&(l[c].beforeBookmark=s),u.custom_undo_redo_levels&&l.length>u.custom_undo_redo_levels){for(a=0;a<l.length-1;a++)l[a]=l[a+1];l.length--,c=l.length}o.bookmark=e.selection.getBookmark(2,!0),c<l.length-1&&(l.length=c+1),l.push(o),c=l.length-1;var p={level:o,lastLevel:d,originalEvent:i};return e.fire("AddUndo",p),c>0&&(r(!0),e.fire("change",p)),o},undo:function(){var t;return a.typing&&(a.add(),a.typing=!1,m(!1)),c>0&&(t=l[--c],n.applyToEditor(e,t,!0),r(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return c<l.length-1&&(t=l[++c],n.applyToEditor(e,t,!1),r(!0),e.fire("redo",{level:t})),t},clear:function(){l=[],c=0,a.typing=!1,a.data=l,e.fire("ClearUndos")},hasUndo:function(){return c>0||a.typing&&l[0]&&!n.isEq(n.createFromEditor(e),l[0])},hasRedo:function(){return c<l.length-1&&!a.typing},transact:function(e){return i(),a.beforeChange(),a.ignore(e),a.add()},ignore:function(e){try{d++,e()}finally{d--}},extra:function(t,r){var o,i;a.transact(t)&&(i=l[c].bookmark,o=l[c-1],n.applyToEditor(e,o,!0),a.transact(r)&&(l[c-1].beforeBookmark=i))}}}}),l("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var o=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},i=e.cached(function(){return a(t.fromDom(r))}),a=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:i,getBody:a,inBody:o}}),l("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,o,i,a){return n(o,i)?t.some(o):e.isFunction(a)&&a(o)?t.none():r(o,i,a)}}),l("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,o,i,a,c){var l=function(e){return m(o.body(),e)},s=function(t,o,i){for(var c=t.dom(),l=e.isFunction(i)?i:n.constant(!1);c.parentNode;){c=c.parentNode;var s=a.fromDom(c);if(o(s))return r.some(s);if(l(s))break}return r.none()},u=function(e,t,n){return c(function(e){return t(e)},s,e,t,n)},d=function(e,t){var n=e.dom();return n.parentNode?f(a.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):r.none()},f=function(e,r){return t.find(e.dom().childNodes,n.compose(r,a.fromDom)).map(a.fromDom)},m=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(a.fromDom(e.childNodes[o])))return r.some(a.fromDom(e.childNodes[o]));var i=n(e.childNodes[o]);if(i.isSome())return i}return r.none()};return n(e.dom())};return{first:l,ancestor:s,closest:u,sibling:d,child:f,descendant:m}}),l("tinymce.core.caret.CaretUtils",["tinymce.core.util.Fun","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,o,i){function a(e){return e>0}function c(e){return e<0}function l(e,t){for(var n;n=e(t);)if(!k(n))return n;return null}function s(e,n,r,o,i){var s=new t(e,o);if(c(n)){if((C(e)||k(e))&&(e=l(s.prev,!0),r(e)))return e;for(;e=l(s.prev,i);)if(r(e))return e}if(a(n)){if((C(e)||k(e))&&(e=l(s.next,!0),r(e)))return e;for(;e=l(s.next,i);)if(r(e))return e}return null}function u(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(x(e))return e;return t}function d(e,t){for(;e&&e!=t;){if(w(e))return e;e=e.parentNode}return null}function f(e,t,n){return d(e.container(),n)==d(t.container(),n)}function m(e,t,n){return u(e.container(),n)==u(t.container(),n)}function p(e,t){var n,r;return t?(n=t.container(),r=t.offset(),S(n)?n.childNodes[r+e]:null):null}function g(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n}function h(e,t,n){return d(t,e)==d(n,e)}function v(e,t,n){var r,o;for(o=e?"previousSibling":"nextSibling";n&&n!=t;){if(r=n[o],T(r)&&(r=r[o]),C(r)){if(h(t,r,n))return r;break}if(N(r))break;n=n.parentNode}return null}function y(e,t,r){var i,a,c,l,s=E(v,!0,t),u=E(v,!1,t);if(a=r.startContainer,c=r.startOffset,o.isCaretContainerBlock(a)){if(S(a)||(a=a.parentNode),"before"==(l=a.getAttribute("data-mce-caret"))&&(i=a.nextSibling,C(i)))return R(i);if("after"==l&&(i=a.previousSibling,C(i)))return A(i)}if(!r.collapsed)return r;if(n.isText(a)){if(T(a)){if(1===e){if(i=u(a))return R(i);if(i=s(a))return A(i)}if(-1===e){if(i=s(a))return A(i);if(i=u(a))return R(i)}return r}if(o.endsWithCaretContainer(a)&&c>=a.data.length-1)return 1===e&&(i=u(a))?R(i):r;if(o.startsWithCaretContainer(a)&&c<=1)return-1===e&&(i=s(a))?A(i):r;if(c===a.data.length)return i=u(a),i?R(i):r;if(0===c)return i=s(a),i?A(i):r}return r}function b(e,t){return C(p(e,t))}var x=n.isContentEditableTrue,C=n.isContentEditableFalse,w=n.matchStyleValues("display","block table table-cell table-caption list-item"),T=o.isCaretContainer,k=o.isCaretContainerBlock,E=e.curry,S=n.isElement,N=i.isCaretCandidate,R=E(g,!0),A=E(g,!1);return{isForwards:a,isBackwards:c,findNode:s,getEditingHost:u,getParentBlock:d,isInSameBlock:f,isInSameEditingHost:m,isBeforeContentEditableFalse:E(b,0),isAfterContentEditableFalse:E(b,-1),normalizeRange:y}}),l("tinymce.core.caret.CaretWalker",["tinymce.core.dom.NodeType","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,o,i){function a(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n}function c(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null}function l(e,t){if(g(e)){if(v(t.previousSibling)&&!f(t.previousSibling))return n.before(t);if(f(t))return n(t,0)}if(h(e)){if(v(t.nextSibling)&&!f(t.nextSibling))return n.after(t);if(f(t))return n(t,t.data.length)}return h(e)?p(t)?n.before(t):n.after(t):n.before(t)}function s(t,o){var i;return!!e.isBr(t)&&(!!(i=u(1,n.after(t),o))&&!r.isInSameBlock(n.before(t),n.before(i),o))}function u(e,t,x){var C,w,T,k,E,S,N;if(!m(x)||!t)return null;if(t.isEqual(n.after(x))&&x.lastChild){if(N=n.after(x.lastChild),h(e)&&v(x.lastChild)&&m(x.lastChild))return p(x.lastChild)?n.before(x.lastChild):N}else N=t;if(C=N.container(),w=N.offset(),f(C)){if(h(e)&&w>0)return n(C,--w);if(g(e)&&w<C.length)return n(C,++w);T=C}else{if(h(e)&&w>0&&(k=c(C,w-1),v(k)))return!y(k)&&(E=r.findNode(k,e,b,k))?f(E)?n(E,E.data.length):n.after(E):f(k)?n(k,k.data.length):n.before(k);if(g(e)&&w<C.childNodes.length&&(k=c(C,w),v(k)))return s(k,x)?u(e,n.after(k),x):!y(k)&&(E=r.findNode(k,e,b,k))?f(E)?n(E,0):n.before(E):f(k)?n(k,0):n.after(k);T=N.getNode()}return(g(e)&&N.isAtEnd()||h(e)&&N.isAtStart())&&(T=r.findNode(T,e,i.constant(!0),x,!0),b(T))?l(e,T):(k=r.findNode(T,e,b,x),S=o.last(o.filter(a(C,x),d)),!S||k&&S.contains(k)?k?l(e,k):null:N=g(e)?n.after(S):n.before(S))}var d=e.isContentEditableFalse,f=e.isText,m=e.isElement,p=e.isBr,g=r.isForwards,h=r.isBackwards,v=t.isCaretCandidate,y=t.isAtomic,b=t.isEditableCaretCandidate;return function(e){return{next:function(t){return u(1,t,e)},prev:function(t){return u(-1,t,e)}}}}),l("tinymce.core.caret.CaretFinder",["ephox.katamari.api.Fun","ephox.katamari.api.Option","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a){var c=function(e,t,n){var o=e?r.before(n):r.after(n);return p(e,t,o)},l=function(e){return a.isBr(e)?r.before(e):r.after(e)},s=function(e){return r.isTextPosition(e)?0===e.offset():n.isCaretCandidate(e.getNode())},u=function(e){return r.isTextPosition(e)?e.offset()===e.container().data.length:n.isCaretCandidate(e.getNode(!0))},d=function(e,t){return!r.isTextPosition(e)&&!r.isTextPosition(t)&&e.getNode()===t.getNode(!0)},f=function(e){return!r.isTextPosition(e)&&a.isBr(e.getNode())},m=function(e,t,n){return e?!d(t,n)&&!f(t)&&u(t)&&s(n):!d(n,t)&&s(t)&&u(n)},p=function(e,n,r){var o=new i(n);return t.from(e?o.next(r):o.prev(r))};return{fromPosition:p,navigate:function(e,n,r){return p(e,n,r).bind(function(i){return o.isInSameBlock(r,i,n)&&m(e,r,i)?p(e,n,i):t.some(i)})},positionIn:function(e,o){var i=e?o.firstChild:o.lastChild;return a.isText(i)?t.some(new r(i,e?0:i.data.length)):i?n.isCaretCandidate(i)?t.some(e?r.before(i):l(i)):c(e,o,i):t.none()}}}),l("tinymce.core.delete.DeleteUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind"],function(e,t,n,r,o,i){var a=function(t){var n=e.foldl(t,function(e,t){return e[t]=!0,e},{});return function(e){return!0===n[o.name(e)]}},c=a(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),l=function(e){return function(t){return n.eq(e,r.fromDom(t.dom().parentNode))}};return{getParentTextBlock:function(e,r){return n.contains(e,r)?i.closest(r,c,l(e)):t.none()}}}),l("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(e){return t.one(e)},o=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:r,ancestor:o,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,r,i){return n(t.is,o,e,r,i)}}}),l("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()}}}),l("tinymce.core.dom.Empty",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorExists","tinymce.core.caret.CaretCandidate","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,r,o,i,a){var c=function(o,i){var a=n.fromDom(o),c=n.fromDom(i);return r.ancestor(c,"pre,code",e.curry(t.eq,a))},l=function(e,t){return i.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===c(e,t)},s=function(e){return i.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},u=function(e,t){return o.isCaretCandidate(t)&&!1===l(e,t)||s(t)||d(t)},d=i.hasAttribute("data-mce-bookmark"),f=i.hasAttribute("data-mce-bogus"),m=i.hasAttributeValue("data-mce-bogus","all"),p=function(e){var t,n,r=0;if(u(e,e))return!1;if(!(n=e.firstChild))return!0;t=new a(n,e);do{if(m(n))n=t.next(!0);else if(f(n))n=t.next();else if(i.isBr(n))r++,n=t.next();else{if(u(e,n))return!1;n=t.next()}}while(n);return r<=1};return{isEmpty:function(e){return p(e.dom())}}}),l("tinymce.core.delete.BlockBoundary",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m,p){var g=o.immutable("block","position"),h=o.immutable("from","to"),v=function(e,t){var n=a.fromDom(e),r=a.fromDom(t.container());return f.getParentTextBlock(n,r).map(function(e){return g(e,t)})},y=function(e){return!1===i.eq(e.from().block(),e.to().block())},b=function(e){return s.parent(e.from().block()).bind(function(t){return s.parent(e.to().block()).filter(function(e){return i.eq(t,e)})}).isSome()},x=function(e){return!1===p.isContentEditableFalse(e.from().block())&&!1===p.isContentEditableFalse(e.to().block())},C=function(e,t,r){return p.isBr(r.position().getNode())&&!1===m.isEmpty(r.block())?u.positionIn(!1,r.block().dom()).bind(function(o){return o.isEqual(r.position())?u.fromPosition(t,e,o).bind(function(t){return v(e,t)}):n.some(r)}).getOr(r):r},w=function(e,t,n){var o=v(e,d.fromRangeStart(n)),i=o.bind(function(n){return u.fromPosition(t,e,n.position()).bind(function(n){return v(e,n).map(function(n){return C(e,t,n)})})});return r.liftN([o,i],h).filter(function(e){return y(e)&&b(e)&&x(e)})};return{read:function(e,t,r){return r.collapsed?w(e,t,r):n.none()}}}),l("tinymce.core.delete.MergeBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,c,l,s){var u=function(c,u,d,f){var m=i.children(u);return s.isBr(f.getNode())&&(r.remove(o.fromDom(f.getNode())),f=a.positionIn(!1,d.dom()).getOr(f)),!1===l.isEmpty(u)&&e.each(m,function(e){n.append(d,e)}),l.isEmpty(u)&&r.remove(u),m.length>0?t.from(f):t.none()};return{mergeBlocks:function(e,t,n){return e?l.isEmpty(t)?(r.remove(t),a.positionIn(!0,n.dom())):a.positionIn(!1,t.dom()).bind(function(r){return u(e,n,t,r)}):l.isEmpty(n)?(r.remove(n),a.positionIn(!0,t.dom())):a.positionIn(!1,n.dom()).bind(function(r){return u(e,t,n,r)})}}}),l("tinymce.core.delete.BlockBoundaryDelete",["tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(e,t){return{backspaceDelete:function(n,r){var o;return o=e.read(n.getBody(),r,n.selection.getRng()).bind(function(e){return t.mergeBlocks(r,e.from().block(),e.to().block())}),o.each(function(e){n.selection.setRng(e.toRange())}),o.isSome()}}}),l("tinymce.core.delete.BlockRangeDelete",["ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.delete.DeleteUtils","tinymce.core.delete.MergeBlocks"],function(e,t,n,r,o){var i=function(i,a){var c=a.getRng();return e.liftN([r.getParentTextBlock(i,n.fromDom(c.startContainer)),r.getParentTextBlock(i,n.fromDom(c.endContainer))],function(e,n){return!1===t.eq(e,n)&&(c.deleteContents(),o.mergeBlocks(!0,e,n).each(function(e){a.setRng(e.toRange())}),!0)}).getOr(!1)};return{backspaceDelete:function(e,t){var r=n.fromDom(e.getBody());return!1===e.selection.isCollapsed()&&i(r,e.selection)}}}),l("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,o,i){return{generate:function(a){if(!n.isArray(a))throw new o("cases must be an array");if(0===a.length)throw new o("there must be at least one case");var c=[],l={};return e.each(a,function(s,u){var d=t.keys(s);if(1!==d.length)throw new o("one and only one name per case");var f=d[0],m=s[f];if(void 0!==l[f])throw new o("duplicate key detected:"+f);if("cata"===f)throw new o("cannot have a case named cata (sorry)");if(!n.isArray(m))throw new o("case arguments must be an array");c.push(f),l[f]=function(){var n=arguments.length;if(n!==m.length)throw new o("Wrong number of arguments to case "+f+". Expected "+m.length+" ("+m+"), got "+n);for(var l=new r(n),s=0;s<l.length;s++)l[s]=arguments[s];var d=function(n){var r=t.keys(n);if(c.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+r.join(","));if(!e.forall(c,function(t){return e.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+c.join(", "));return n[f].apply(null,l)};return{fold:function(){if(arguments.length!==a.length)throw new o("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[u].apply(null,l)},match:d,log:function(e){i.log(e,{constructors:c,constructor:f,params:l})}}}}),l}}}),l("tinymce.core.delete.CefDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,c,l){var s=e.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),u=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return l.isElement(n)&&n.getAttribute("data-mce-caret")===r},d=function(e,r,o,i){var l=i.getNode(!1===r);return a.getParentTextBlock(n.fromDom(e),n.fromDom(o.getNode())).map(function(e){return c.isEmpty(e)?s.remove(e.dom()):s.moveToElement(l)}).orThunk(function(){return t.some(s.moveToElement(l))})},f=function(e,n,o){return r.fromPosition(n,e,o).bind(function(r){return n&&l.isContentEditableFalse(r.getNode())?d(e,n,o,r):!1===n&&l.isContentEditableFalse(r.getNode(!0))?d(e,n,o,r):n&&i.isAfterContentEditableFalse(o)?t.some(s.moveToPosition(r)):!1===n&&i.isBeforeContentEditableFalse(o)?t.some(s.moveToPosition(r)):t.none()})},m=function(e,n){return e&&l.isContentEditableFalse(n.nextSibling)?t.some(s.moveToElement(n.nextSibling)):!1===e&&l.isContentEditableFalse(n.previousSibling)?t.some(s.moveToElement(n.previousSibling)):t.none()},p=function(e,n,r){return u(n,r)?m(n,r.getNode(!1===n)).fold(function(){return f(e,n,r)},t.some):f(e,n,r)};return{read:function(e,n,r){var a=i.normalizeRange(n?1:-1,e,r),c=o.fromRangeStart(a);return!1===n&&i.isAfterContentEditableFalse(c)?t.some(s.remove(c.getNode(!0))):n&&i.isBeforeContentEditableFalse(c)?t.some(s.remove(c.getNode())):p(e,n,c)}}}),l("tinymce.core.text.Bidi",[],function(){var e=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;return{hasStrongRtl:function(t){return e.test(t)}}}),l("tinymce.core.keyboard.InlineUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.text.Bidi"],function(e,t,n,r,o,i,a,c,l,s,u,d){var f=function(e){return s.DOM.is(e,"a[href],code")},m=function(e){return"rtl"===s.DOM.getStyle(e,"direction",!0)||d.hasStrongRtl(e.textContent)},p=function(t,n){return e.filter(s.DOM.getParents(n.container(),"*",t),f)},g=function(e,t){var r=p(e,t);return n.from(r[0])},h=function(e,t){var r=p(e,t);return n.from(r[r.length-1])},v=function(e,t,n){var r=c.getParentBlock(t,e),o=c.getParentBlock(n,e);return r&&r===o},y=function(e,t){return!!t&&h(e,t).isSome()},b=function(e,t){return h(e,t).map(function(e){return w(e,!1,t).isNone()||w(e,!0,t).isNone()}).getOr(!1)},x=function(e){return o.isBeforeInline(e)||o.isAfterInline(e)},C=function(e,t){return i.positionIn(t,e)},w=function(e,t,n){return i.fromPosition(t,e,n)},T=function(e,t){var n=t.container(),r=t.offset();return e?o.isCaretContainerInline(n)?u.isText(n.nextSibling)?new a(n.nextSibling,0):a.after(n):o.isBeforeInline(t)?new a(n,r+1):t:o.isCaretContainerInline(n)?u.isText(n.previousSibling)?new a(n.previousSibling,n.previousSibling.data.length):a.before(n):o.isAfterInline(t)?new a(n,r-1):t},k=t.curry(T,!0),E=t.curry(T,!1);return{isInlineTarget:f,findInline:g,findRootInline:h,isInInline:y,isRtl:m,isAtInlineEndPoint:b,isAtZwsp:x,findCaretPositionIn:C,findCaretPosition:w,normalizePosition:T,normalizeForwards:k,normalizeBackwards:E,hasSameParentBlock:v}}),l("tinymce.core.delete.DeleteElement",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m){var p=function(e,t){var n=e.container(),r=e.offset();return!1===u.isTextPosition(e)&&n===t.parentNode&&r>u.before(t).offset()},g=function(e,t){return p(t,e)?new u(t.container(),t.offset()-1):t},h=function(e){return f.isText(e)?new u(e,0):u.before(e)},v=function(e){return f.isText(e)?new u(e,e.data.length):u.after(e)},y=function(e){return s.isCaretCandidate(e.previousSibling)?t.some(v(e.previousSibling)):e.previousSibling?m.findCaretPositionIn(e.previousSibling,!1):t.none()},b=function(e){return s.isCaretCandidate(e.nextSibling)?t.some(h(e.nextSibling)):e.nextSibling?m.findCaretPositionIn(e.nextSibling,!0):t.none()},x=function(e,n){var r=u.before(n.previousSibling?n.previousSibling:n.parentNode);return m.findCaretPosition(e,!1,r).fold(function(){return m.findCaretPosition(e,!0,u.after(n))},t.some)},C=function(e,n){return m.findCaretPosition(e,!0,u.after(n)).fold(function(){return m.findCaretPosition(e,!1,u.before(n))},t.some)},w=function(e,t){return y(t).orThunk(function(){return b(t)}).orThunk(function(){return x(e,t)})},T=function(e,t){return b(t).orThunk(function(){return y(t)}).orThunk(function(){return C(e,t)})},k=function(e,t,n){return e?T(t,n):w(t,n)},E=function(t,n,r){return k(t,n,r).map(e.curry(g,r))},S=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},N=function(e){return function(t){return t.dom()===e}},R=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(a.name(t))},A=function(e){if(d.isEmpty(e)){var n=i.fromHtml('<br data-mce-bogus="1">');return o.empty(e),r.append(e,n),t.some(u.before(n.dom()))}return t.none()},_=function(e,t){return n.liftN([l.prevSibling(e),l.nextSibling(e),t],function(t,n,r){var i,a=t.dom(),c=n.dom();return f.isText(a)&&f.isText(c)?(i=a.data.length,a.appendData(c.data),o.remove(n),o.remove(e),r.container()===c?new u(a,i):r):(o.remove(e),r)}).orThunk(function(){return o.remove(e),t})};return{deleteElement:function(n,r,o){var i=E(r,n.getBody(),o.dom()),a=c.ancestor(o,e.curry(R,n),N(n.getBody())),l=_(o,i);a.bind(A).fold(function(){S(n,r,l)},function(e){S(n,r,t.some(e))})}}}),l("tinymce.core.delete.CefDelete",["ephox.sugar.api.node.Element","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.BlockBoundary","tinymce.core.delete.CefDeleteAction","tinymce.core.delete.DeleteElement","tinymce.core.delete.MergeBlocks","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,c){var l=function(t,n){return function(r){return i.deleteElement(t,n,e.fromDom(r)),!0}},s=function(e,n){return function(r){var o=n?t.before(r):t.after(r);return e.selection.setRng(o.toRange()),!0}},u=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},d=function(e,t){return o.read(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(l(e,t),s(e,t),u(e))}).getOr(!1)},f=function(t,n){var r=t.selection.getNode();return!!c.isContentEditableFalse(r)&&(i.deleteElement(t,n,e.fromDom(t.selection.getNode())),!0)},m=function(e,t){for(;t&&t!==e;){if(c.isContentEditableTrue(t)||c.isContentEditableFalse(t))return t;t=t.parentNode}return null},p=function(e){var n,r=m(e.getBody(),e.selection.getNode());return c.isContentEditableTrue(r)&&e.dom.isBlock(r)&&e.dom.isEmpty(r)&&(n=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(r,""),r.appendChild(n),e.selection.setRng(t.before(n).toRange())),!0};return{backspaceDelete:function(e,t){return e.selection.isCollapsed()?d(e,t):f(e,t)},paddEmptyElement:p}}),l("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var r=t.isText,o=function(e){return r(e)&&e.data[0]===n.ZWSP},i=function(e){return r(e)&&e.data[e.data.length-1]===n.ZWSP},a=function(e){return e.ownerDocument.createTextNode(n.ZWSP)},c=function(e){if(r(e.previousSibling))return i(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(n.ZWSP),e.previousSibling);if(r(e))return o(e)?e:(e.insertData(0,n.ZWSP),e);var t=a(e);return e.parentNode.insertBefore(t,e),t},l=function(e){if(r(e.nextSibling))return o(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,n.ZWSP),e.nextSibling);if(r(e))return i(e)?e:(e.appendData(n.ZWSP),e);var t=a(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},s=function(e,t){return e?c(t):l(t)};return{insertInline:s,insertInlineBefore:e.curry(s,!0),insertInlineAfter:e.curry(s,!1)}}),l("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i){var a=r.isElement,c=r.isText,l=function(e){var t=e.parentNode;t&&t.removeChild(e)},s=function(e){try{return e.nodeValue}catch(e){return""}},u=function(e,t){0===t.length?l(e):e.nodeValue=t},d=function(e){var t=o.trim(e);return{count:e.length-t.length,text:t}},f=function(e,t){return y(e),t},m=function(e,t){var r=d(e.data.substr(0,t.offset())),o=d(e.data.substr(t.offset())),i=r.text+o.text;return i.length>0?(u(e,i),new n(e,t.offset()-r.count)):t},p=function(t,r){var o=r.container(),i=e.indexOf(o.childNodes,t).map(function(e){return e<r.offset()?new n(o,r.offset()-1):r}).getOr(r);return y(t),i},g=function(e,t){return t.container()===e?m(e,t):f(e,t)},h=function(e,t){return t.container()===e.parentNode?p(e,t):f(e,t)},v=function(e,t){return n.isTextPosition(t)?g(e,t):h(e,t)},y=function(e){if(a(e)&&t.isCaretContainer(e)&&(t.hasContent(e)?e.removeAttribute("data-mce-caret"):l(e)),c(e)){var n=o.trim(s(e));u(e,n)}};return{removeAndReposition:v,remove:y}}),l("tinymce.core.keyboard.BoundaryCaret",["ephox.katamari.api.Option","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerInline","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a){var c=function(e,t){return i.isText(e.container())?n.insertInline(t,e.container()):n.insertInline(t,e.getNode())},l=function(e,n){var r=n.get();return r&&e.container()===r&&t.isCaretContainerInline(r)};return{renderCaret:function(t,i){return i.fold(function(i){r.remove(t.get());var a=n.insertInlineBefore(i);return t.set(a),e.some(new o(a,a.length-1))},function(e){return a.findCaretPositionIn(e,!0).map(function(e){if(l(e,t))return new o(t.get(),1);r.remove(t.get());var n=c(e,!0);return t.set(n),new o(n,1)})},function(e){return a.findCaretPositionIn(e,!1).map(function(e){if(l(e,t))return new o(t.get(),t.get().length-1);r.remove(t.get());var n=c(e,!1);return t.set(n),new o(n,n.length-1)})},function(i){r.remove(t.get());var a=n.insertInlineAfter(i);return t.set(a),e.some(new o(a,1))})}}}),l("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(e){return{evaluateUntil:function(t,n){for(var r=0;r<t.length;r++){var o=t[r].apply(null,n);if(o.isSome())return o}return e.none()}}}),l("tinymce.core.keyboard.BoundaryLocation",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,r,o,i,a,c,l,s){var u=e.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),d=function(e,t){var n=a.getParentBlock(t,e);return n||e},f=function(e,r){var o=l.normalizeForwards(r),i=d(e,o.container());return l.findRootInline(i,o).fold(function(){return l.findCaretPosition(i,!0,o).bind(t.curry(l.findRootInline,i)).map(function(e){return u.before(e)})},n.none)},m=function(e,t){var r=l.normalizeBackwards(t);return l.findRootInline(e,r).bind(function(e){return l.findCaretPosition(e,!1,r).isNone()?n.some(u.start(e)):n.none()})},p=function(e,t){var r=l.normalizeForwards(t);return l.findRootInline(e,r).bind(function(e){return l.findCaretPosition(e,!0,r).isNone()?n.some(u.end(e)):n.none()})},g=function(e,r){var o=l.normalizeBackwards(r),i=d(e,o.container());return l.findRootInline(i,o).fold(function(){return l.findCaretPosition(i,!1,o).bind(t.curry(l.findRootInline,i)).map(function(e){return u.after(e)})},n.none)},h=function(e){return!1===l.isRtl(y(e))},v=function(e,t){return s.evaluateUntil([f,m,p,g],[e,t]).filter(h)},y=function(e){return e.fold(t.identity,t.identity,t.identity,t.identity)},b=function(e){return e.fold(t.constant("before"),t.constant("start"),t.constant("end"),t.constant("after"))},x=function(e){return e.fold(u.before,u.before,u.after,u.after)},C=function(e){return e.fold(u.start,u.start,u.end,u.end)},w=function(e,t){return b(e)===b(t)&&y(e)===y(t)},T=function(e,t,n,o,i){return r.liftN([l.findRootInline(t,n),l.findRootInline(t,o)],function(n,r){return n!==r&&l.hasSameParentBlock(t,n,r)?u.after(e?n:r):i}).getOr(i)},k=function(e,n){return e.fold(t.constant(!0),function(e){return!w(e,n)})},E=function(e,n,r,o){var i=l.normalizePosition(e,o);return l.findCaretPosition(n,e,i).map(t.curry(l.normalizePosition,e)).fold(function(){return r.map(x)},function(o){return v(n,o).map(t.curry(T,e,n,i,o)).filter(t.curry(k,r))}).filter(h)},S=function(e,r){return e?r.fold(t.compose(n.some,u.start),n.none,t.compose(n.some,u.after),n.none):r.fold(n.none,t.compose(n.some,u.before),n.none,t.compose(n.some,u.end))},N=function(e,n,r){var o=l.normalizePosition(e,r),i=v(n,o);return v(n,o).bind(t.curry(S,e)).orThunk(function(){return E(e,n,i,r)})};return{readLocation:v,prevLocation:t.curry(N,!1),nextLocation:t.curry(N,!0),getElement:y,outside:x,inside:C}}),l("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),l("tinymce.core.keyboard.BoundarySelection",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,c){var l=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},s=function(e){return!1!==e.settings.inline_boundaries},u=function(e,t){e?t.setAttribute("data-mce-selected","1"):t.removeAttribute("data-mce-selected","1")},d=function(e,t,n){return i.renderCaret(t,n).map(function(t){return l(e,t),n})},f=function(e,t,n){var r=e.getBody(),i=o.fromRangeStart(e.selection.getRng());return(n?a.nextLocation(r,i):a.prevLocation(r,i)).bind(function(n){return d(e,t,n)})},m=function(t,r){var o=t.select("a[href][data-mce-selected],code[data-mce-selected]"),i=e.filter(r,c.isInlineTarget);e.each(e.difference(o,i),n.curry(u,!1)),e.each(e.difference(i,o),n.curry(u,!0))},p=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=o.fromRangeStart(e.selection.getRng());o.isTextPosition(n)&&!1===c.isAtZwsp(n)&&(l(e,r.removeAndReposition(t.get(),n)),t.set(null))}},g=function(t,n,r){if(t.selection.isCollapsed()){var i=e.filter(r,c.isInlineTarget);e.each(i,function(e){var r=o.fromRangeStart(t.selection.getRng());a.readLocation(t.getBody(),r).bind(function(e){return d(t,n,e)})})}};return{move:function(e,t,n){return function(){return!!s(e)&&f(e,t,n).isSome()}},setupSelectedState:function(e){var n=new t(null);return e.on("NodeChange",function(t){s(e)&&(m(e.dom,t.parents),p(e,n),g(e,n,t.parents))}),n},setCaretPosition:l}}),l("tinymce.core.delete.InlineBoundaryDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Element","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteElement","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,c,l,s,u,d,f){var m=function(e){return!1!==e.settings.inline_boundaries},p=function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},g=function(e){return n.liftN([f.findCaretPositionIn(e,!0),f.findCaretPositionIn(e,!1)],function(t,n){var r=f.normalizePosition(!0,t),o=f.normalizePosition(!1,n);return f.findCaretPosition(e,!0,r).map(function(e){return e.isEqual(o)}).getOr(!0)}).getOr(!0)},h=function(e,t){return function(n){return s.renderCaret(t,n).map(function(t){return d.setCaretPosition(e,t),!0}).getOr(!1)}},v=function(e,t,n,r){var o=e.getBody();e.undoManager.ignore(function(){e.selection.setRng(p(n,r)),e.execCommand("Delete"),u.readLocation(o,a.fromRangeStart(e.selection.getRng())).map(u.inside).map(h(e,t))}),e.nodeChanged()},y=function(e,t){var n=c.getParentBlock(t,e);return n||e},b=function(n,o,a,c){var s=y(n.getBody(),c.container()),d=u.readLocation(s,c);return d.bind(function(n){return a?n.fold(e.constant(t.some(u.inside(n))),t.none,e.constant(t.some(u.outside(n))),t.none):n.fold(t.none,e.constant(t.some(u.outside(n))),t.none,e.constant(t.some(u.inside(n))))}).map(h(n,o)).getOrThunk(function(){var e=i.navigate(a,s,c),t=e.bind(function(e){return u.readLocation(s,e)});return d.isSome()&&t.isSome()?f.findRootInline(s,c).map(function(e){return!!g(e)&&(l.deleteElement(n,a,r.fromDom(e)),!0)}).getOr(!1):t.bind(function(t){return e.map(function(e){return a?v(n,o,c,e):v(n,o,e,c),!0})}).getOr(!1)})};return{backspaceDelete:function(e,t,n){if(e.selection.isCollapsed()&&m(e)){var r=a.fromRangeStart(e.selection.getRng());return b(e,t,n,r)}return!1}}}),l("tinymce.core.delete.DeleteCommands",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete"],function(e,t,n,r){var o=function(e,t){e.getDoc().execCommand(t,!1,null)},i=function(e){var t=e.dom,n=e.getBody();t.isEmpty(n)&&(e.setContent(""),n.firstChild&&t.isBlock(n.firstChild)?e.selection.setCursorLocation(n.firstChild,0):e.selection.setCursorLocation(n,0))};return{deleteCommand:function(a){n.backspaceDelete(a,!1)||r.backspaceDelete(a,!1)||e.backspaceDelete(a,!1)||t.backspaceDelete(a,!1)||(o(a,"Delete"),i(a))},forwardDeleteCommand:function(i){n.backspaceDelete(i,!0)||r.backspaceDelete(i,!0)||e.backspaceDelete(i,!0)||t.backspaceDelete(i,!0)||o(i,"ForwardDelete")}}}),l("tinymce.core.dom.RangeNormalizer",["tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType"],function(e,t,n,r){var o=function(e){return r.isElement(e)&&/^(P|H[1-6]|DIV)$/.test(e.nodeName)},i=function(e,t){return t(e.endContainer)},a=function(e,t,n,r){var o=document.createRange();return o.setStart(e,t),o.setEnd(n,r),o},c=function(r){var c=t.fromRangeStart(r),l=t.fromRangeEnd(r),s=r.commonAncestorContainer;return!1===r.collapsed&&i(r,o)&&0===r.endOffset?e.fromPosition(!1,s,l).map(function(e){return!n.isInSameBlock(c,l,s)&&n.isInSameBlock(c,e,s)?a(c.container(),c.offset(),e.container(),e.offset()):r}).getOr(r):r};return{normalize:function(e){return c(e)}}}),l("tinymce.core.InsertList",["tinymce.core.util.Tools","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition"],function(e,t,n){var r=function(e){var t=e.firstChild,n=e.lastChild;return t&&"meta"===t.name&&(t=t.next),n&&"mce_marker"===n.attr("id")&&(n=n.prev),!(!t||t!==n)&&("ul"===t.name||"ol"===t.name)},o=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},i=function(e,t,n){var r=t.serialize(n),i=e.createFragment(r);return o(i)},a=function(t){return e.grep(t.childNodes,function(e){return"LI"===e.nodeName})},c=function(e){return!e.firstChild},l=function(e){return e.length>0&&c(e[e.length-1])?e.slice(0,-1):e},s=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},u=function(e,t){return!!s(e,t)},d=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},f=function(e,r){var o=n.before(e),i=new t(r),a=i.next(o);return a?a.toRange():null},m=function(e,r){var o=n.after(e),i=new t(r),a=i.prev(o);return a?a.toRange():null},p=function(t,n,r,o){var i=d(t,o),a=t.parentNode;return a.insertBefore(i[0],t),e.each(n,function(e){a.insertBefore(e,t)}),a.insertBefore(i[1],t),a.removeChild(t),m(n[n.length-1],r)},g=function(t,n,r){var o=t.parentNode;return e.each(n,function(e){o.insertBefore(e,t)}),f(t,r)},h=function(e,t,n,r){return r.insertAfter(t.reverse(),e),m(t[0],n)};return{isListFragment:r,insertAtCaret:function(e,r,o,c){var u=i(r,e,c),d=s(r,o.startContainer),f=l(a(u.firstChild)),m=1,v=2,y=r.getRoot(),b=function(e){var i=n.fromRangeStart(o),a=new t(r.getRoot()),c=1===e?a.prev(i):a.next(i);return!c||s(r,c.getNode())!==d};return b(1)?g(d,f,y):b(2)?h(d,f,y,r):p(d,f,y,o)},isParentBlockLi:u,trimListItems:l,listItems:a}}),l("tinymce.core.InsertContent",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.dom.RangeNormalizer","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.InsertList","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,c,l){var s=r.matchNodeNames("td th"),u=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},d=function(r,d,f){function m(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,o;return n=M.getRng(!0),r=n.startContainer,o=n.startOffset,3==r.nodeType&&(o>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),o<r.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function p(){var e,t,n;e=M.getRng(!0),t=e.startContainer,n=e.startOffset,3==t.nodeType&&e.collapsed&&("\xa0"===t.data[n]?(t.deleteData(n,1),/[\u00a0| ]$/.test(d)||(d+=" ")):"\xa0"===t.data[n-1]&&(t.deleteData(n-1,1),/[\u00a0| ]$/.test(d)||(d=" "+d)))}function g(){if(P){var e=r.getBody(),t=new n(I);l.each(I.select("*[data-mce-fragment]"),function(n){for(var r=n.parentNode;r&&r!=e;r=r.parentNode)D[n.nodeName.toLowerCase()]&&t.compare(r,n)&&I.remove(n,!0)})}}function h(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}function v(e){l.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})}function y(e){return!!e.getAttribute("data-mce-fragment")}function b(e){return e&&!r.schema.getShortEndedElements()[e.nodeName]}function x(n){function o(e){for(var t=r.getBody();e&&e!==t;e=e.parentNode)if("false"===r.dom.getContentEditable(e))return e;return null}function a(n){var o=e.fromRangeStart(n);if(o=new t(r.getBody()).next(o))return o.toRange()}var c,l,u;if(n){if(M.scrollIntoView(n),c=o(n))return I.remove(n),void M.select(c);R=I.createRng(),A=n.previousSibling,A&&3==A.nodeType?(R.setStart(A,A.nodeValue.length),i.ie||(_=n.nextSibling)&&3==_.nodeType&&(A.appendData(_.data),_.parentNode.removeChild(_))):(R.setStartBefore(n),R.setEndBefore(n)),l=I.getParent(n,I.isBlock),I.remove(n),l&&I.isEmpty(l)&&(r.$(l).empty(),R.setStart(l,0),R.setEnd(l,0),s(l)||y(l)||!(u=a(R))?I.add(l,I.create("br",{"data-mce-bogus":"1"})):(R=u,I.remove(l))),M.setRng(R)}}var C,w,T,k,E,S,N,R,A,_,B,P,D=r.schema.getTextInlineElements(),M=r.selection,I=r.dom;/^ | $/.test(d)&&(d=m(d)),C=r.parser,P=f.merge,w=new a({validate:r.settings.validate},r.schema),B='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',S={content:d,format:"html",selection:!0},r.fire("BeforeSetContent",S),d=S.content,-1==d.indexOf("{$caret}")&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,B),R=M.getRng();var O=R.startContainer||(R.parentElement?R.parentElement():null),L=r.getBody();O===L&&M.isCollapsed()&&I.isBlock(L.firstChild)&&b(L.firstChild)&&I.isEmpty(L.firstChild)&&(R=I.createRng(),R.setStart(L.firstChild,0),R.setEnd(L.firstChild,0),M.setRng(R)),M.isCollapsed()||(r.selection.setRng(o.normalize(r.selection.getRng())),r.getDoc().execCommand("Delete",!1,null),p()),T=M.getNode();var F={context:T.nodeName.toLowerCase(),data:f.data};if(E=C.parse(d,F),!0===f.paste&&c.isListFragment(E)&&c.isParentBlockLi(I,T))return R=c.insertAtCaret(w,I,r.selection.getRng(!0),E),r.selection.setRng(R),void r.fire("SetContent",S);if(h(E),A=E.lastChild,"mce_marker"==A.attr("id"))for(N=A,A=A.prev;A;A=A.walk(!0))if(3==A.type||!I.isBlock(A.name)){r.schema.isValidChild(A.parent.name,"span")&&A.parent.insert(N,A,"br"===A.name);break}if(r._selectionOverrides.showBlockCaretContainer(T),F.invalid){for(M.setContent(B),T=M.getNode(),k=r.getBody(),9==T.nodeType?T=A=k:A=T;A!==k;)T=A,A=A.parentNode;d=T==k?k.innerHTML:I.getOuterHTML(T),d=w.serialize(C.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return w.serialize(E)}))),T==k?I.setHTML(k,d):I.setOuterHTML(T,d)}else d=w.serialize(E),u(r,d,T);g(),x(I.get("mce_marker")),v(r.getBody()),r.fire("SetContent",S),r.addVisual()},f=function(e){var t;return"string"!=typeof e?(t=l.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}};return{insertAtCaret:function(e,t){var n=f(t);d(e,n.content,n.details)}}}),l("tinymce.core.EditorCommands",["tinymce.core.delete.DeleteCommands","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.InsertContent","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){var c=a.each,l=a.extend,s=a.map,u=a.inArray,d=a.explode,f=o.ie&&o.ie<11,m=!0,p=!1;return function(a){function m(e,t,n,r){var o,i,l=0;if(!a.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus||a.focus(),r=a.fire("BeforeExecCommand",{command:e,ui:t,value:n}),r.isDefaultPrevented())return!1;if(i=e.toLowerCase(),o=B.exec[i])return o(i,t,n),a.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(c(a.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n))return a.fire("ExecCommand",{command:e,ui:t,value:n}),l=!0,!1}),l)return l;if(a.theme&&a.theme.execCommand&&a.theme.execCommand(e,t,n))return a.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{l=a.getDoc().execCommand(e,t,n)}catch(e){}return!!l&&(a.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}}function g(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=B.state[e])return t(e);try{return a.getDoc().queryCommandState(e)}catch(e){}return!1}}function h(e){var t;if(!a.quirks.isHidden()&&!a.removed){if(e=e.toLowerCase(),t=B.value[e])return t(e);try{return a.getDoc().queryCommandValue(e)}catch(e){}}}function v(e,t){t=t||"exec",c(e,function(e,n){c(n.toLowerCase().split(","),function(n){B[t][n]=e})})}function y(e,t,n){e=e.toLowerCase(),B.exec[e]=function(e,r,o,i){return t.call(n||a,r,o,i)}}function b(e){if(e=e.toLowerCase(),B.exec[e])return!0;try{return a.getDoc().queryCommandSupported(e)}catch(e){}return!1}function x(e,t,n){e=e.toLowerCase(),B.state[e]=function(){return t.call(n||a)}}function C(e,t,n){e=e.toLowerCase(),B.value[e]=function(){return t.call(n||a)}}function w(e){return e=e.toLowerCase(),!!B.exec[e]}function T(e,t,n){return void 0===t&&(t=p),void 0===n&&(n=null),a.getDoc().execCommand(e,t,n)}function k(e){return _.match(e)}function E(e,t){_.toggle(e,t?{value:t}:void 0),a.nodeChanged()}function S(e){D=A.getBookmark(e)}function N(){A.moveToBookmark(D)}var R,A,_,B={state:{},exec:{},value:{}},P=a.settings,D;a.on("PreInit",function(){R=a.dom,A=a.selection,P=a.settings,_=a.formatter}),l(this,{execCommand:m,queryCommandState:g,queryCommandValue:h,queryCommandSupported:b,addCommands:v,addCommand:y,addQueryStateHandler:x,addQueryValueHandler:C,hasCustomCommand:w}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},"Cut,Copy,Paste":function(e){var t=a.getDoc(),n;try{T(e)}catch(e){n=!0}if("paste"!==e||t.queryCommandEnabled(e)||(n=!0),n||!t.queryCommandSupported(e)){var r=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");o.mac&&(r=r.replace(/Ctrl\+/g,"\u2318+")),a.notificationManager.open({text:r,type:"error"})}},unlink:function(){if(A.isCollapsed()){var e=a.dom.getParent(a.selection.getStart(),"a");return void(e&&a.dom.remove(e,!0))}_.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),c("left,center,right,justify".split(","),function(e){t!=e&&_.remove("align"+e)}),"none"!=t&&E("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;T(e),(t=R.getParent(A.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(S(),R.split(n,t),N()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){E(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){E(e,n)},FontSize:function(e,t,n){var r,o;n>=1&&n<=7&&(o=d(P.font_size_style_values),r=d(P.font_size_classes),n=r?r[n-1]||n:o[n-1]||n),E(e,n)},RemoveFormat:function(e){_.remove(e)},mceBlockQuote:function(){E("blockquote")},FormatBlock:function(e,t,n){return E(n||"p")},mceCleanup:function(){var e=A.getBookmark();a.setContent(a.getContent({cleanup:!0}),{cleanup:!0}),A.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||A.getNode();r!=a.getBody()&&(S(),a.dom.remove(r,!0),N())},mceSelectNodeDepth:function(e,t,n){var r=0;R.getParent(A.getNode(),function(e){if(1==e.nodeType&&r++==n)return A.select(e),p},a.getBody())},mceSelectNode:function(e,t,n){A.select(n)},mceInsertContent:function(e,t,n){i.insertAtCaret(a,n)},mceInsertRawHTML:function(e,t,n){A.setContent("tiny_mce_marker"),a.setContent(a.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){E(n)},mceSetContent:function(e,t,n){a.setContent(n)},"Indent,Outdent":function(e){var t,n,r;t=P.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),g("InsertUnorderedList")||g("InsertOrderedList")?T(e):(P.forced_root_block||R.getParent(A.getNode(),R.isBlock)||_.apply("div"),c(A.getSelectedBlocks(),function(o){if("false"!==R.getContentEditable(o)&&"LI"!==o.nodeName){var i=a.getParam("indent_use_margin",!1)?"margin":"padding";i="TABLE"===o.nodeName?"margin":i,i+="rtl"==R.getStyle(o,"direction",!0)?"Right":"Left","outdent"==e?(r=Math.max(0,parseInt(o.style[i]||0,10)-t),R.setStyle(o,i,r?r+n:"")):(r=parseInt(o.style[i]||0,10)+t+n,R.setStyle(o,i,r))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(e,t,n){a.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,A.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=R.getParent(A.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||_.remove("link"),n.href&&_.apply("link",n,r)},selectAll:function(){var e=R.getRoot(),n;if(A.getRng().setStart){var r=R.getParent(A.getStart(),t.isContentEditableTrue);r&&(n=R.createRng(),n.selectNodeContents(r),A.setRng(n))}else n=A.getRng(),n.item||(n.moveToElementText(e),n.select())},delete:function(){e.deleteCommand(a)},forwardDelete:function(){e.forwardDeleteCommand(a)},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(e,t,o){function i(){for(var e=new r(p,h),t,n=a.schema.getNonEmptyElements();t=e.next();)if(n[t.nodeName.toLowerCase()]||t.length>0)return!0}var c=o,l,s,u,d=A.getRng(!0);new n(R).normalize(d);var m=d.startOffset,p=d.startContainer;if(1==p.nodeType&&p.hasChildNodes()){var g=m>p.childNodes.length-1;p=p.childNodes[Math.min(m,p.childNodes.length-1)]||p,m=g&&3==p.nodeType?p.nodeValue.length:0}var h=R.getParent(p,R.isBlock),v=h?h.nodeName.toUpperCase():"",y=h?R.getParent(h.parentNode,R.isBlock):null,b=y?y.nodeName.toUpperCase():"",x=c&&c.ctrlKey;"LI"!=b||x||(h=y,v=b),p&&3==p.nodeType&&m>=p.nodeValue.length&&(f||i()||(l=R.create("br"),d.insertNode(l),d.setStartAfter(l),d.setEndAfter(l),s=!0)),l=R.create("br"),d.insertNode(l);var C=R.doc.documentMode;return f&&"PRE"==v&&(!C||C<8)&&l.parentNode.insertBefore(R.doc.createTextNode("\r"),l),u=R.create("span",{},"&nbsp;"),l.parentNode.insertBefore(u,l),A.scrollIntoView(u),R.remove(u),s?(d.setStartBefore(l),d.setEndBefore(l)):(d.setStartAfter(l),d.setEndAfter(l)),A.setRng(d),a.undoManager.add(),!0}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=A.isCollapsed()?[R.getParent(A.getNode(),R.isBlock)]:A.getSelectedBlocks(),r=s(n,function(e){return!!_.matchNode(e,t)});return-1!==u(r,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return k(e)},mceBlockQuote:function(){return k("blockquote")},Outdent:function(){var e;if(P.inline_styles){if((e=R.getParent(A.getStart(),R.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=R.getParent(A.getEnd(),R.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return g("InsertUnorderedList")||g("InsertOrderedList")||!P.inline_styles&&!!R.getParent(A.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=R.getParent(A.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),v({"FontSize,FontName":function(e){var t=0,n;return(n=R.getParent(A.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),v({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}})}}),l("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(e,t){function n(t,a){var c=this,l,s;if(t=o(t),a=c.settings=a||{},l=a.base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(c.source=t);var u=0===t.indexOf("//");0!==t.indexOf("/")||u||(t=(l?l.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(s=a.base_uri?a.base_uri.path:new n(e.location.href).directory,""===a.base_uri.protocol?t="//mce_host"+c.toAbsPath(s,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(l&&l.protocol||"http")+"://mce_host"+c.toAbsPath(s,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),r(i,function(e,n){var r=t[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),c[e]=r}),l&&(c.protocol||(c.protocol=l.protocol),c.userInfo||(c.userInfo=l.userInfo),c.port||"mce_host"!==c.host||(c.port=l.port),c.host&&"mce_host"!==c.host||(c.host=l.host),c.source=""),u&&(c.protocol="")}var r=t.each,o=t.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),a={ftp:21,http:80,https:443,mailto:25};return n.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,r;if("./"===e)return e;if(e=new n(e,{base_uri:t}),"mce_host"!=e.host&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var o=t.getURI(),i=e.getURI();return o==i||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==i?o:(r=t.toRelPath(t.path,e.path),e.query&&(r+="?"+e.query),e.anchor&&(r+="#"+e.anchor),r)},toAbsolute:function(e,t){return e=new n(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=a[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r=0,o="",i,a;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,a=e.length;i<a;i++)if(i>=n.length||e[i]!=n[i]){r=i+1;break}if(e.length<n.length)for(i=0,a=n.length;i<a;i++)if(i>=e.length||e[i]!=n[i]){r=i+1;break}if(1===r)return t;for(i=0,a=e.length-(r-1);i<a;i++)o+="../";for(i=r-1,a=n.length;i<a;i++)o+=i!=r-1?"/"+n[i]:n[i];return o},toAbsPath:function(e,t){var n,o=0,i=[],a,c;for(a=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),r(e,function(e){e&&i.push(e)}),e=i,n=t.length-1,i=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?o>0?o--:i.push(t[n]):o++);return n=e.length-o,c=n<=0?i.reverse().join("/"):e.slice(0,n).join("/")+"/"+i.reverse().join("/"),0!==c.indexOf("/")&&(c="/"+c),a&&c.lastIndexOf("/")!==c.length-1&&(c+=a),c},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},n.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},n.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},n}),l("tinymce.core.util.Class",["tinymce.core.util.Tools"],function(e){function t(){}var n=e.each,r=e.extend,o,i;return t.extend=o=function(e){function t(){var e,t,n,r=this;if(!i&&(r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function a(){return this}function c(e,t){return function(){var n=this,r=n._super,o;return n._super=s[e],o=t.apply(n,arguments),n._super=r,o}}var l=this,s=l.prototype,u,d,f;i=!0,u=new l,i=!1,e.Mixins&&(n(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),s.Mixins&&(e.Mixins=s.Mixins.concat(e.Mixins))),e.Methods&&n(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&n(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;return e!==r?(t[n]=e,t):t[n]}}),e.Statics&&n(e.Statics,function(e,n){t[n]=e}),e.Defaults&&s.Defaults&&(e.Defaults=r({},s.Defaults,e.Defaults));for(d in e)f=e[d],"function"==typeof f&&s[d]?u[d]=c(d,f):u[d]=f;return t.prototype=u,t.constructor=t,t.extend=o,t},t}),l("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(e){function t(t){function n(){return!1}function r(){return!0}function o(e,o){var i,c,l,s;if(e=e.toLowerCase(),o=o||{},o.type=e,o.target||(o.target=u),o.preventDefault||(o.preventDefault=function(){o.isDefaultPrevented=r},o.stopPropagation=function(){o.isPropagationStopped=r},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=r},o.isDefaultPrevented=n,o.isPropagationStopped=n,o.isImmediatePropagationStopped=n),t.beforeFire&&t.beforeFire(o),i=d[e])for(c=0,l=i.length;c<l;c++){if(s=i[c],s.once&&a(e,s.func),o.isImmediatePropagationStopped())return o.stopPropagation(),o;if(!1===s.func.call(u,o))return o.preventDefault(),o}return o}function i(t,r,o,i){var a,c,l;if(!1===r&&(r=n),r)for(r={func:r},i&&e.extend(r,i),c=t.toLowerCase().split(" "),l=c.length;l--;)t=c[l],a=d[t],a||(a=d[t]=[],f(t,!0)),o?a.unshift(r):a.push(r);return s}function a(e,t){var n,r,o,i,a;if(e)for(i=e.toLowerCase().split(" "),n=i.length;n--;){if(e=i[n],r=d[e],!e){for(o in d)f(o,!1),delete d[o];return s}if(r){if(t)for(a=r.length;a--;)r[a].func===t&&(r=r.slice(0,a).concat(r.slice(a+1)),d[e]=r);else r.length=0;r.length||(f(e,!1),delete d[e])}}else{for(e in d)f(e,!1);d={}}return s}function c(e,t,n){return i(e,t,n,{once:!0})}function l(e){return e=e.toLowerCase(),!(!d[e]||0===d[e].length)}var s=this,u,d={},f;t=t||{},u=t.scope||s,f=t.toggleEvent||n,s.fire=o,s.on=i,s.off=a,s.once=c,s.has=l}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),l("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,r)}})),t._eventDispatcher}return{fire:function(e,n,r){var o=this;if(o.removed&&"remove"!==e)return n;if(n=t(o).fire(e,n,r),!1!==r&&o.parent)for(var i=o.parent();i&&!n.isPropagationStopped();)i.fire(e,n,!1),i=i.parent();return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),l("tinymce.core.data.Binding",[],function(){function e(e){this.create=e.create}return e.create=function(t,n){return new e({create:function(e,r){function o(t){e.set(r,t.value)}function i(e){t.set(n,e.value)}var a;return e.on("change:"+r,i),t.on("change:"+n,o),a=e._bindings,a||(a=e._bindings=[],e.on("destroy",function(){for(var e=a.length;e--;)a[e]()})),a.push(function(){t.off("change:"+n,o)}),t.get(n)}})},e}),l("tinymce.core.data.ObservableObject",["tinymce.core.data.Binding","tinymce.core.util.Class","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t,n,r){function o(e){return e.nodeType>0}function i(e,t){var n,a;if(e===t)return!0;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t)return e===t;if(r.isArray(t)){if(e.length!==t.length)return!1;for(n=e.length;n--;)if(!i(e[n],t[n]))return!1}if(o(e)||o(t))return e===t;a={};for(n in t){if(!i(e[n],t[n]))return!1;a[n]=!0}for(n in e)if(!a[n]&&!i(e[n],t[n]))return!1;return!0}return t.extend({Mixins:[n],init:function(t){var n,r;t=t||{};for(n in t)(r=t[n])instanceof e&&(t[n]=r.create(this,n));this.data=t},set:function(t,n){var r,o,a=this.data[t];if(n instanceof e&&(n=n.create(this,t)),"object"==typeof t){for(r in t)this.set(r,t[r]);return this}return i(a,n)||(this.data[t]=n,o={target:this,name:t,value:n,oldValue:a},this.fire("change:"+t,o),this.fire("change",o)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(t){return e.create(this,t)},destroy:function(){this.fire("destroy")}})}),l("tinymce.core.ui.Selector",["tinymce.core.util.Class"],function(e){"use strict";function t(e){for(var t=[],n=e.length,r;n--;)r=e[n],r.__checked||(t.push(r),r.__checked=1);for(n=t.length;n--;)delete t[n].__checked;return t}var n=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,i,a=e.extend({init:function(e){function t(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}function i(e){if(e)return function(t){return t._name===e}}function a(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}function c(e,t,n){if(e)return function(r){var o=r[e]?r[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!=n:"^="===t?0===o.indexOf(n):"$="===t&&o.substr(o.length-n.length)===n:!!n}}function l(e){var t;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=u(e[1],[]),function(e){return!d(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}function s(e,r,s){function u(e){e&&r.push(e)}var d;return d=n.exec(e.replace(o,"")),u(t(d[1])),u(i(d[2])),u(a(d[3])),u(c(d[4],d[5],d[6])),u(l(d[7])),r.pseudo=!!d[7],r.direct=s,r}function u(e,t){var n=[],o,i,a;do{if(r.exec(""),(i=r.exec(e))&&(e=i[3],n.push(i[1]),i[2])){o=i[3];break}}while(i);for(o&&u(o,t),e=[],a=0;a<n.length;a++)">"!=n[a]&&e.push(s(n[a],[],">"===n[a-1]));return t.push(e),t}var d=this.match;this._selectors=u(e,[])},match:function(e,t){var n,r,o,i,a,c,l,s,u,d,f,m,p;for(t=t||this._selectors,n=0,r=t.length;n<r;n++){for(a=t[n],i=a.length,p=e,m=0,o=i-1;o>=0;o--)for(s=a[o];p;){if(s.pseudo)for(f=p.parent().items(),u=d=f.length;u--&&f[u]!==p;);for(c=0,l=s.length;c<l;c++)if(!s[c](p,u,d)){c=l+1;break}if(c===l){m++;break}if(o===i-1)break;p=p.parent()}if(m===i)return!0}return!1},find:function(e){function n(e,t,o){var i,a,c,l,s,u=t[o];for(i=0,a=e.length;i<a;i++){for(s=e[i],c=0,l=u.length;c<l;c++)if(!u[c](s,i,a)){c=l+1;break}if(c===l)o==t.length-1?r.push(s):s.items&&n(s.items(),t,o+1);else if(u.direct)return;s.items&&n(s.items(),t,o)}}var r=[],o,c,l=this._selectors;if(e.items){for(o=0,c=l.length;o<c;o++)n(e.items(),l[o],0);c>1&&(r=t(r))}return i||(i=a.Collection),new i(r)}});return a}),l("tinymce.core.ui.Collection",["tinymce.core.util.Tools","tinymce.core.ui.Selector","tinymce.core.util.Class"],function(e,t,n){"use strict";var r,o,i=Array.prototype.push,a=Array.prototype.slice;return o={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?i.apply(n,t):t instanceof r?n.add(t.toArray()):i.call(n,t),n},set:function(e){var t=this,n=t.length,r;for(t.length=0,t.add(e),r=t.length;r<n;r++)delete t[r];return t},filter:function(e){var n=this,o,i,a=[],c,l;for("string"==typeof e?(e=new t(e),l=function(t){return e.match(t)}):l=e,o=0,i=n.length;o<i;o++)c=n[o],l(c)&&a.push(c);return new r(a)},slice:function(){return new r(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n=this,r,o;return t!==r?(n.each(function(n){n[e]&&n[e](t)}),n):(o=n[0],o&&o[e]?o[e]():void 0)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},e.each("fire on off show hide append prepend before after reflow".split(" "),function(t){o[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){o[e]=function(t){return this.prop(e,t)}}),r=n.extend(o),t.Collection=r,r}),l("tinymce.core.ui.DomUtils",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.dom.DOMUtils"],function(e,t,n){"use strict";var r=0,o={id:function(){return"mceu_"+r++},create:function(e,r,o){var i=document.createElement(e);return n.DOM.setAttribs(i,r),"string"==typeof o?i.innerHTML=o:t.each(o,function(e){e.nodeType&&i.appendChild(e)}),i},createFragment:function(e){return n.DOM.createFragment(e)},getWindowSize:function(){return n.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return n.DOM.getPos(e,t||o.getContainer())},getContainer:function(){return e.container?e.container:document.body},getViewPort:function(e){return n.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return n.DOM.addClass(e,t)},removeClass:function(e,t){return n.DOM.removeClass(e,t)},hasClass:function(e,t){return n.DOM.hasClass(e,t)},toggleClass:function(e,t,r){return n.DOM.toggleClass(e,t,r)},css:function(e,t,r){return n.DOM.setStyle(e,t,r)},getRuntimeStyle:function(e,t){return n.DOM.getStyle(e,t,!0)},on:function(e,t,r,o){return n.DOM.bind(e,t,r,o)},off:function(e,t,r){return n.DOM.unbind(e,t,r)},fire:function(e,t,r){return n.DOM.fire(e,t,r)},innerHtml:function(e,t){n.DOM.setHTML(e,t)}};return o}),l("tinymce.core.ui.BoxUtils",[],function(){"use strict";return{parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}}}}),l("tinymce.core.ui.ClassList",["tinymce.core.util.Tools"],function(e){"use strict";function t(){}function n(e){this.cls=[],this.cls._map={},this.onchange=e||t,this.prefix=""}return e.extend(n.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){for(var t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),n.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e},n}),l("tinymce.core.ui.ReflowQueue",["tinymce.core.util.Delay"],function(e){var t={},n;return{add:function(r){var o=r.parent();if(o){if(!o._layout||o._layout.isNative())return;t[o._id]||(t[o._id]=o),n||(n=!0,e.requestAnimationFrame(function(){var e,r;n=!1;for(e in t)r=t[e],r.state.get("rendered")&&r.reflow();t={}},document.body))}},remove:function(e){t[e._id]&&delete t[e._id]}}}),l("tinymce.core.ui.Control",["tinymce.core.util.Class","tinymce.core.util.Tools","tinymce.core.util.EventDispatcher","tinymce.core.data.ObservableObject","tinymce.core.ui.Collection","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.ui.BoxUtils","tinymce.core.ui.ClassList","tinymce.core.ui.ReflowQueue"],function(e,t,n,r,o,i,a,c,l,s){"use strict";function u(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,r){r&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&d(e))}})),e._eventDispatcher}function d(e){function t(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function n(){var e=s._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),s._lastHoverCtrl=null)}function r(t){var n=e.getParentCtrl(t.target),r=s._lastHoverCtrl,o=0,i,a,c;if(n!==r){if(s._lastHoverCtrl=n,a=n.parents().toArray().reverse(),a.push(n),r){for(c=r.parents().toArray().reverse(),c.push(r),o=0;o<c.length&&a[o]===c[o];o++);for(i=c.length-1;i>=o;i--)r=c[i],r.fire("mouseleave",{target:r.getEl()})}for(i=o;i<a.length;i++)n=a[i],n.fire("mouseenter",{target:n.getEl()})}}function o(t){t.preventDefault(),"mousewheel"==t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var i,c,l,s,u,d;if(u=e._nativeEvents){for(l=e.parents().toArray(),l.unshift(e),i=0,c=l.length;!s&&i<c;i++)s=l[i]._eventsRoot;for(s||(s=l[l.length-1]||e),e._eventsRoot=s,c=i,i=0;i<c;i++)l[i]._eventsRoot=s;var p=s._delegates;p||(p=s._delegates={});for(d in u){if(!u)return!1;"wheel"!==d||m?("mouseenter"===d||"mouseleave"===d?s._hasMouseEnter||(a(s.getEl()).on("mouseleave",n).on("mouseover",r),s._hasMouseEnter=1):p[d]||(a(s.getEl()).on(d,t),p[d]=!0),u[d]=!1):f?a(e.getEl()).on("mousewheel",o):a(e.getEl()).on("DOMMouseScroll",o)}}}var f="onmousewheel"in document,m=!1,p="mce-",g,h=0,v={Statics:{classPrefix:"mce-"},isRtl:function(){return g.rtl},classPrefix:"mce-",init:function(e){function n(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)o.classes.add(e[t])}var o=this,i,s;o.settings=e=t.extend({},o.Defaults,e),o._id=e.id||"mceu_"+h++,o._aria={role:e.role},o._elmCache={},o.$=a,o.state=new r({visible:!0,active:!1,disabled:!1,value:""}),o.data=new r(e.data),o.classes=new l(function(){o.state.get("rendered")&&(o.getEl().className=""+this)}),o.classes.prefix=o.classPrefix,i=e.classes,i&&(o.Defaults&&(s=o.Defaults.classes)&&i!=s&&n(s),n(i)),t.each("title text name visible disabled active value".split(" "),function(t){t in e&&o[t](e[t])}),o.on("click",function(){if(o.disabled())return!1}),o.settings=e,o.borderBox=c.parseBox(e.border),o.paddingBox=c.parseBox(e.padding),o.marginBox=c.parseBox(e.margin),e.hidden&&o.hide()},Properties:"parent,name",getContainerElm:function(){return i.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e=this,t=e.settings,n,r,o=e.getEl(),a,l,s,u,d,f,m,p;n=e.borderBox=e.borderBox||c.measureBox(o,"border"),e.paddingBox=e.paddingBox||c.measureBox(o,"padding"),e.marginBox=e.marginBox||c.measureBox(o,"margin"),p=i.getSize(o),f=t.minWidth,m=t.minHeight,s=f||p.width,u=m||p.height,a=t.width,l=t.height,d=t.autoResize,d=void 0!==d?d:!a&&!l,a=a||s,l=l||u;var g=n.left+n.right,h=n.top+n.bottom,v=t.maxWidth||65535,y=t.maxHeight||65535;return e._layoutRect=r={x:t.x||0,y:t.y||0,w:a,h:l,deltaW:g,deltaH:h,contentW:a-g,contentH:l-h,innerW:a-g,innerH:l-h,startMinWidth:f||0,startMinHeight:m||0,minW:Math.min(s,v),minH:Math.min(u,y),maxW:v,maxH:y,autoResize:d,scrollW:0},e._lastLayoutRect={},r},layoutRect:function(e){var t=this,n=t._layoutRect,r,o,i,a,c,l;return n||(n=t.initLayoutRect()),e?(i=n.deltaW,a=n.deltaH,e.x!==c&&(n.x=e.x),e.y!==c&&(n.y=e.y),e.minW!==c&&(n.minW=e.minW),e.minH!==c&&(n.minH=e.minH),o=e.w,o!==c&&(o=o<n.minW?n.minW:o,o=o>n.maxW?n.maxW:o,n.w=o,n.innerW=o-i),o=e.h,o!==c&&(o=o<n.minH?n.minH:o,o=o>n.maxH?n.maxH:o,n.h=o,n.innerH=o-a),o=e.innerW,o!==c&&(o=o<n.minW-i?n.minW-i:o,o=o>n.maxW-i?n.maxW-i:o,n.innerW=o,n.w=o+i),o=e.innerH,o!==c&&(o=o<n.minH-a?n.minH-a:o,o=o>n.maxH-a?n.maxH-a:o,n.innerH=o,n.h=o+a),e.contentW!==c&&(n.contentW=e.contentW),e.contentH!==c&&(n.contentH=e.contentH),r=t._lastLayoutRect,r.x===n.x&&r.y===n.y&&r.w===n.w&&r.h===n.h||(l=g.repaintControls,l&&l.map&&!l.map[t._id]&&(l.push(t),l.map[t._id]=!0),r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h),t):n},repaint:function(){var e=this,t,n,r,o,i,a,c,l,s,u;s=document.createRange?function(e){return e}:Math.round,t=e.getEl().style,o=e._layoutRect,l=e._lastRepaintRect||{},i=e.borderBox,a=i.left+i.right,c=i.top+i.bottom,o.x!==l.x&&(t.left=s(o.x)+"px",l.x=o.x),o.y!==l.y&&(t.top=s(o.y)+"px",l.y=o.y),o.w!==l.w&&(u=s(o.w-a),t.width=(u>=0?u:0)+"px",l.w=o.w),o.h!==l.h&&(u=s(o.h-c),t.height=(u>=0?u:0)+"px",l.h=o.h),e._hasBody&&o.innerW!==l.innerW&&(u=s(o.innerW),r=e.getEl("body"),r&&(n=r.style,n.width=(u>=0?u:0)+"px"),l.innerW=o.innerW),e._hasBody&&o.innerH!==l.innerH&&(u=s(o.innerH),r=r||e.getEl("body"),r&&(n=n||r.style,n.height=(u>=0?u:0)+"px"),l.innerH=o.innerH),e._lastRepaintRect=l,e.fire("repaint",{},!1)},updateLayoutRect:function(){var e=this;e.parent()._lastRect=null,i.css(e.getEl(),{width:"",height:""}),e._layoutRect=e._lastRepaintRect=e._lastLayoutRect=null,e.initLayoutRect()},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(o){return t||r.parentsAndSelf().each(function(r){var o=r.settings.callbacks;if(o&&(t=o[e]))return n=r,!1}),t?t.call(n,o):(o.action=e,void this.fire("execute",o))}}var r=this;return u(r).on(e,n(t)),r},off:function(e,t){return u(this).off(e,t),this},fire:function(e,t,n){var r=this;if(t=t||{},t.control||(t.control=r),t=u(r).fire(e,t),!1!==n&&r.parent)for(var o=r.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return u(this).has(e)},parents:function(e){var t=this,n,r=new o;for(n=t.parent();n;n=n.parent())r.add(n);return e&&(r=r.filter(e)),r},parentsAndSelf:function(e){return new o(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=a("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return void 0===t?n._aria[e]:(n._aria[e]=t,n.state.get("rendered")&&r.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return g.translate?g.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),r,o;if(e.items){var i=e.items().toArray();for(o=i.length;o--;)i[o].remove()}n&&n.items&&(r=[],n.items().each(function(t){t!==e&&r.push(t)}),n.items().set(r),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&a(t).off();var c=e.getRoot().controlIdLookup;return c&&delete c[e._id],t&&t.parentNode&&t.parentNode.removeChild(t),e.state.set("rendered",!1),e.state.destroy(),e.fire("remove"),e},renderBefore:function(e){return a(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return a(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e=this,t=e.settings,n,r,o,i,c;e.$el=a(e.getEl()),e.state.set("rendered",!0);for(i in t)0===i.indexOf("on")&&e.on(i.substr(2),t[i]);if(e._eventsRoot){for(o=e.parent();!c&&o;o=o.parent())c=o._eventsRoot;if(c)for(i in c._nativeEvents)e._nativeEvents[i]=!0}d(e),t.style&&(n=e.getEl())&&(n.setAttribute("style",t.style),n.style.cssText=t.style),e.settings.border&&(r=e.borderBox,e.$el.css({"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));var l=e.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[e._id]=e;for(var u in e._aria)e.aria(u,e._aria[u]);!1===e.state.get("visible")&&(e.getEl().style.display="none"),e.bindStates(),e.state.on("change:visible",function(t){var n=t.value,r;e.state.get("rendered")&&(e.getEl().style.display=!1===n?"none":"",e.getEl().getBoundingClientRect()),r=e.parent(),r&&(r._lastRect=null),e.fire(n?"show":"hide"),s.add(e)}),e.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){function t(e,t){var n,r,o=e;for(n=r=0;o&&o!=t&&o.nodeType;)n+=o.offsetLeft||0,r+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,o,i,a,c,l,s,u=t(n,r);return o=u.x,i=u.y,a=n.offsetWidth,c=n.offsetHeight,l=r.clientWidth,s=r.clientHeight,"end"==e?(o-=l-a,i-=s-c):"center"==e&&(o-=l/2-a/2,i-=s/2-c/2),r.scrollLeft=o,r.scrollTop=i,this},getRoot:function(){for(var e=this,t,n=[];e;){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);for(var r=n.length;r--;)n[r].rootControl=t;return t},reflow:function(){s.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};return t.each("text title visible disabled active value".split(" "),function(e){v[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}}),g=e.extend(v)}),l("tinymce.core.ui.Factory",[],function(){"use strict";var e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(t,n){var r;if("string"==typeof t?(n=n||{},n.type=t):(n=t,t=n.type),t=t.toLowerCase(),!(r=e[t]))throw Error("Could not find control by type: "+t);return r=new r(n),r.type=t,r}}}),l("tinymce.core.ui.KeyboardNavigation",[],function(){"use strict";var e=function(e){return!!e.getAttribute("data-mce-tabstop")};return function(t){function n(e){return e&&1===e.nodeType}function r(e){return e=e||C,n(e)?e.getAttribute("role"):null}function o(e){for(var t,n=e||C;n=n.parentNode;)if(t=r(n))return t}function i(e){var t=C;if(n(t))return t.getAttribute("aria-"+e)}function a(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t||"SELECT"==t}function c(t){return!(!a(t)||t.hidden)||(!!e(t)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(r(t)))}function l(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display&&!e.disabled){c(e)&&n.push(e);for(var r=0;r<e.childNodes.length;r++)t(e.childNodes[r])}}var n=[];return t(e||x.getEl()),n}function s(e){var t,n;e=e||w,n=e.parents().toArray(),n.unshift(e);for(var r=0;r<n.length&&(t=n[r],!t.settings.ariaRoot);r++);return t}function u(e){var t=s(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?d(t.lastAriaIndex,n):d(0,n)}function d(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function f(e,t){var n=-1,r=s();t=t||l(r.getEl());for(var o=0;o<t.length;o++)t[o]===C&&(n=o);n+=e,r.lastAriaIndex=d(n,t)}function m(){"tablist"==o()?f(-1,l(C.parentNode)):w.parent().submenu?y():f(-1)}function p(){var e=r(),t=o();"tablist"==t?f(1,l(C.parentNode)):"menuitem"==e&&"menu"==t&&i("haspopup")?b():f(1)}function g(){f(-1)}function h(){var e=r(),t=o();"menuitem"==e&&"menubar"==t?b():"button"==e&&i("haspopup")?b({key:"down"}):f(1)}function v(e){if("tablist"==o()){var t=l(w.getEl("body"))[0];t&&t.focus()}else f(e.shiftKey?-1:1)}function y(){w.fire("cancel")}function b(e){e=e||{},w.fire("click",{target:C,aria:e})}var x=t.root,C,w;try{C=document.activeElement}catch(e){C=document.body}return w=x.getParentCtrl(C),x.on("keydown",function(t){function n(t,n){a(C)||e(C)||"slider"!==r(C)&&!1!==n(t)&&t.preventDefault()}if(!t.isDefaultPrevented())switch(t.keyCode){case 37:n(t,m);break;case 39:n(t,p);break;case 38:n(t,g);break;case 40:n(t,h);break;case 27:y();break;case 14:case 13:case 32:n(t,b);break;case 9:!1!==v(t)&&t.preventDefault()}}),x.on("focusin",function(e){C=e.target,w=e.control}),{focusFirst:u}}}),l("tinymce.core.ui.Container",["tinymce.core.ui.Control","tinymce.core.ui.Collection","tinymce.core.ui.Selector","tinymce.core.ui.Factory","tinymce.core.ui.KeyboardNavigation","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.core.ui.ClassList","tinymce.core.ui.ReflowQueue"],function(e,t,n,r,o,i,a,c,l){"use strict";var s={};return e.extend({init:function(e){var n=this;n._super(e),e=n.settings,e.fixed&&n.state.set("fixed",!0),n._items=new t,n.isRtl()&&n.classes.add("rtl"),n.bodyClasses=new c(function(){n.state.get("rendered")&&(n.getEl("body").className=""+this)}),n.bodyClasses.prefix=n.classPrefix,n.classes.add("container"),n.bodyClasses.add("container-body"),e.containerCls&&n.classes.add(e.containerCls),n._layout=r.create((e.layout||"")+"layout"),n.settings.items?n.add(n.settings.items):n.add(n.render()),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=s[e]=s[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t=this,n,r,o;return e&&(r=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav)?void r.focusFirst(t):(o=t.find("*"),t.statusbar&&o.add(t.statusbar.items()),o.each(function(e){if(e.settings.autofocus)return n=null,!1;e.canFocus&&(n=n||e)}),n&&n.focus(),t)},replace:function(e,t){for(var n,r=this.items(),o=r.length;o--;)if(r[o]===e){r[o]=t;break}o>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,o,a=[];return i.isArray(t)||(t=[t]),i.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),o=i.extend({},n.settings.defaults,t),t.type=o.type=o.type||t.type||n.settings.defaultType||(o.defaults?o.defaults.type:null),t=r.create(o)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||(r=e.getEl("body"),r.hasChildNodes()&&n<=r.childNodes.length-1?a(r.childNodes[n]).before(t.renderHtml()):a(r).append(t.renderHtml()),t.postRender(),l.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,o,i,a;return e=r.create(e),o=r.items(),!n&&t<o.length-1&&(t+=1),t>=0&&t<o.length&&(i=o.slice(0,t).toArray(),a=o.slice(t).toArray(),o.set(i.concat(e,a))),r.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&void 0!==r&&(t[n]=r)}),t},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e.state.set("rendered",!0),e.settings.style&&e.$el.css(e.settings.style),e.settings.border&&(t=e.borderBox,e.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e.parent()||(e.keyboardNav=new o({root:e})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!=t.w||n.h!=t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(l.remove(this),this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),l("tinymce.core.ui.DragHelper",["tinymce.core.dom.DomQuery"],function(e){"use strict";function t(e){var t,n,r,o,i,a,c,l,s=Math.max;return t=e.documentElement,n=e.body,r=s(t.scrollWidth,n.scrollWidth),o=s(t.clientWidth,n.clientWidth),i=s(t.offsetWidth,n.offsetWidth),a=s(t.scrollHeight,n.scrollHeight),c=s(t.clientHeight,n.clientHeight),l=s(t.offsetHeight,n.offsetHeight),{width:r<i?o:r,height:a<l?c:a}}function n(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}return function(r,o){function i(){return c.getElementById(o.handle||r)}var a,c=o.document||document,l,s,u,d,f,m;o=o||{},s=function(r){var s=t(c),p,g;n(r),r.preventDefault(),l=r.button,p=i(),f=r.screenX,m=r.screenY,g=window.getComputedStyle?window.getComputedStyle(p,null).getPropertyValue("cursor"):p.runtimeStyle.cursor,a=e("<div></div>").css({position:"absolute",top:0,left:0,width:s.width,height:s.height,zIndex:2147483647,opacity:1e-4,cursor:g}).appendTo(c.body),e(c).on("mousemove touchmove",d).on("mouseup touchend",u),o.start(r)},d=function(e){if(n(e),e.button!==l)return u(e);e.deltaX=e.screenX-f,e.deltaY=e.screenY-m,e.preventDefault(),o.drag(e)},u=function(t){n(t),e(c).off("mousemove touchmove",d).off("mouseup touchend",u),a.remove(),o.stop&&o.stop(t)},this.destroy=function(){e(i()).off()},e(i()).on("mousedown touchstart",s)}}),l("tinymce.core.ui.Scrollable",["tinymce.core.dom.DomQuery","tinymce.core.ui.DragHelper"],function(e,t){"use strict";return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,c,l,s,u){var d,f,m,p,g,h,v,y,b;if(f=o.getEl("scroll"+t)){if(y=a.toLowerCase(),b=c.toLowerCase(),e(o.getEl("absend")).css(y,o.layoutRect()[l]-1),!s)return void e(f).css("display","none");e(f).css("display","block"),d=o.getEl("body"),m=o.getEl("scroll"+t+"t"),p=d["client"+c]-2*i,p-=n&&r?f["client"+u]:0,g=d["scroll"+c],h=p/g,v={},v[y]=d["offset"+a]+i,v[b]=p,e(f).css(v),v={},v[y]=d["scroll"+a]*h,v[b]=p*h,e(m).css(v)}}var n,r,a;a=o.getEl("body"),n=a.scrollWidth>a.clientWidth,r=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,a,c,l){var s,u=o._id+"-scroll"+n,d=o.classPrefix;e(o.getEl()).append('<div id="'+u+'" class="'+d+"scrollbar "+d+"scrollbar-"+n+'"><div id="'+u+'t" class="'+d+'scrollbar-thumb"></div></div>'),o.draghelper=new t(u+"t",{start:function(){s=o.getEl("body")["scroll"+r],e("#"+u).addClass(d+"active")},drag:function(e){var t,u,d,f,m=o.layoutRect();u=m.contentW>m.innerW,d=m.contentH>m.innerH,f=o.getEl("body")["client"+a]-2*i,f-=u&&d?o.getEl("scroll"+n)["client"+l]:0,t=f/o.getEl("body")["scroll"+a],o.getEl("body")["scroll"+r]=s+e["delta"+c]/t},stop:function(){e("#"+u).removeClass(d+"active")}})}o.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var o=this,i=2;o.settings.autoScroll&&(o._hasScroll||(o._hasScroll=!0,r(),o.on("wheel",function(e){var t=o.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e(o.getEl("body")).on("scroll",n)),n())}}}),l("tinymce.core.ui.Panel",["tinymce.core.ui.Container","tinymce.core.ui.Scrollable"],function(e,t){"use strict";return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),void 0===n?n='<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),l("tinymce.core.ui.Movable",["tinymce.core.ui.DomUtils"],function(e){"use strict";function t(t,n,r){var o,i,a,c,l,s,u,d,f,m;return f=e.getViewPort(),i=e.getPos(n),a=i.x,c=i.y,t.state.get("fixed")&&"static"==e.getRuntimeStyle(document.body,"position")&&(a-=f.x,c-=f.y),o=t.getEl(),m=e.getSize(o),l=m.width,s=m.height,m=e.getSize(n),u=m.width,d=m.height,r=(r||"").split(""),"b"===r[0]&&(c+=d),"r"===r[1]&&(a+=u),"c"===r[0]&&(c+=Math.round(d/2)),"c"===r[1]&&(a+=Math.round(u/2)),"b"===r[3]&&(c-=s),"r"===r[4]&&(a-=l),"c"===r[3]&&(c-=Math.round(s/2)),"c"===r[4]&&(a-=Math.round(l/2)),{x:a,y:c,w:l,h:s}}return{testMoveRel:function(n,r){for(var o=e.getViewPort(),i=0;i<r.length;i++){var a=t(this,n,r[i]);if(this.state.get("fixed")){if(a.x>0&&a.x+a.w<o.w&&a.y>0&&a.y+a.h<o.h)return r[i]}else if(a.x>o.x&&a.x+a.w<o.w+o.x&&a.y>o.y&&a.y+a.h<o.h+o.y)return r[i]}return r[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function r(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var o=this;if(o.settings.constrainToViewport){var i=e.getViewPort(window),a=o.layoutRect();t=r(t,i.w+i.x,a.w),n=r(n,i.h+i.y,a.h)}return o.state.get("rendered")?o.layoutRect({x:t,y:n}).repaint():(o.settings.x=t,o.settings.y=n),o.fire("move",{x:t,y:n}),o}}}),l("tinymce.core.ui.Resizable",["tinymce.core.ui.DomUtils"],function(e){"use strict";return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var r=e.getWindowSize();t=t<=1?t*r.w:t,n=n<=1?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),l("tinymce.core.ui.FloatPanel",["tinymce.core.ui.Panel","tinymce.core.ui.Movable","tinymce.core.ui.Resizable","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.util.Delay"],function(e,t,n,r,o,i){"use strict";function a(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function c(e){for(var t=v.length;t--;){var n=v[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(a(r,n)||n.parent()===r))continue;e=n.fire("autohide",{target:e.target}),e.isDefaultPrevented()||n.hide()}}}function l(){p||(p=function(e){2!=e.button&&c(e)},o(document).on("click touchstart",p))}function s(){g||(g=function(){var e;for(e=v.length;e--;)d(v[e])},o(window).on("scroll",g))}function u(){if(!h){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;h=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,x.hideAll())},o(window).on("resize",h)}}function d(e){function t(t,n){for(var r,o=0;o<v.length;o++)if(v[o]!=e)for(r=v[o].parent();r&&(r=r.parent());)r==e&&v[o].fixed(t).moveBy(0,n).repaint()}var n=r.getViewPort().y;e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function f(e,t){var n,r=x.zIndex||65535,i;if(e)y.push(t);else for(n=y.length;n--;)y[n]===t&&y.splice(n,1);if(y.length)for(n=0;n<y.length;n++)y[n].modal&&(r++,i=y[n]),y[n].getEl().style.zIndex=r,y[n].zIndex=r,r++;var a=o("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];i?o(a).css("z-index",i.zIndex-1):a&&(a.parentNode.removeChild(a),b=!1),x.currentZIndex=r}function m(e){var t;for(t=v.length;t--;)v[t]===e&&v.splice(t,1);for(t=y.length;t--;)y[t]===e&&y.splice(t,1)}var p,g,h,v=[],y=[],b,x=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(l(),u(),v.push(t)),e.autofix&&(s(),t.on("move",function(){d(this)})),t.on("postrender show",function(e){if(e.control==t){var n,r=t.classPrefix;t.modal&&!b&&(n=o("#"+r+"modal-block",t.getContainerElm()),n[0]||(n=o('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())),i.setTimeout(function(){n.addClass(r+"in"),o(t.getEl()).addClass(r+"in")}),b=!0),f(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){var t=this;if(t.state.get("fixed")!=e){if(t.state.get("rendered")){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.classes.toggle("fixed",e),t.state.set("fixed",e)}return t},show:function(){var e=this,t,n=e._super();for(t=v.length;t--&&v[t]!==e;);return-1===t&&v.push(e),n},hide:function(){return m(this),f(!1,this),this._super()},hideAll:function(){x.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),f(!1,e)),e},remove:function(){m(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return x.hideAll=function(){for(var e=v.length;e--;){var t=v[e];t&&t.settings.autohide&&(t.hide(),v.splice(e,1))}},x}),l("tinymce.core.ui.Window",["tinymce.core.ui.FloatPanel","tinymce.core.ui.Panel","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.ui.DragHelper","tinymce.core.ui.BoxUtils","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,r,o,i,a,c){"use strict";function l(e){var t="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0",n=r("meta[name=viewport]")[0],o;!1!==a.overrideViewPort&&(n||(n=document.createElement("meta"),n.setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),o=n.getAttribute("content"),o&&void 0!==m&&(m=o),n.setAttribute("content",e?t:m))}function s(e,t){u()&&!1===t&&r([document.documentElement,document.body]).removeClass(e+"fullscreen")}function u(){for(var e=0;e<f.length;e++)if(f[e]._fullscreen)return!0;return!1}function d(){function e(){var e,t=n.getWindowSize(),r;for(e=0;e<f.length;e++)r=f[e].layoutRect(),f[e].moveTo(f[e].settings.x||Math.max(0,t.w/2-r.w/2),f[e].settings.y||Math.max(0,t.h/2-r.h/2))}if(!a.desktop){var t={w:window.innerWidth,h:window.innerHeight};c.setInterval(function(){var e=window.innerWidth,n=window.innerHeight;t.w==e&&t.h==n||(t={w:e,h:n},r(window).trigger("resize"))},100)}r(window).on("resize",e)}var f=[],m="",p=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var r=this;r._super(e),r.isRtl()&&r.classes.add("rtl"),r.classes.add("window"),r.bodyClasses.add("window-body"),r.state.set("fixed",!0),e.buttons&&(r.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:r.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),r.statusbar.classes.add("foot"),r.statusbar.parent(r)),r.on("click",function(e){var t=r.classPrefix+"close";(n.hasClass(e.target,t)||n.hasClass(e.target.parentNode,t))&&r.close()}),r.on("cancel",function(){r.close()}),r.aria("describedby",r.describedBy||r._id+"-none"),r.aria("label",e.title),r._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,r,o,i,a;e._fullscreen&&(e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),r=e.layoutRect(),e.settings.title&&!e._fullscreen&&(o=r.headerW)>r.w&&(i=r.x-Math.max(0,o/2),e.layoutRect({w:o,x:i}),a=!0),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),(o=t.layoutRect().minW+r.deltaW)>r.w&&(i=r.x-Math.max(0,o-r.w),e.layoutRect({w:o,x:i}),a=!0)),a&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),r=0,o;if(e.settings.title&&!e._fullscreen){o=e.getEl("head");var i=n.getSize(o);t.headerW=i.width,t.headerH=i.height,r+=t.headerH}e.statusbar&&(r+=e.statusbar.layoutRect().h),t.deltaH+=r,t.minH+=r,t.h+=r;var a=n.getWindowSize();return t.x=e.settings.x||Math.max(0,a.w/2-t.w/2),t.y=e.settings.y||Math.max(0,a.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,o=e.settings,i="",a="",c=o.html;return e.preRender(),t.preRender(e),o.title&&(i='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(o.title)+'</div><div id="'+n+'-dragh" class="'+r+'dragh"></div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),o.url&&(c='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),void 0===c&&(c=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+i+'<div id="'+n+'-body" class="'+e.bodyClasses+'">'+c+"</div>"+a+"</div></div>"},fullscreen:function(e){var t=this,o=document.documentElement,a,l=t.classPrefix,s;if(e!=t._fullscreen)if(r(window).on("resize",function(){var e;if(t._fullscreen)if(a)t._timer||(t._timer=c.setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50));else{e=(new Date).getTime();var r=n.getWindowSize();t.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(a=!0)}}),s=t.layoutRect(),t._fullscreen=e,e){t._initial={x:s.x,y:s.y,w:s.w,h:s.h},t.borderBox=i.parseBox("0"),t.getEl("head").style.display="none",s.deltaH-=s.headerH+2,r([o,document.body]).addClass(l+"fullscreen"),t.classes.add("fullscreen");var u=n.getWindowSize();t.moveTo(0,0).resizeTo(u.w,u.h)}else t.borderBox=i.parseBox(t.settings.border),t.getEl("head").style.display="",s.deltaH+=s.headerH,r([o,document.body]).removeClass(l+"fullscreen"),t.classes.remove("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);return t.reflow()},postRender:function(){var e=this,t;setTimeout(function(){e.classes.add("in"),e.fire("open")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new o(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()}),f.push(e),l(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t;for(e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),s(e.classPrefix,!1),t=f.length;t--;)f[t]===e&&f.splice(t,1);l(f.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return d(),p}),l("tinymce.core.ui.MessageBox",["tinymce.core.ui.Window"],function(e){"use strict";var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function r(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}var o,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:o=[r("Ok",!0,!0),r("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:o=[r("Yes",1,!0),r("No",0)],n.buttons==t.YES_NO_CANCEL&&o.push(r("Cancel",-1));break;default:o=[r("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:o,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){i(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),l("tinymce.core.WindowManager",["tinymce.core.ui.Window","tinymce.core.ui.MessageBox"],function(e,t){return function(n){function r(){if(c.length)return c[c.length-1]}function o(e){n.fire("OpenWindow",{win:e})}function i(e){n.fire("CloseWindow",{win:e})}var a=this,c=[];a.windows=c,n.on("remove",function(){for(var e=c.length;e--;)c[e].close()}),a.open=function(t,r){var a;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body,data:t.data,callbacks:t.commands}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){a.find("form")[0].submit()}},{text:"Cancel",onclick:function(){a.close()}}]),a=new e(t),c.push(a),a.on("close",function(){for(var e=c.length;e--;)c[e]===a&&c.splice(e,1);c.length||n.focus(),i(a)}),t.data&&a.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),a.features=t||{},a.params=r||{},1===c.length&&n.nodeChanged(),a=a.renderTo().reflow(),o(a),a},a.alert=function(e,r,a){var c;c=t.alert(e,function(){r?r.call(a||this):n.focus()}),c.on("close",function(){i(c)}),o(c)},a.confirm=function(e,n,r){var a;a=t.confirm(e,function(e){n.call(r||this,e)}),a.on("close",function(){i(a)}),o(a)},a.close=function(){r()&&r().close()},a.getParams=function(){return r()?r().params:null},a.setParams=function(e){r()&&(r().params=e)},a.getWindows=function(){return c}}}),l("tinymce.core.ui.Tooltip",["tinymce.core.ui.Control","tinymce.core.ui.Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),l("tinymce.core.ui.Widget",["tinymce.core.ui.Control","tinymce.core.ui.Tooltip"],function(e,t){"use strict";var n,r=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==r.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t){var o=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"==o),r.classes.toggle("tooltip-nw","bc-tl"==o),r.classes.toggle("tooltip-ne","bc-tr"==o),r.moveRel(t.getEl(),o)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},postRender:function(){var e=this,t=e.settings;e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},bindStates:function(){function e(e){n.aria("disabled",e),n.classes.toggle("disabled",e)}function t(e){n.aria("pressed",e),n.classes.toggle("active",e)}var n=this;return n.state.on("change:disabled",function(t){e(t.value)}),n.state.on("change:active",function(e){t(e.value)}),n.state.get("disabled")&&e(!0),n.state.get("active")&&t(!0),n._super()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),l("tinymce.core.ui.Progress",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{value:0},init:function(e){var t=this;t._super(e),t.classes.add("progress"),t.settings.filter||(t.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this,t=e._id,n=this.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"></div></div><div class="'+n+'text">0%</div></div>'},postRender:function(){var e=this;return e._super(),e.value(e.settings.value),e},bindStates:function(){function e(e){e=t.settings.filter(e),t.getEl().lastChild.innerHTML=e+"%",t.getEl().firstChild.firstChild.style.width=e+"%"}var t=this;return t.state.on("change:value",function(t){e(t.value)}),e(t.state.get("value")),t._super()}})}),l("tinymce.core.ui.Notification",["tinymce.core.ui.Control","tinymce.core.ui.Movable","tinymce.core.ui.Progress","tinymce.core.util.Delay"],function(e,t,n,r){return e.extend({Mixins:[t],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new n),t.on("click",function(e){-1!=e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e=this,t=e.classPrefix,n="",r="",o="",i="";return e.icon&&(n='<i class="'+t+"ico "+t+"i-"+e.icon+'"></i>'),e.color&&(i=' style="background-color: '+e.color+'"'),e.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true">\xd7</button>'),e.progressBar&&(o=e.progressBar.renderHtml()),'<div id="'+e._id+'" class="'+e.classes+'"'+i+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+e.state.get("text")+"</div>"+o+r+"</div>"},postRender:function(){var e=this;return r.setTimeout(function(){e.$el.addClass(e.classPrefix+"in")}),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().childNodes[1].innerHTML=t.value}),e.progressBar&&e.progressBar.bindStates(),e._super()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||e.remove(),e},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=65534}})}),l("tinymce.core.NotificationManager",["tinymce.core.ui.Notification","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n){return function(r){function o(){if(f.length)return f[f.length-1]}function i(){t.requestAnimationFrame(function(){a(),c()})}function a(){for(var e=0;e<f.length;e++)f[e].moveTo(0,0)}function c(){if(f.length>0){var e=f.slice(0,1)[0],t=r.inline?r.getElement():r.getContentAreaContainer();if(e.moveRel(t,"tc-tc"),f.length>1)for(var n=1;n<f.length;n++)f[n].moveRel(f[n-1].getEl(),"bc-tc")}}function l(e,t){if(!u(t))return null;var r=n.grep(e,function(e){return s(t,e)});return 0===r.length?null:r[0]}function s(e,t){return e.type===t.settings.type&&e.text===t.settings.text}function u(e){return!e.progressBar&&!e.timeout}var d=this,f=[];d.notifications=f,r.on("remove",function(){for(var e=f.length;e--;)f[e].close()}),r.on("ResizeEditor",c),r.on("ResizeWindow",i),d.open=function(t){if(!r.removed){var n;r.editorManager.setActive(r);var o=l(f,t);return null===o?(n=new e(t),f.push(n),t.timeout>0&&(n.timer=setTimeout(function(){n.close()},t.timeout)),n.on("close",function(){var e=f.length;for(n.timer&&r.getWin().clearTimeout(n.timer);e--;)f[e]===n&&f.splice(e,1);c()}),n.renderTo(),c()):n=o,n}},d.close=function(){o()&&o().close()},d.getNotifications=function(){return f},r.on("SkinLoaded",function(){var e=r.settings.service_message;e&&r.notificationManager.open({text:e,type:"warning",timeout:0,icon:""})})}}),l("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){function r(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=i.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function o(e,t){function n(e){return!e.hidden&&!e.readonly}var o,c;if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(o=r(e,t),e.settings.event_root){if(a||(a={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&a){for(t in a)e.dom.unbind(r(e,t));a=null}})),a[t])return;c=function(r){for(var o=r.target,a=e.editorManager.editors,c=a.length;c--;){var l=a[c].getBody();(l===o||i.isChildOf(o,l))&&n(a[c])&&a[c].fire(t,r)}},a[t]=c,i.bind(o,t,c)}else c=function(r){n(e)&&e.fire(t,r)},i.bind(o,t,c),e.delegates[t]=c}var i=t.DOM,a,c={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){o(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?o(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(r(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e=this,t;if(e.delegates){for(t in e.delegates)e.dom.unbind(r(e,t),t,e.delegates[t]);delete e.delegates}e.inline||(e.getBody().onload=null,e.dom.unbind(e.getWin()),e.dom.unbind(e.getDoc())),e.dom.unbind(e.getBody()),e.dom.unbind(e.getContainer())}};return c=n.extend({},e,c)}),l("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each,r=e.explode,o={f9:120,f10:121,f11:122},i=e.makeMap("alt,ctrl,shift,meta,access");return function(a){function c(e){var a,c,l={};n(r(e,"+"),function(e){e in i?l[e]=!0:/^[0-9]{2,}$/.test(e)?l.keyCode=parseInt(e,10):(l.charCode=e.charCodeAt(0),l.keyCode=o[e]||e.toUpperCase().charCodeAt(0))}),a=[l.keyCode];for(c in i)l[c]?a.push(c):l[c]=!1;return l.id=a.join(","),l.access&&(l.alt=!0,t.mac?l.ctrl=!0:l.shift=!0),l.meta&&(t.mac?l.meta=!0:(l.ctrl=!0,l.meta=!1)),l}function l(t,n,o,i){var l;return l=e.map(r(t,">"),c),l[l.length-1]=e.extend(l[l.length-1],{func:o,scope:i||a}),e.extend(l[0],{desc:a.translate(n),subpatterns:l.slice(1)})}function s(e){return e.altKey||e.ctrlKey||e.metaKey}function u(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}function d(e,t){return!!t&&(t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&(t.alt==e.altKey&&t.shift==e.shiftKey&&(!!(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),!0))))}function f(e){return e.func?e.func.call(e.scope):null}var m=this,p={},g=[];a.on("keyup keypress keydown",function(e){!s(e)&&!u(e)||e.isDefaultPrevented()||(n(p,function(t){if(d(e,t))return g=t.subpatterns.slice(0),"keydown"==e.type&&f(t),!0}),d(e,g[0])&&(1===g.length&&"keydown"==e.type&&f(g[0]),g.shift()))}),m.add=function(t,o,i,c){var s;return s=i,"string"==typeof i?i=function(){a.execCommand(s,!1,null)}:e.isArray(s)&&(i=function(){a.execCommand(s[0],s[1],s[2])}),n(r(e.trim(t.toLowerCase())),function(e){var t=l(e,o,i,c);p[t.id]=t}),!0},m.remove=function(e){var t=l(e);return!!p[t.id]&&(delete p[t.id],!0)}}}),l("tinymce.core.EditorSettings",["tinymce.core.util.Tools"],function(e){return{getEditorSettings:function(t,n,r,o,i){return i=e.extend({id:n,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:r,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:t.convertURL,url_converter_scope:t,ie7_compat:!0},o,i,{validate:!0,content_editable:i.inline}),o&&o.external_plugins&&i.external_plugins&&(i.external_plugins=e.extend({},o.external_plugins,i.external_plugins)),i}}}),d("global!window",window),l("tinymce.core.ErrorReporter",["tinymce.core.AddOnManager"],function(e){var t=e.PluginManager,n=function(e,n){for(var r in t.urls){if(t.urls[r]+"/plugin"+n+".js"===e)return r}return null},r=function(e,t){var r=n(t,e.suffix);return r?"Failed to load plugin: "+r+" from url "+t:"Failed to load plugin url: "+t},o=function(e,t){e.notificationManager.open({type:"error",text:t})},i=function(e,t){e._skinLoaded?o(e,t):e.on("SkinLoaded",function(){o(e,t)})},a=function(e,t){i(e,"Failed to upload image: "+t)};return{pluginLoadError:function(e,t){i(e,r(e,t))},uploadError:a,displayError:i,contentCssError:function(e,t){i(e,"Failed to load content css: "+t[0])},initError:function(e){var t=window.console;t&&!window.test&&(t.error?t.error.apply(t,arguments):t.log.apply(t,arguments))}}}),l("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","tinymce.core.caret.CaretContainer"],function(e,t){var n=function(e){return e.dom.select("*[data-mce-caret]")[0]},r=function(e){e.selection.setRng(e.selection.getRng())},o=function(e,n){n.hasAttribute("data-mce-caret")&&(t.showCaretContainerBlock(n),r(e),e.selection.scrollIntoView(n))},i=function(e,r){var i=n(e);if(i)return"compositionstart"===r.type?(r.preventDefault(),r.stopPropagation(),void o(i)):void(t.hasContent(i)&&o(e,i))};return{setup:function(t){t.on("keyup compositionstart",e.curry(i,t))}}}),l("tinymce.core.file.Uploader",["tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.Fun"],function(e,t,n){return function(n,r){function o(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}function i(e,t,n,i){var a,c;a=new XMLHttpRequest,a.open("POST",r.url),a.withCredentials=r.credentials,a.upload.onprogress=function(e){i(e.loaded/e.total*100)},a.onerror=function(){n("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var e;return a.status<200||a.status>=300?void n("HTTP Error: "+a.status):(e=JSON.parse(a.responseText))&&"string"==typeof e.location?void t(o(r.basePath,e.location)):void n("Invalid JSON: "+a.responseText)},c=new FormData,c.append("file",e.blob(),e.filename()),a.send(c)}function a(){return new e(function(e){e([])})}function c(e,t){return{url:t,blobInfo:e,status:!0}}function l(e,t){return{url:"",blobInfo:e,status:!1,error:t}}function s(e,n){t.each(g[e],function(e){e(n)}),delete g[e]}function u(t,r,o){return n.markPending(t.blobUri()),new e(function(e){var i,a,u=function(){};try{var d=function(){i&&(i.close(),a=u)},f=function(r){d(),n.markUploaded(t.blobUri(),r),s(t.blobUri(),c(t,r)),e(c(t,r))},m=function(r){d(),n.removeFailed(t.blobUri()),s(t.blobUri(),l(t,r)),e(l(t,r))};a=function(e){e<0||e>100||(i||(i=o()),i.progressBar.value(e))},r(t,f,m,a)}catch(n){e(l(t,n.message))}})}function d(e){return e===i}function f(t){var n=t.blobUri();return new e(function(e){g[n]=g[n]||[],g[n].push(e)})}function m(o,i){return o=t.grep(o,function(e){return!n.isUploaded(e.blobUri())}),e.all(t.map(o,function(e){return n.isPending(e.blobUri())?f(e):u(e,r.handler,i)}))}function p(e,t){return!r.url&&d(r.handler)?a():m(e,t)}var g={};return r=t.extend({credentials:!1,handler:i},r),{upload:p}}}),l("tinymce.core.file.Conversions",["tinymce.core.util.Promise"],function(e){function t(t){return new e(function(e,n){var r=function(){n("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="blob",o.onload=function(){200==this.status?e(this.response):r()},o.onerror=r,o.send()}catch(e){r()}})}function n(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}}function r(t){return new e(function(e){var r,o,i;t=n(t);try{r=atob(t.data)}catch(t){return void e(new Blob([]))}for(o=new Uint8Array(r.length),i=0;i<o.length;i++)o[i]=r.charCodeAt(i);e(new Blob([o],{type:t.type}))})}function o(e){return 0===e.indexOf("blob:")?t(e):0===e.indexOf("data:")?r(e):null}function i(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}return{uriToBlob:o,blobToDataUri:i,parseDataUri:n}}),l("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(e,t,n,r,o){var i=0,a=function(e){return(e||"blobid")+i++},c=function(e,t,n,o){var i,c;if(0===t.src.indexOf("blob:"))return c=e.getByUri(t.src),void(c?n({image:t,blobInfo:c}):r.uriToBlob(t.src).then(function(o){r.blobToDataUri(o).then(function(l){i=r.parseDataUri(l).data,c=e.create(a(),o,i),e.add(c),n({image:t,blobInfo:c})})},function(e){o(e)}));i=r.parseDataUri(t.src).data,c=e.findFirst(function(e){return e.base64()===i}),c?n({image:t,blobInfo:c}):r.uriToBlob(t.src).then(function(r){c=e.create(a(),r,i),e.add(c),n({image:t,blobInfo:c})},function(e){o(e)})},l=function(e){return e?e.getElementsByTagName("img"):[]};return function(r,i){function a(a,u){var d,f;return u||(u=n.constant(!0)),d=t.filter(l(a),function(e){var t=e.src;return!!o.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!t||t==o.transparentSrc)&&(0===t.indexOf("blob:")?!r.isUploaded(t):0===t.indexOf("data:")&&u(e)))))}),f=t.map(d,function(t){var n;return s[t.src]?new e(function(e){s[t.src].then(function(n){if("string"==typeof n)return n;e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e,n){c(i,t,e,n)}).then(function(e){return delete s[e.image.src],e}).catch(function(e){return delete s[t.src],e}),s[t.src]=n,n)}),e.all(f)}var s={};return{findAll:a}}}),l("tinymce.core.util.Uuid",[],function(){var e=0,t=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()};return{uuid:function(n){return n+e+++t()}}}),d("global!URL",URL),l("tinymce.core.file.BlobCache",["tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Uuid","global!URL"],function(e,t,n,r){return function(){function o(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"}function i(e,t,n,r){return a("object"==typeof e?e:{id:e,name:r,blob:t,base64:n})}function a(e){var t,i;if(!e.blob||!e.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";return t=e.id||n.uuid("blobid"),i=e.name||t,{id:p(t),name:p(i),filename:p(i+"."+o(e.blob.type)),blob:p(e.blob),base64:p(e.base64),blobUri:p(e.blobUri||r.createObjectURL(e.blob)),uri:p(e.uri)}}function c(e){l(e.id())||m.push(e)}function l(e){return s(function(t){return t.id()===e})}function s(t){return e.filter(m,t)[0]}function u(e){return s(function(t){return t.blobUri()==e})}function d(t){m=e.filter(m,function(e){return e.blobUri()!==t||(r.revokeObjectURL(e.blobUri()),!1)})}function f(){e.each(m,function(e){r.revokeObjectURL(e.blobUri())}),m=[]}var m=[],p=t.constant;return{create:i,add:c,get:l,getByUri:u,findFirst:s,removeByUri:d,destroy:f}}}),l("tinymce.core.file.UploadStatus",[],function(){return function(){function e(e,t){return{status:e,resultUri:t}}function t(e){return e in d}function n(e){var t=d[e];return t?t.resultUri:null}function r(e){return!!t(e)&&d[e].status===s}function o(e){return!!t(e)&&d[e].status===u}function i(t){d[t]=e(s,null)}function a(t,n){d[t]=e(u,n)}function c(e){delete d[e]}function l(){d={}}var s=1,u=2,d={};return{hasBlobUri:t,getResultUri:n,isPending:r,isUploaded:o,markPending:i,markUploaded:a,removeFailed:c,destroy:l}}}),l("tinymce.core.EditorUpload",["tinymce.core.util.Arr","tinymce.core.file.Uploader","tinymce.core.file.ImageScanner","tinymce.core.file.BlobCache","tinymce.core.file.UploadStatus","tinymce.core.ErrorReporter"],function(e,t,n,r,o,i){return function(a){function c(e){return function(t){return a.selection?e(t):[]}}function l(){return"?"+(new Date).getTime()}function s(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e}function u(e,t,n){return e=s(e,'src="'+t+'"','src="'+n+'"'),e=s(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')}function d(t,n){e.each(a.undoManager.data,function(r){"fragmented"===r.type?r.fragments=e.map(r.fragments,function(e){return u(e,t,n)}):r.content=u(r.content,t,n)})}function f(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}function m(e,t){x.removeByUri(e.src),d(e.src,t),a.$(e).attr({src:T.images_reuse_filename?t+l():t,"data-mce-src":a.convertURL(t,"src")})}function p(n){return C||(C=new t(k,{url:T.images_upload_url,basePath:T.images_upload_base_path,credentials:T.images_upload_credentials,handler:T.images_upload_handler})),v().then(c(function(t){var r;return r=e.map(t,function(e){return e.blobInfo}),C.upload(r,f).then(c(function(r){var o=e.map(r,function(e,n){var r=t[n].image;return e.status&&!1!==a.settings.images_replace_blob_uris?m(r,e.url):e.error&&i.uploadError(a,e.error),{element:r,status:e.status}});return n&&n(o),o}))}))}function g(e){if(!1!==T.automatic_uploads)return p(e)}function h(e){return!T.images_dataimg_filter||T.images_dataimg_filter(e)}function v(){return w||(w=new n(k,x)),w.findAll(a.getBody(),h).then(c(function(t){return t=e.filter(t,function(e){return"string"!=typeof e||(i.displayError(a,e),!1)}),e.each(t,function(e){d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))}function y(){x.destroy(),k.destroy(),w=C=null}function b(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=k.getResultUri(n);if(r)return'src="'+r+'"';var o=x.getByUri(n);return o||(o=e.reduce(a.editorManager.editors,function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':t})}var x=new r,C,w,T=a.settings,k=new o;return a.on("setContent",function(){!1!==a.settings.automatic_uploads?g():v()}),a.on("RawSaveContent",function(e){e.content=b(e.content)}),a.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=b(e.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(!x.getByUri(t)){var n=k.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:x,uploadImages:p,uploadImagesAuto:g,scanForImages:v,destroy:y}}}),l("tinymce.core.ForceBlocks",["ephox.katamari.api.Fun"],function(e){var t=function(e){var t=e.settings,n=e.dom,r=e.selection,o=e.schema,i=o.getBlockElements(),a=r.getStart(),c=e.getBody(),l,s,u,d,f,m,p,g=-16777215,h,v,y,b,x;if(x=t.forced_root_block,a&&1===a.nodeType&&x){for(;a&&a!==c;){if(i[a.nodeName])return;a=a.parentNode}if(l=r.getRng(),l.setStart){s=l.startContainer,u=l.startOffset,d=l.endContainer,f=l.endOffset;try{v=e.getDoc().activeElement===c}catch(e){}}else l.item&&(a=l.item(0),l=e.getDoc().body.createTextRange(),l.moveToElementText(a)),v=l.parentElement().ownerDocument===e.getDoc(),y=l.duplicate(),y.collapse(!0),u=-1*y.move("character",g),y.collapsed||(y=l.duplicate(),y.collapse(!1),f=-1*y.move("character",g)-u);for(a=c.firstChild,b=c.nodeName.toLowerCase();a;)if((3===a.nodeType||1==a.nodeType&&!i[a.nodeName])&&o.isValidChild(b,x.toLowerCase())){if(3===a.nodeType&&0===a.nodeValue.length){p=a,a=a.nextSibling,n.remove(p);continue}m||(m=n.create(x,e.settings.forced_root_block_attrs),a.parentNode.insertBefore(m,a),h=!0),p=a,a=a.nextSibling,m.appendChild(p)}else m=null,a=a.nextSibling;if(h&&v){if(l.setStart)l.setStart(s,u),l.setEnd(d,f),r.setRng(l);else try{l=e.getDoc().body.createTextRange(),l.moveToElementText(c),l.collapse(!0),l.moveStart("character",u),f>0&&l.moveEnd("character",f),l.select()}catch(e){}e.nodeChanged()}}};return{setup:function(n){n.settings.forced_root_block&&n.on("NodeChange",e.curry(t,n))}}}),l("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(e,t,n){function r(o){function i(t){return e.map(t,function(e){return e=n.clone(e),e.node=o,e})}if(e.isArray(o))return e.reduce(o,function(e,t){return e.concat(r(t))},[]);if(t.isElement(o))return i(o.getClientRects());if(t.isText(o)){var a=o.ownerDocument.createRange();return a.setStart(o,0),a.setEnd(o,o.data.length),i(a.getClientRects())}}return{getClientRects:r}}),l("tinymce.core.caret.LineUtils",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.Dimensions","tinymce.core.geom.ClientRect","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,o,i,a){function c(e,t){return Math.abs(e.left-t)}function l(e,t){return Math.abs(e.right-t)}function s(e,n){function r(e,t){return e>=t.left&&e<=t.right}return t.reduce(e,function(e,t){var o,i;return o=Math.min(c(e,n),l(e,n)),i=Math.min(c(t,n),l(t,n)),r(n,t)?t:r(n,e)?e:i==o&&g(t.node)?t:i<o?t:e})}function u(e,t,n,r){for(;r=h(r,e,a.isEditableCaretCandidate,t);)if(n(r))return}function d(e,n){function i(e,o){var i;return i=t.filter(r.getClientRects(o),function(t){return!e(t,n)}),a=a.concat(i),0===i.length}var a=[];return a.push(n),u(-1,e,v(i,o.isAbove),n.node),u(1,e,v(i,o.isBelow),n.node),a}function f(e){return t.filter(t.toArray(e.getElementsByTagName("*")),g)}function m(e,t){return{node:e.node,before:c(e,t)<l(e,t)}}function p(e,n,o){var i,a;return i=r.getClientRects(f(e)),i=t.filter(i,function(e){return o>=e.top&&o<=e.bottom}),a=s(i,n),a&&(a=s(d(e,a),n))&&g(a.node)?m(a,n):null}var g=n.isContentEditableFalse,h=i.findNode,v=e.curry;return{findClosestClientRect:s,findLineNodeRects:d,closestCaret:p}}),l("tinymce.core.caret.LineWalker",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.Dimensions","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition","tinymce.core.geom.ClientRect"],function(e,t,n,r,o,i,a,c){function l(e,t,n,i){for(;i=o.findNode(i,e,r.isEditableCaretCandidate,t);)if(n(i))return}function s(e,r,o,i,a,c){function s(i){var c,l,s;for(s=n.getClientRects(i),-1==e&&(s=s.reverse()),c=0;c<s.length;c++)if(l=s[c],!o(l,m)){if(f.length>0&&r(l,t.last(f))&&u++,l.line=u,a(l))return!0;f.push(l)}}var u=0,d,f=[],m;return(m=t.last(c.getClientRects()))?(d=c.getNode(),s(d),l(e,i,s,d),f):f}function u(e,t){return t.line>e}function d(e,t){return t.line===e}function f(e,n,r,o){function l(e){return t.last(e.getClientRects())}var s=new i(n),u,d,f,m,p=[],g=0,h,v;1==e?(u=s.next,d=c.isBelow,f=c.isAbove,m=a.after(o)):(u=s.prev,d=c.isAbove,f=c.isBelow,m=a.before(o)),v=l(m);do{if(m.isVisible()&&(h=l(m),!f(h,v))){if(p.length>0&&d(h,t.last(p))&&g++,h=c.clone(h),h.position=m,h.line=g,r(h))return p;p.push(h)}}while(m=u(m));return p}var m=e.curry;return{upUntil:m(s,-1,c.isAbove,c.isBelow),downUntil:m(s,1,c.isBelow,c.isAbove),positionsUntil:f,isAboveLine:m(u),isLine:m(d)}}),l("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(e,t,n,r){var o=n.isContentEditableTrue,i=n.isContentEditableFalse,a=function(e,t,n,r){return t._selectionOverrides.showCaret(e,n,r)},c=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},l=function(e,t){var n;return n=e.fire("BeforeObjectSelected",{target:t}),n.isDefaultPrevented()?null:c(t)},s=function(n,c){var l,s;return c=t.normalizeRange(1,n.getBody(),c),l=e.fromRangeStart(c),i(l.getNode())?a(1,n,l.getNode(),!l.isAtEnd()):i(l.getNode(!0))?a(1,n,l.getNode(!0),!1):(s=n.dom.getParent(l.getNode(),r.or(i,o)),i(s)?a(1,n,s,!1):null)};return{showCaret:a,selectNode:l,renderCaretAtRange:s,renderRangeCaret:function(e,t){var n;return t&&t.collapsed?(n=s(e,t))||t:t}}}),l("tinymce.core.keyboard.CefNavigation",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.LineUtils","tinymce.core.caret.LineWalker","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.keyboard.CefUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,o,i,a,c,l,s,u,d){var f=a.isContentEditableFalse,m=c.getSelectedNode,p=n.isAfterContentEditableFalse,g=n.isBeforeContentEditableFalse,h=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},v=function(e,t){var r=n.isInSameBlock(e,t);return!(r||!a.isBr(e.getNode()))||r},y=function(t){return e.isCaretContainerBlock(t.startContainer)},b=function(e,r,o){return o=n.normalizeRange(e,r,o),-1===e?t.fromRangeStart(o):t.fromRangeEnd(o)},x=function(e,t,n,r,o){var i,a,c,l;return!o.collapsed&&(i=m(o),f(i))?s.showCaret(e,t,i,-1===e):(l=y(o),a=b(e,t.getBody(),o),r(a)?s.selectNode(t,a.getNode(-1===e)):(a=n(a))?r(a)?s.showCaret(e,t,a.getNode(-1===e),1===e):(c=n(a),r(c)&&v(a,c)?s.showCaret(e,t,c.getNode(-1===e),1===e):l?s.renderRangeCaret(t,a.toRange()):null):l?o:null)},C=function(e,t,n,r){var a,c,l,d,h,v,y,x,C;if(C=m(r),a=b(e,t.getBody(),r),c=n(t.getBody(),i.isAboveLine(1),a),l=u.filter(c,i.isLine(1)),h=u.last(a.getClientRects()),g(a)&&(C=a.getNode()),p(a)&&(C=a.getNode(!0)),!h)return null;if(v=h.left,(d=o.findClosestClientRect(l,v))&&f(d.node))return y=Math.abs(v-d.left),x=Math.abs(v-d.right),s.showCaret(e,t,d.node,y<x);if(C){var w=i.positionsUntil(e,t.getBody(),i.isAboveLine(1),C);if(d=o.findClosestClientRect(u.filter(w,i.isLine(1)),v))return s.renderRangeCaret(t,d.position.toRange());if(d=u.last(u.filter(w,i.isLine(0))))return s.renderRangeCaret(t,d.position.toRange())}},w=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!l.ie||l.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},T=function(e,n,o){var i,a,c,l=new r(e.getBody()),s=d.curry(h,l.next),u=d.curry(h,l.prev);if(o.collapsed&&e.settings.forced_root_block){if(!(i=e.dom.getParent(o.startContainer,"PRE")))return;a=1===n?s(t.fromRangeStart(o)):u(t.fromRangeStart(o)),a||(c=w(e),1===n?e.$(i).after(c):e.$(i).before(c),e.selection.select(c,!0),e.selection.collapse())}},k=function(e,t){var n=new r(e.getBody()),o=d.curry(h,n.next),i=d.curry(h,n.prev),a,c=t?1:-1,l=t?o:i,s=t?g:p,u=e.selection.getRng();return(a=x(c,e,l,s,u))?a:(a=T(e,c,u))||null},E=function(e,t){var n,r=t?1:-1,o=t?i.downUntil:i.upUntil,a=e.selection.getRng();return(n=C(r,e,o,a))?n:(n=T(e,r,a))||null};return{moveH:function(e,t){return function(){var n=k(e,t);return!!n&&(e.selection.setRng(n),!0)}},moveV:function(e,t){return function(){var n=E(e,t);return!!n&&(e.selection.setRng(n),!0)}}}}),l("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e,t){return t},o=function(t,n){return e.isObject(t)&&e.isObject(n)?a(t,n):n},i=function(e){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new n("Can't merge zero objects");for(var i={},a=0;a<r.length;a++){var c=r[a];for(var l in c)c.hasOwnProperty(l)&&(i[l]=e(i[l],c[l]))}return i}},a=i(o),c=i(r);return{deepMerge:a,merge:c}}),l("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(e,t,n){var r=function(r){return e.map(r,function(e){return n.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t.noop},e)})},o=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey};return{match:function(t,n){return e.bind(r(t),function(e){return o(e,n)?[e]:[]})},action:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}}}),l("tinymce.core.keyboard.ArrowKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r,o,i){var a=function(t,a,c){var l=o.match([{keyCode:i.RIGHT,action:r.moveH(t,!0)},{keyCode:i.LEFT,action:r.moveH(t,!1)},{keyCode:i.UP,action:r.moveV(t,!1)},{keyCode:i.DOWN,action:r.moveV(t,!0)},{keyCode:i.RIGHT,action:n.move(t,a,!0)},{keyCode:i.LEFT,action:n.move(t,a,!1)}],c);e.find(l,function(e){return e.action()}).each(function(e){c.preventDefault()})};return{setup:function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&a(e,t,n)})}}}),l("tinymce.core.keyboard.DeleteBackspaceKeys",["ephox.katamari.api.Arr","tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r,o,i,a){var c=function(c,l,s){var u=i.match([{keyCode:a.BACKSPACE,action:i.action(r.backspaceDelete,c,!1)},{keyCode:a.DELETE,action:i.action(r.backspaceDelete,c,!0)},{keyCode:a.BACKSPACE,action:i.action(o.backspaceDelete,c,l,!1)},{keyCode:a.DELETE,action:i.action(o.backspaceDelete,c,l,!0)},{keyCode:a.BACKSPACE,action:i.action(n.backspaceDelete,c,!1)},{keyCode:a.DELETE,action:i.action(n.backspaceDelete,c,!0)},{keyCode:a.BACKSPACE,action:i.action(t.backspaceDelete,c,!1)},{keyCode:a.DELETE,action:i.action(t.backspaceDelete,c,!0)}],s);e.find(u,function(e){return e.action()}).each(function(e){s.preventDefault()})},l=function(t,n){var o=i.match([{keyCode:a.BACKSPACE,action:i.action(r.paddEmptyElement,t)},{keyCode:a.DELETE,action:i.action(r.paddEmptyElement,t)}],n);e.find(o,function(e){return e.action()})};return{setup:function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&c(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&l(e,t)})}}}),l("tinymce.core.keyboard.EnterKey",["tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){var c=o.ie&&o.ie<11,l=function(e){return e&&"A"===e.nodeName&&0===a.trim(i.trim(e.innerText||e.textContent)).length},s=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},u=function(e){e.innerHTML=c?"":'<br data-mce-bogus="1">'},d=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},f=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},m=function(e,t,n){var r;e.isBlock(n)&&(r=t.getRng(),n.appendChild(e.create("span",null,"\xa0")),t.select(n),n.lastChild.outerHTML="",t.setRng(r))},p=function(e,t,n){var r=n,o=[],i;if(r){for(;r=r.firstChild;){if(e.isBlock(r))return;1!=r.nodeType||t[r.nodeName.toLowerCase()]||o.push(r)}for(i=o.length;i--;)r=o[i],!r.hasChildNodes()||r.firstChild==r.lastChild&&""===r.firstChild.nodeValue?e.remove(r):l(r)&&e.remove(r)}},g=function(e,n,r){return!1===t.isText(n)?r:e?1===r&&n.data.charAt(r-1)===i.ZWSP?0:r:r===n.data.length-1&&n.data.charAt(r)===i.ZWSP?n.data.length:r},h=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,g(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,g(!1,e.endContainer,e.endOffset)),t},v=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}};return{setup:function(t){function i(i){function T(e){var t,n,i,c=e,s;if(e){if(o.ie&&o.ie<9&&H&&H.firstChild&&H.firstChild==H.lastChild&&"BR"==H.firstChild.tagName&&a.remove(H.firstChild),/^(LI|DT|DD)$/.test(e.nodeName)){var u=v(e.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&e.insertBefore(a.doc.createTextNode("\xa0"),e.firstChild)}if(i=a.createRng(),o.ie||e.normalize(),e.hasChildNodes()){for(t=new r(e,e);n=t.current();){if(3==n.nodeType){i.setStart(n,0),i.setEnd(n,0);break}if(w[n.nodeName.toLowerCase()]){i.setStartBefore(n),i.setEndBefore(n);break}c=n,n=t.next()}n||(i.setStart(c,0),i.setEnd(c,0))}else"BR"==e.nodeName?e.nextSibling&&a.isBlock(e.nextSibling)?((!U||U<9)&&(s=a.create("br"),e.parentNode.insertBefore(s,e)),i.setStartBefore(e),i.setEndBefore(e)):(i.setStartAfter(e),i.setEndAfter(e)):(i.setStart(e,0),i.setEnd(e,0));l.setRng(i),a.remove(s),l.scrollIntoView(e)}}function k(e){var t=y.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&a.setAttribs(e,y.forced_root_block_attrs)}function E(e){var t=L,n,r,o,i=x.getTextInlineElements();if(e||"TABLE"==q||"HR"==q?(n=a.create(e||K),k(n)):n=H.cloneNode(!1),o=n,!1===y.keep_styles)a.setAttrib(n,"style",null),a.setAttrib(n,"class",null);else do{if(i[t.nodeName]){if("_mce_caret"==t.id)continue;r=t.cloneNode(!1),a.setAttrib(r,"id",""),n.hasChildNodes()?(r.appendChild(n.firstChild),n.appendChild(r)):(o=r,n.appendChild(r))}}while((t=t.parentNode)&&t!=O);return c||(o.innerHTML='<br data-mce-bogus="1">'),n}function S(e){var t,n,o,i;if(i=g(e,L,F),3==L.nodeType&&(e?i>0:i<L.nodeValue.length))return!1;if(L.parentNode==H&&Y&&!e)return!0;if(e&&1==L.nodeType&&L==H.firstChild)return!0;if(d(L,"TABLE")||d(L,"HR"))return Y&&!e||!Y&&e;for(t=new r(L,H),3==L.nodeType&&(e&&0===i?t.prev():e||i!=L.nodeValue.length||t.next());n=t.current();){if(1===n.nodeType){if(!n.getAttribute("data-mce-bogus")&&(o=n.nodeName.toLowerCase(),C[o]&&"br"!==o))return!1}else if(3===n.nodeType&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0}function N(e,n){var r,o,i,c,l,u,d=K||"P";if(!(o=a.getParent(e,a.isBlock))||!f(a,o)){if(o=o||O,u=o==t.getBody()||s(o)?o.nodeName.toLowerCase():o.parentNode.nodeName.toLowerCase(),!o.hasChildNodes())return r=a.create(d),k(r),o.appendChild(r),M.setStart(r,0),M.setEnd(r,0),r;for(c=e;c.parentNode!=o;)c=c.parentNode;for(;c&&!a.isBlock(c);)i=c,c=c.previousSibling;if(i&&x.isValidChild(u,d.toLowerCase())){for(r=a.create(d),k(r),i.parentNode.insertBefore(r,i),c=i;c&&!a.isBlock(c);)l=c.nextSibling,r.appendChild(c),c=l;M.setStart(e,n),M.setEnd(e,n)}}return e}function R(){function e(e){for(var t=j[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===H}function n(){var e=j.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:j}if(j!=t.getBody()){var r=j.parentNode.nodeName;/^(OL|UL|LI)$/.test(r)&&(K="LI"),W=K?E(K):a.create("BR"),e(!0)&&e()?"LI"==r?a.insertAfter(W,n()):a.replace(W,j):e(!0)?"LI"==r?(a.insertAfter(W,n()),W.appendChild(a.doc.createTextNode(" ")),W.appendChild(j)):j.parentNode.insertBefore(W,j):e()?(a.insertAfter(W,n()),m(a,l,W)):(j=n(),I=M.cloneRange(),I.setStartAfter(H),I.setEndAfter(j),V=I.extractContents(),"LI"==K&&"LI"==V.firstChild.nodeName?(W=V.firstChild,a.insertAfter(V,j)):(a.insertAfter(V,j),a.insertAfter(W,j))),a.remove(H),T(W),b.add()}}function A(){t.execCommand("InsertLineBreak",!1,i)}function _(e){do{3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}function B(e){var t=a.getRoot(),n,r;for(n=e;n!==t&&"false"!==a.getContentEditable(n);)"true"===a.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==t?r:t}function P(e){var t;c||(e.normalize(),(t=e.lastChild)&&!/^(left|right)$/gi.test(a.getStyle(t,"float",!0))||a.add(e,"br"))}function D(){W=/^(H[1-6]|PRE|FIGURE)$/.test(q)&&"HGROUP"!=$?E(K):E(),y.end_container_on_empty_block&&f(a,j)&&a.isEmpty(H)?W=a.split(j,H):a.insertAfter(W,H),T(W)}var M,I,O,L,F,H,U,z,W,V,j,q,$,K,Y;if(M=l.getRng(!0),!i.isDefaultPrevented()){if(!M.collapsed)return void t.execCommand("Delete");if(new n(a).normalize(M),L=M.startContainer,F=M.startOffset,K=(y.force_p_newlines?"p":"")||y.forced_root_block,K=K?K.toUpperCase():"",U=a.doc.documentMode,z=i.shiftKey,1==L.nodeType&&L.hasChildNodes()&&(Y=F>L.childNodes.length-1,L=L.childNodes[Math.min(F,L.childNodes.length-1)]||L,F=Y&&3==L.nodeType?L.nodeValue.length:0),O=B(L)){if(b.beforeChange(),!a.isBlock(O)&&O!=a.getRoot())return void(K&&!z||A());if((K&&!z||!K&&z)&&(L=N(L,F)),H=a.getParent(L,a.isBlock),j=H?a.getParent(H.parentNode,a.isBlock):null,q=H?H.nodeName.toUpperCase():"",$=j?j.nodeName.toUpperCase():"","LI"!=$||i.ctrlKey||(H=j,q=$),t.undoManager.typing&&(t.undoManager.typing=!1,t.undoManager.add()),/^(LI|DT|DD)$/.test(q)){if(!K&&z)return void A();if(a.isEmpty(H))return void R()}if("PRE"==q&&!1!==y.br_in_pre){if(!z)return void A()}else if(!K&&!z&&"LI"!=q||K&&z)return void A();K&&H===t.getBody()||(K=K||"P",e.isCaretContainerBlock(H)?(W=e.showCaretContainerBlock(H),a.isEmpty(H)&&u(H),T(W)):S()?D():S(!0)?(W=H.parentNode.insertBefore(E(),H),m(a,l,W),T(d(H,"HR")?W:H)):(I=h(M).cloneRange(),I.setEndAfter(H),V=I.extractContents(),_(V),W=V.firstChild,a.insertAfter(V,H),p(a,C,W),P(H),a.isEmpty(H)&&u(H),W.normalize(),a.isEmpty(W)?(a.remove(W),D()):T(W)),a.setAttrib(W,"id",""),t.fire("NewBlock",{newBlock:W}),b.typing=!1,b.add())}}}var a=t.dom,l=t.selection,y=t.settings,b=t.undoManager,x=t.schema,C=x.getNonEmptyElements(),w=x.getMoveCaretBeforeOnEnterElements();t.on("keydown",function(e){13==e.keyCode&&!1!==i(e)&&e.preventDefault()})}}}),l("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation"],function(e,t,n,r){var o=function(e,t){return l(e)&&n.isText(t.container())},i=function(e,t){var n=t.container(),r=t.offset();n.insertData(r,"\xa0"),e.selection.setCursorLocation(n,r+1)},a=function(e,t,n){return!!o(n,t)&&(i(e,t),!0)},c=function(n){var o=t.fromRangeStart(n.selection.getRng());return r.readLocation(n.getBody(),o).map(e.curry(a,n,o)).getOr(!1)},l=function(t){return t.fold(e.constant(!1),e.constant(!0),e.constant(!0),e.constant(!1))};return{insertAtSelection:function(e){return!!e.selection.isCollapsed()&&c(e)}}}),l("tinymce.core.keyboard.SpaceKey",["ephox.katamari.api.Arr","tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r){var o=function(o,i){var a=n.match([{keyCode:r.SPACEBAR,action:n.action(t.insertAtSelection,o)}],i);e.find(a,function(e){return e.action()}).each(function(e){i.preventDefault()})};return{setup:function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&o(e,t)})}}}),l("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(e,t,n,r,o){return{setup:function(i){var a=t.setupSelectedState(i);e.setup(i,a),n.setup(i,a),r.setup(i),o.setup(i)}}}),l("tinymce.core.NodeChange",["tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n){return function(r){function o(e){var t,n;if(n=r.$(e).parentsUntil(r.getBody()).add(e),n.length===a.length){for(t=n.length;t>=0&&n[t]===a[t];t--);if(-1===t)return a=n,!0}return a=n,!1}var i,a=[];"onselectionchange"in r.getDoc()||r.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,o;n=r.selection.getRng(),o={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=t.type&&e.compareRanges(o,i)||r.fire("SelectionChange"),i=o}),r.on("contextmenu",function(){r.fire("SelectionChange")}),r.on("SelectionChange",function(){var e=r.selection.getStart(!0);!t.range&&r.selection.isCollapsed()||!o(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==r.selection.getNode().nodeName?n.setEditorTimeout(r,function(){r.nodeChanged()}):r.nodeChanged())}),this.nodeChanged=function(e){var t=r.selection,n,o,i;r.initialized&&t&&!r.settings.disable_nodechange&&!r.readonly&&(i=r.getBody(),n=t.getStart(!0)||i,n.ownerDocument==r.getDoc()&&r.dom.isChildOf(n,i)||(n=i),o=[],r.dom.getParent(n,function(e){if(e===i)return!0;o.push(e)}),e=e||{},e.element=n,e.parents=o,r.fire("NodeChange",e))}}}),l("tinymce.core.caret.FakeCaret",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.dom.DomQuery","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.geom.ClientRect","tinymce.core.util.Delay"],function(e,t,n,r,o,i,a,c){var l=o.isContentEditableFalse,s=function(e){return e&&/^(TD|TH)$/i.test(e.nodeName)};return function(n,o){function i(e,t){var r=a.collapse(e.getBoundingClientRect(),t),o,i,c,l,s;return"BODY"==n.tagName?(o=n.ownerDocument.documentElement,i=n.scrollLeft||o.scrollLeft,c=n.scrollTop||o.scrollTop):(s=n.getBoundingClientRect(),i=n.scrollLeft-s.left,c=n.scrollTop-s.top),r.left+=i,r.right+=i,r.top+=c,r.bottom+=c,r.width=1,l=e.offsetWidth-e.clientWidth,l>0&&(t&&(l*=-1),r.left+=l,r.right+=l),r}function u(){var t,o,i,a,c;for(t=r("*[contentEditable=false]",n),a=0;a<t.length;a++)o=t[a],i=o.previousSibling,e.endsWithCaretContainer(i)&&(c=i.data,1==c.length?i.parentNode.removeChild(i):i.deleteData(c.length-1,1)),i=o.nextSibling,e.startsWithCaretContainer(i)&&(c=i.data,1==c.length?i.parentNode.removeChild(i):i.deleteData(0,1));return null}function d(t,a){var c,u;return f(),s(a)?null:o(a)?(y=e.insertBlock("p",a,t),c=i(a,t),r(y).css("top",c.top),v=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(c).appendTo(n),t&&v.addClass("mce-visual-caret-before"),m(),u=a.ownerDocument.createRange(),u.setStart(y,0),u.setEnd(y,0),u):(y=e.insertInline(a,t),u=a.ownerDocument.createRange(),l(y.nextSibling)?(u.setStart(y,0),u.setEnd(y,0)):(u.setStart(y,1),u.setEnd(y,1)),u)}function f(){u(),y&&(t.remove(y),y=null),v&&(v.remove(),v=null),clearInterval(h)}function m(){h=c.setInterval(function(){r("div.mce-visual-caret",n).toggleClass("mce-visual-caret-hidden")},500)}function p(){c.clearInterval(h)}function g(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"}var h,v,y;return{show:d,hide:f,getCss:g,destroy:p}}});l("tinymce.core.dom.MousePosition",[],function(){var e=function(e){var t,n,r,o;return o=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,r=t.defaultView,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}},t=function(t){return t.inline?e(t.getBody()):{left:0,top:0}},n=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:o},o=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var o=e(t.getContentAreaContainer()),i=r(t);return{left:n.pageX-o.left+i.left,top:n.pageY-o.top+i.top}}return{left:n.pageX,top:n.pageY}},i=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}};return{calc:function(e,r){return i(t(e),n(e),o(e,r))}}}),l("tinymce.core.DragDropOverrides",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Delay","tinymce.core.dom.DOMUtils","tinymce.core.dom.MousePosition"],function(e,t,n,r,o,i){var a=e.isContentEditableFalse,c=e.isContentEditableTrue,l=function(e,t){return a(t)&&t!==e},s=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!a(t)},u=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},d=function(e,t,n,r){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:r}),e.dom.setAttrib(o,"data-mce-selected",null);var i=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),i.appendChild(o),i},f=function(e,t){e.parentNode!==t&&t.appendChild(e)},m=function(e,t,n,r,o,i){var a=0,c=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(a=t.pageX+n-o),t.pageY+r>i&&(c=t.pageY+r-i),e.style.width=n-a+"px",e.style.height=r-c+"px"},p=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},g=function(e){return 0===e.button},h=function(e){return e.element},v=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},y=function(e,r){return function(o){if(g(o)){var i=t.find(r.dom.getParents(o.target),n.or(a,c));if(l(r.getBody(),i)){var s=r.dom.getPos(i),u=r.getBody(),f=r.getDoc().documentElement;e.element=i,e.screenX=o.screenX,e.screenY=o.screenY,e.maxX=(r.inline?u.scrollWidth:f.offsetWidth)-2,e.maxY=(r.inline?u.scrollHeight:f.offsetHeight)-2,e.relX=o.pageX-s.x,e.relY=o.pageY-s.y,e.width=i.offsetWidth,e.height=i.offsetHeight,e.ghost=d(r,i,e.width,e.height)}}}},b=function(e,t){var n=r.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var o=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(h(e)&&!e.dragging&&o>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var a=v(e,i.calc(t,r));f(e.ghost,t.getBody()),m(e.ghost,a,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}},x=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},C=function(e,t){return function(n){if(e.dragging&&s(t,x(t.selection),e.element)){var r=u(e.element),o=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(r=o.targetClone,t.undoManager.transact(function(){p(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}T(e)}},w=function(e,t){return function(){T(e),e.dragging&&t.fire("dragend")}},T=function(e){e.dragging=!1,e.element=null,p(e.ghost)},k=function(e){var t={},n,r,i,a,c,l;n=o.DOM,l=document,r=y(t,e),i=b(t,e),a=C(t,e),c=w(t,e),e.on("mousedown",r),e.on("mousemove",i),e.on("mouseup",a),n.bind(l,"mousemove",i),n.bind(l,"mouseup",c),e.on("remove",function(){n.unbind(l,"mousemove",i),n.unbind(l,"mouseup",c)})},E=function(e){e.on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(a(n)||a(e.dom.getContentEditableParent(n)))&&t.preventDefault()})};return{init:function(e){k(e),E(e)}}}),l("ephox.sugar.impl.Style",[],function(){return{isSupported:function(e){return void 0!==e.style}}}),l("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,o,i,a,c,l,s,u,d,f){var m=function(t,n,r){if(!e.isString(r))throw d.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new u("CSS value must be a string: "+r);l.isSupported(t)&&t.style.setProperty(n,r)},p=function(e,t){l.isSupported(e)&&e.style.removeProperty(t)},g=function(e,t,n){var r=e.dom();m(r,t,n)},h=function(e,t){var r=e.dom();n.each(t,function(e,t){m(r,t,e)})},v=function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){p(r,t)},function(e){m(r,t,e)})})},y=function(e,t){var n=e.dom(),r=f.getComputedStyle(n),o=r.getPropertyValue(t),a=""!==o||i.inBody(e)?o:b(n,t);return null===a?void 0:a},b=function(e,t){return l.isSupported(e)?e.style.getPropertyValue(t):""},x=function(e,t){var n=e.dom(),o=b(n,t);return r.from(o).filter(function(e){return e.length>0})},C=function(e,t,n){var r=a.fromTag(e);return g(r,t,n),x(r,t).isSome()},w=function(e,t){var n=e.dom();p(n,t),o.has(e,"style")&&""===s.trim(o.get(e,"style"))&&o.remove(e,"style")},T=function(e,t){var n=o.get(e,"style"),r=t(e);return(void 0===n?o.remove:o.set)(e,"style",n),r},k=function(e,t,n){x(e,n).each(function(e){x(t,n).isNone()&&g(t,n,e)})};return{copy:function(e,t){var n=e.dom(),r=t.dom();l.isSupported(n)&&l.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:g,preserve:T,setAll:h,setOptions:v,remove:w,get:y,getRaw:x,isValidValue:C,reflow:function(e){return e.dom().offsetWidth},transfer:function(e,n,r){c.isElement(e)&&c.isElement(n)&&t.each(r,function(t){k(e,n,t)})}}}),l("tinymce.core.EditorView",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Css","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(e,t){return t.dom()[e]},i=function(e,t){return parseInt(n.get(t,e),10)},a=e.curry(o,"clientWidth"),c=e.curry(o,"clientHeight"),l=e.curry(i,"margin-top"),s=e.curry(i,"margin-left"),u=function(e){return e.dom().getBoundingClientRect()},d=function(e,t,n){var r=a(e),o=c(e);return t>=0&&n>=0&&t<=r&&n<=o},f=function(e,t,n,r){var o=u(t);return{x:n-(e?o.left+t.dom().clientLeft+s(t):0),y:r-(e?o.top+t.dom().clientTop+l(t):0)}};return{isXYInContentArea:function(e,n,o){var i=t.fromDom(e.getBody()),a=e.inline?i:r.documentElement(i),c=f(e.inline,a,n,o);return d(a,c.x,c.y)}}}),l("tinymce.core.SelectionOverrides",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.FakeCaret","tinymce.core.caret.LineUtils","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.DragDropOverrides","tinymce.core.EditorView","tinymce.core.Env","tinymce.core.keyboard.CefUtils","tinymce.core.util.Delay","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m){function p(a){function p(e){return a.dom.hasClass(e,"mce-offscreen-selection")}function b(){var e=a.dom.get(L);return e?e.getElementsByTagName("*")[0]:e}function x(e){return a.dom.isBlock(e)}function C(e){e&&a.selection.setRng(e)}function w(){return a.selection.getRng()}function T(e,t){a.selection.scrollIntoView(e,t)}function k(e,t,n){var r;return r=a.fire("ShowCaret",{target:t,direction:e,before:n}),r.isDefaultPrevented()?null:(T(t,-1===e),O.show(n,t))}function E(e,r){return r=n.normalizeRange(e,I,r),-1==e?t.fromRangeStart(r):t.fromRangeEnd(r)}function S(t){t.hasAttribute("data-mce-caret")&&(e.showCaretContainerBlock(t),C(w()),T(t[0]))}function N(){function e(e){for(var t=a.getBody();e&&e!=t;){if(g(e)||h(e))return e;e=e.parentNode}return null}function n(t){var n=!1;t.on("touchstart",function(){n=!1}),t.on("touchmove",function(){n=!0}),t.on("touchend",function(r){var o=e(r.target);h(o)&&(n||(r.preventDefault(),B(d.selectNode(t,o))))})}a.on("mouseup",function(e){var t=w();t.collapsed&&s.isXYInContentArea(a,e.clientX,e.clientY)&&C(d.renderCaretAtRange(a,t))}),a.on("click",function(t){var n;(n=e(t.target))&&(h(n)&&(t.preventDefault(),a.focus()),g(n)&&a.dom.isChildOf(n,a.selection.getNode())&&P())}),a.on("blur NewBlock",function(){P(),M()});var o=function(e){var n=new r(e);if(!e.firstChild)return!1;var o=t.before(e.firstChild),i=n.next(o);return i&&!y(i)&&!v(i)},x=function(e,t){return a.dom.getParent(e,a.dom.isBlock)===a.dom.getParent(t,a.dom.isBlock)},T=function(e,t){var n=a.dom.getParent(e,a.dom.isBlock),r=a.dom.getParent(t,a.dom.isBlock);return n&&!x(n,r)&&o(n)};n(a),a.on("mousedown",function(t){var n;if(!1!==s.isXYInContentArea(a,t.clientX,t.clientY))if(n=e(t.target))h(n)?(t.preventDefault(),B(d.selectNode(a,n))):(P(),g(n)&&t.shiftKey||c.isXYWithinRange(t.clientX,t.clientY,a.selection.getRng())||a.selection.placeCaretAt(t.clientX,t.clientY));else{P(),M();var r=i.closestCaret(I,t.clientX,t.clientY);r&&(T(t.target,r.node)||(t.preventDefault(),a.getBody().focus(),C(k(1,r.node,r.before))))}}),a.on("keypress",function(e){m.modifierPressed(e)||(e.keyCode,h(a.selection.getNode())&&e.preventDefault())}),a.on("getSelectionRange",function(e){var t=e.range;if(F){if(!F.parentNode)return void(F=null);t=t.cloneRange(),t.selectNode(F),e.range=t}}),a.on("setSelectionRange",function(e){var t;(t=B(e.range,e.forward))&&(e.range=t)}),a.on("AfterSetSelectionRange",function(e){var t=e.range;_(t)||M(),p(t.startContainer.parentNode)||P()}),a.on("focus",function(){f.setEditorTimeout(a,function(){a.selection.setRng(d.renderRangeCaret(a,a.selection.getRng()))},0)}),a.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!u.ie){var n=b();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),l.init(a)}function R(){var e=a.contentStyles,t=".mce-content-body";e.push(O.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")}function A(t){return e.isCaretContainer(t)||e.startsWithCaretContainer(t)||e.endsWithCaretContainer(t)}function _(e){return A(e.startContainer)||A(e.endContainer)}function B(e,t){var n,r=a.$,o=a.dom,i,c,l,s,d,f,m,p,g;if(!e)return null;if(e.collapsed){if(!_(e))if(!1===t){if(m=E(-1,e),h(m.getNode(!0)))return k(-1,m.getNode(!0),!1);if(h(m.getNode()))return k(-1,m.getNode(),!m.isAtEnd())}else{if(m=E(1,e),h(m.getNode()))return k(1,m.getNode(),!m.isAtEnd());if(h(m.getNode(!0)))return k(1,m.getNode(!0),!1)}return null}return l=e.startContainer,s=e.startOffset,d=e.endOffset,3==l.nodeType&&0==s&&h(l.parentNode)&&(l=l.parentNode,s=o.nodeIndex(l),l=l.parentNode),1!=l.nodeType?null:(d==s+1&&(n=l.childNodes[s]),h(n)?(p=g=n.cloneNode(!0),f=a.fire("ObjectSelected",{target:n,targetClone:p}),f.isDefaultPrevented()?null:(p=f.targetClone,i=r("#"+L),0===i.length&&(i=r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",L),i.appendTo(a.getBody())),e=a.dom.createRng(),p===g&&u.ie?(i.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(p),e.setStartAfter(i[0].firstChild.firstChild),e.setEndAfter(p)):(i.empty().append("\xa0").append(p).append("\xa0"),e.setStart(i[0].firstChild,1),e.setEnd(i[0].lastChild,0)),i.css({top:o.getPos(n,a.getBody()).y}),i[0].focus(),c=a.selection.getSel(),c.removeAllRanges(),c.addRange(e),a.$("*[data-mce-selected]").removeAttr("data-mce-selected"),n.setAttribute("data-mce-selected",1),F=n,M(),e)):null)}function P(){F&&(F.removeAttribute("data-mce-selected"),a.$("#"+L).remove(),F=null)}function D(){O.destroy(),F=null}function M(){O.hide()}var I=a.getBody(),O=new o(a.getBody(),x),L="sel-"+a.dom.uniqueId(),F;return u.ceFalse&&(N(),R()),{showCaret:k,showBlockCaretContainer:S,hideFakeCaret:M,destroy:D}}var g=a.isContentEditableTrue,h=a.isContentEditableFalse,v=n.isAfterContentEditableFalse,y=n.isBeforeContentEditableFalse;return p}),l("tinymce.core.dom.NodePath",["tinymce.core.dom.DOMUtils"],function(e){function t(t,n,r){for(var o=[];n&&n!=t;n=n.parentNode)o.push(e.nodeIndex(n,r));return o}function n(e,t){var n,r,o;for(r=e,n=t.length-1;n>=0;n--){if(o=r.childNodes,t[n]>o.length-1)return null;r=o[t[n]]}return r}return{create:t,resolve:n}}),l("tinymce.core.util.Quirks",["tinymce.core.util.VK","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodePath","tinymce.core.html.Node","tinymce.core.html.Entities","tinymce.core.Env","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker"],function(e,t,n,r,o,i,a,c,l,s,u,d){return function(n){function r(e,t){try{n.getDoc().execCommand(e,!1,t)}catch(e){}}function f(){var e=n.getDoc().documentMode;return e||6}function m(e){return e.isDefaultPrevented()}function p(e){var t,r;e.dataTransfer&&(n.selection.isCollapsed()&&"IMG"==e.target.tagName&&Z.select(e.target),t=n.selection.getContent(),t.length>0&&(r=ae+escape(n.id)+","+escape(t),e.dataTransfer.setData(ce,r)))}function g(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(ce))&&t.indexOf(ae)>=0?(t=t.substr(ae.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}function h(e,t){n.queryCommandSupported("mceInsertClipboardContent")?n.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):n.execCommand("mceInsertContent",!1,e)}function v(){function e(e){var t=Q.create("body"),n=e.cloneContents();return t.appendChild(n),Z.serializer.serialize(t,{format:"html"})}function r(r){if(!r.setStart){if(r.item)return!1;var o=r.duplicate();return o.moveToElementText(n.getBody()),t.compareRanges(r,o)}var i=e(r),a=Q.createRng();return a.selectNode(n.getBody()),i===e(a)}n.on("keydown",function(e){var t=e.keyCode,o,i;if(!m(e)&&(t==J||t==G)){if(o=n.selection.isCollapsed(),i=n.getBody(),o&&!Q.isEmpty(i))return;if(!o&&!r(n.selection.getRng()))return;e.preventDefault(),n.setContent(""),i.firstChild&&Q.isBlock(i.firstChild)?n.selection.setCursorLocation(i.firstChild,0):n.selection.setCursorLocation(i,0),n.nodeChanged()}})}function y(){n.shortcuts.add("meta+a",null,"SelectAll")}function b(){n.settings.content_editable||Q.bind(n.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==n.getDoc().documentElement)if(t=Z.getRng(),n.getBody().focus(),"mousedown"==e.type){if(s.isCaretContainer(t.startContainer))return;Z.placeCaretAt(e.clientX,e.clientY)}else Z.setRng(t)})}function x(){n.on("keydown",function(e){if(!m(e)&&e.keyCode===G){if(!n.getBody().getElementsByTagName("hr").length)return;if(Z.isCollapsed()&&0===Z.getRng(!0).startOffset){var t=Z.getNode(),r=t.previousSibling;if("HR"==t.nodeName)return Q.remove(t),void e.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(Q.remove(r),e.preventDefault())}}})}function C(){window.Range.prototype.getClientRects||n.on("mousedown",function(e){if(!m(e)&&"HTML"===e.target.nodeName){var t=n.getBody();t.blur(),l.setEditorTimeout(n,function(){t.focus()})}})}function w(){n.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==Q.getContentEditableParent(t)&&(e.preventDefault(),n.selection.select(t),n.nodeChanged()),"A"==t.nodeName&&Q.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),Z.select(t))})}function T(){function e(){var e=Q.getAttribs(Z.getStart().cloneNode(!1));return function(){var t=Z.getStart();t!==n.getBody()&&(Q.setAttrib(t,"style",null),X(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!Z.isCollapsed()&&Q.getParent(Z.getStart(),Q.isBlock)!=Q.getParent(Z.getEnd(),Q.isBlock)}n.on("keypress",function(r){var o;if(!m(r)&&(8==r.keyCode||46==r.keyCode)&&t())return o=e(),n.getDoc().execCommand("delete",!1,null),o(),r.preventDefault(),!1}),Q.bind(n.getDoc(),"cut",function(r){var o;!m(r)&&t()&&(o=e(),l.setEditorTimeout(n,function(){o()}))})}function k(){document.body.setAttribute("role","application")}function E(){n.on("keydown",function(e){if(!m(e)&&e.keyCode===G&&Z.isCollapsed()&&0===Z.getRng(!0).startOffset){var t=Z.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function S(){f()>7||(r("RespectVisibilityInDesign",!0),n.contentStyles.push(".mceHideBrInPre pre br {display: none}"),Q.addClass(n.getBody(),"mceHideBrInPre"),te.addNodeFilter("pre",function(e){for(var t=e.length,n,r,i,a;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)i=n[r],a=i.prev,a&&3===a.type&&"\n"!=a.value.charAt(a.value-1)?a.value+="\n":i.parent.insert(new o("#text",3),i,!0).value="\n"}),ne.addNodeFilter("pre",function(e){for(var t=e.length,n,r,o,i;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)o=n[r],(i=o.prev)&&3==i.type&&(i.value=i.value.replace(/\r?\n$/,""))}))}function N(){Q.bind(n.getBody(),"mouseup",function(){var e,t=Z.getNode();"IMG"==t.nodeName&&((e=Q.getStyle(t,"width"))&&(Q.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),Q.setStyle(t,"width","")),(e=Q.getStyle(t,"height"))&&(Q.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),Q.setStyle(t,"height","")))})}function R(){n.on("keydown",function(t){var r,o,i,a,c;if(!m(t)&&t.keyCode==e.BACKSPACE&&(r=Z.getRng(),o=r.startContainer,i=r.startOffset,a=Q.getRoot(),c=o,r.collapsed&&0===i)){for(;c&&c.parentNode&&c.parentNode.firstChild==c&&c.parentNode!=a;)c=c.parentNode;"BLOCKQUOTE"===c.tagName&&(n.formatter.toggle("blockquote",null,c),r=Q.createRng(),r.setStart(o,0),r.setEnd(o,0),Z.setRng(r))}})}function A(){function e(){r("StyleWithCSS",!1),r("enableInlineTableEditing",!1),ee.object_resizing||r("enableObjectResizing",!1)}ee.readonly||n.on("BeforeExecCommand MouseDown",e)}function _(){function e(){X(Q.select("a"),function(e){var t=e.parentNode,n=Q.getRoot();if(t.lastChild===e){for(;t&&!Q.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}Q.add(t,"br",{"data-mce-bogus":1})}})}n.on("SetContent ExecCommand",function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||e()})}function B(){ee.forced_root_block&&n.on("init",function(){r("DefaultParagraphSeparator",ee.forced_root_block)})}function P(){n.on("keydown",function(e){var t;m(e)||e.keyCode!=G||(t=n.getDoc().selection.createRange())&&t.item&&(e.preventDefault(),n.undoManager.beforeChange(),Q.remove(t.item(0)),n.undoManager.add())})}function D(){var e;f()>=10&&(e="",X("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),n.contentStyles.push(e+"{padding-right: 1px !important}"))}function M(){f()<9&&(te.addNodeFilter("noscript",function(e){for(var t=e.length,n,r;t--;)n=e[t],(r=n.firstChild)&&n.attr("data-mce-innertext",r.value)}),ne.addNodeFilter("noscript",function(e){for(var t=e.length,n,r,a;t--;)n=e[t],r=e[t].firstChild,r?r.value=i.decode(r.value):(a=n.attributes.map["data-mce-innertext"])&&(n.attr("data-mce-innertext",null),r=new o("#text",3),r.value=a,r.raw=!0,n.append(r))}))}function I(){function e(e,t){var n=o.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y))&&(r.compareEndPoints("StartToStart",a)>0?r.setEndPoint("StartToStart",a):r.setEndPoint("EndToEnd",a),r.select()):n()}function n(){var e=r.selection.createRange();a&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&a.select(),Q.unbind(r,"mouseup",n),Q.unbind(r,"mousemove",t),a=i=0}var r=Q.doc,o=r.body,i,a,c;r.documentElement.unselectable=!0,Q.bind(r,"mousedown contextmenu",function(o){if("HTML"===o.target.nodeName){if(i&&n(),c=r.documentElement,c.scrollHeight>c.clientHeight)return;i=1,a=e(o.x,o.y),a&&(Q.bind(r,"mouseup",n),Q.bind(r,"mousemove",t),Q.getRoot().focus(),a.select())}})}function O(){n.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||Z.normalize()},!0)}function L(){n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function F(){n.inline||n.on("keydown",function(){document.activeElement==document.body&&n.getWin().focus()})}function H(){n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(a.ie>11)return void n.getBody().focus();t=n.selection.getRng(),n.getBody().focus(),n.selection.setRng(t),n.selection.normalize(),n.nodeChanged()}}))}function U(){a.mac&&n.on("keydown",function(t){!e.metaKeyPressed(t)||t.shiftKey||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),n.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","lineboundary"))})}function z(){r("AutoUrlDetect",!1)}function W(){n.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function V(){n.on("init",function(){n.dom.bind(n.getBody(),"submit",function(e){e.preventDefault()})})}function j(){te.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}function q(){n.on("dragstart",function(e){p(e)}),n.on("drop",function(e){if(!m(e)){var r=g(e);if(r&&r.id!=n.id){e.preventDefault();var o=t.getCaretRangeFromPoint(e.x,e.y,n.getDoc());Z.setRng(o),h(r.html,!0)}}})}function $(){}function K(){var e;return!re||n.removed?0:!(e=n.selection.getSel())||!e.rangeCount||0===e.rangeCount}function Y(){function t(e){var t=new d(e.getBody()),n=e.selection.getRng(),r=u.fromRangeStart(n),o=u.fromRangeEnd(n),i=t.prev(r),a=t.next(o);return!e.selection.isCollapsed()&&(!i||i.isAtStart()&&r.isEqual(i))&&(!a||a.isAtEnd()&&r.isEqual(a))}n.on("keypress",function(r){!m(r)&&!Z.isCollapsed()&&r.charCode>31&&!e.metaKeyPressed(r)&&t(n)&&(r.preventDefault(),n.setContent(String.fromCharCode(r.charCode)),n.selection.select(n.getBody(),!0),n.selection.collapse(!1),n.nodeChanged())}),n.on("keydown",function(e){var r=e.keyCode;m(e)||r!=J&&r!=G||t(n)&&(e.preventDefault(),n.setContent(""),n.nodeChanged())})}var X=c.each,G=e.BACKSPACE,J=e.DELETE,Q=n.dom,Z=n.selection,ee=n.settings,te=n.parser,ne=n.serializer,re=a.gecko,oe=a.ie,ie=a.webkit,ae="data:text/mce-internal,",ce=oe?"Text":"URL";return R(),v(),a.windowsPhone||O(),ie&&(Y(),b(),w(),B(),V(),E(),j(),a.iOS?(F(),H(),W()):y()),oe&&a.ie<11&&(x(),k(),S(),N(),P(),D(),M(),I()),a.ie>=11&&(H(),E()),a.ie&&(y(),z(),q()),re&&(Y(),x(),C(),T(),A(),_(),L(),U(),E()),{refreshContentEditable:$,isHidden:K}}}),l("tinymce.core.init.InitContentBody",["global!document","global!window","tinymce.core.caret.CaretContainerInput","tinymce.core.dom.DOMUtils","tinymce.core.dom.Selection","tinymce.core.dom.Serializer","tinymce.core.EditorUpload","tinymce.core.ErrorReporter","tinymce.core.ForceBlocks","tinymce.core.Formatter","tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.keyboard.KeyboardOverrides","tinymce.core.NodeChange","tinymce.core.SelectionOverrides","tinymce.core.UndoManager","tinymce.core.util.Delay","tinymce.core.util.Quirks","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m,p,g,h,v,y,b){var x=r.DOM,C=function(e){var t=new u(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r=t.length,o,i=e.dom,a,c;r--;)if(o=t[r],a=o.attr(n),c="data-mce-"+n,!o.attributes.map[c]){if(0===a.indexOf("data:")||0===a.indexOf("blob:"))continue;"style"===n?(a=i.serializeStyle(i.parseStyle(a),o.name),a.length||(a=null),o.attr(c,a),o.attr(n,a)):"tabindex"===n?(o.attr(c,a),o.attr(n,null)):o.attr(c,e.convertURL(a,n,o.name))}}),t.addNodeFilter("script",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("type")||"no/type",0!==r.indexOf("mce-")&&n.attr("type","mce-"+r)}),t.addNodeFilter("#cdata",function(e){for(var t=e.length,n;t--;)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n=t.length,r,o=e.schema.getNonEmptyElements();n--;)r=t[n],r.isEmpty(o)&&0===r.getAll("br").length&&(r.append(new d("br",1)).shortEnded=!0)}),t},w=function(e){e.settings.auto_focus&&v.setEditorTimeout(e,function(){var t;t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus),t.destroyed||t.focus()},100)},T=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),w(e)},k=function(e){return e.inline?x.styleSheetLoader:e.dom.styleSheetLoader};return{initContentBody:function(u,d){var v=u.settings,w=u.getElement(),E=u.getDoc(),S,N;v.inline||(u.getElement().style.visibility=u.orgVisibility),d||v.content_editable||(E.open(),E.write(u.iframeHTML),E.close()),v.content_editable&&(u.on("remove",function(){var e=this.getBody();x.removeClass(e,"mce-content-body"),x.removeClass(e,"mce-edit-focus"),x.setAttrib(e,"contentEditable",null)}),x.addClass(w,"mce-content-body"),u.contentDocument=E=v.content_document||e,u.contentWindow=v.content_window||t,u.bodyElement=w,v.content_document=v.content_window=null,v.root_name=w.nodeName.toLowerCase()),S=u.getBody(),S.disabled=!0,u.readonly=v.readonly,u.readonly||(u.inline&&"static"===x.getStyle(S,"position",!0)&&(S.style.position="relative"),S.contentEditable=u.getParam("content_editable_state",!0)),S.disabled=!1,u.editorUpload=new a(u),u.schema=new f(v),u.dom=new r(E,{keep_values:!0,url_converter:u.convertURL,url_converter_scope:u,hex_colors:v.force_hex_style_colors,class_filter:v.class_filter,update_styles:!0,root_element:u.inline?u.getBody():null,collect:v.content_editable,schema:u.schema,onSetAttrib:function(e){u.fire("SetAttrib",e)}}),u.parser=C(u),u.serializer=new i(v,u),u.selection=new o(u.dom,u.getWin(),u.serializer,u),u.formatter=new s(u),u.undoManager=new h(u),u._nodeChangeDispatcher=new p(u),u._selectionOverrides=new g(u),n.setup(u),m.setup(u),l.setup(u),u.fire("PreInit"),v.browser_spellcheck||v.gecko_spellcheck||(E.body.spellcheck=!1,x.setAttrib(S,"spellcheck","false")),u.quirks=new y(u),u.fire("PostRender"),v.directionality&&(S.dir=v.directionality),v.nowrap&&(S.style.whiteSpace="nowrap"),v.protect&&u.on("BeforeSetContent",function(e){b.each(v.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),u.on("SetContent",function(){u.addVisual(u.getBody())}),v.padd_empty_editor&&u.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),u.load({initial:!0,format:"html"}),u.startContent=u.getContent({format:"raw"}),u.on("compositionstart compositionend",function(e){u.composing="compositionstart"===e.type}),u.contentStyles.length>0&&(N="",b.each(u.contentStyles,function(e){N+=e+"\r\n"}),u.dom.addStyle(N)),k(u).loadAll(u.contentCSS,function(e){T(u)},function(e){T(u),c.contentCssError(u,e)})}}}),l("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(e){return e.PluginManager}),l("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(e){return e.ThemeManager}),l("tinymce.core.init.Init",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.init.InitContentBody","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools","tinymce.core.util.Uuid"],function(e,t,n,r,o,i,a,c,l){var s=n.DOM,u=function(e,t,n){var r=i.get(n),o,a;if(o=i.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=c.trim(n),r&&-1===c.inArray(t,n)){if(c.each(i.dependencies(n),function(n){u(e,t,n)}),e.plugins[n])return;a=new r(e,o,e.$),e.plugins[n]=a,a.init&&(a.init(e,o),t.push(n))}},d=function(e){var t=[];c.each(e.settings.plugins.replace(/\-/g,"").split(/[ ,]/),function(n){u(e,t,n)})},f=function(e){var t,n=e.settings;n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),t=a.get(n.theme),e.theme=new t(e,a.urls[n.theme]),e.theme.init&&e.theme.init(e,a.urls[n.theme]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme=n.theme)},m=function(e){var t,n,r,o,i,a=e.settings,c=e.getElement();return a.render_ui&&e.theme&&(e.orgDisplay=c.style.display,"function"!=typeof a.theme?(t=a.width||s.getStyle(c,"width")||"100%",n=a.height||s.getStyle(c,"height")||c.offsetHeight,r=a.min_height||100,o=/^[0-9\.]+(|px)$/i,o.test(""+t)&&(t=Math.max(parseInt(t,10),100)),o.test(""+n)&&(n=Math.max(parseInt(n,10),r)),i=e.theme.renderUI({targetNode:c,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(i.iframeHeight||n)+("number"==typeof n?i.deltaHeight||0:""))<r&&(n=r)):(i=a.theme(e,c),i.editorContainer.nodeType&&(i.editorContainer.id=i.editorContainer.id||e.id+"_parent"),i.iframeContainer.nodeType&&(i.iframeContainer.id=i.iframeContainer.id||e.id+"_iframecontainer"),n=i.iframeHeight||c.offsetHeight),e.editorContainer=i.editorContainer,i.height=n),i},p=function(n,i){if(e.domain!==t.location.hostname&&r.ie&&r.ie<12){var a=l.uuid("mce");n[a]=function(){o.initContentBody(n)};var c='javascript:(function(){document.open();document.domain="'+e.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.'+a+"(true);})()";return s.setAttrib(i,"src",c),!0}return!1},g=function(e,t){var n=e.settings,o,i;e.iframeHTML=n.doctype+"<html><head>",n.document_base_url!=e.documentBaseUrl&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),!r.caretAfter&&n.ie7_compat&&(e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',o=n.body_id||"tinymce",-1!=o.indexOf("=")&&(o=e.getParam("body_id","","hash"),o=o[e.id]||o),i=n.body_class||"",-1!=i.indexOf("=")&&(i=e.getParam("body_class","","hash"),i=i[e.id]||""),n.content_security_policy&&(e.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+n.content_security_policy+'" />'),e.iframeHTML+='</head><body id="'+o+'" class="mce-content-body '+i+'" data-id="'+e.id+'"><br></body></html>';var a=s.create("iframe",{id:e.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:t.height,display:"block"}});a.onload=function(){a.onload=null,e.fire("load")};var c=p(e,a);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=a,s.add(t.iframeContainer,a),c};return{init:function(e){var t=e.settings,n=e.getElement(),r;if(e.rtl=t.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(t.language),t.aria_label=t.aria_label||s.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),f(e),d(e),r=m(e),t.content_css&&c.each(c.explode(t.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),t.content_style&&e.contentStyles.push(t.content_style),t.content_editable)return o.initContentBody(e);var i=g(e,r);r.editorContainer&&(s.get(r.editorContainer).style.display=e.orgDisplay,e.hidden=s.isHidden(r.editorContainer)),e.getElement().style.display="none",s.setAttrib(e.id,"aria-hidden",!0),i||o.initContentBody(e)}}}),l("tinymce.core.init.Render",["global!window","tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.init.Init","tinymce.core.NotificationManager","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools","tinymce.core.WindowManager"],function(e,t,n,r,o,i,a,c,l,s,u,d){var f=t.DOM,m=function(e,t){var n=e.settings,o=r.ScriptLoader;if(n.language&&"en"!=n.language&&!n.language_url&&(n.language_url=e.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&o.add(n.language_url),n.theme&&"function"!=typeof n.theme&&"-"!=n.theme.charAt(0)&&!s.urls[n.theme]){var c=n.theme_url;c=c?e.documentBaseURI.toAbsolute(c):"themes/"+n.theme+"/theme"+t+".js",s.load(n.theme,c)}u.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),u.each(n.external_plugins,function(e,t){l.load(t,e),n.plugins+=" "+t}),u.each(n.plugins.split(/[ ,]/),function(e){if((e=u.trim(e))&&!l.urls[e])if("-"===e.charAt(0)){e=e.substr(1,e.length);var n=l.dependencies(e);u.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=l.createUrl(n,e),l.load(e.resource,e)})}else l.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})}),o.loadQueue(function(){e.removed||a.init(e)},e,function(t){i.pluginLoadError(e,t[0]),e.removed||a.init(e)})};return{render:function(t){function r(){f.unbind(e,"ready",r),t.render()}var i=t.settings,a=t.id;if(!n.Event.domLoaded)return void f.bind(e,"ready",r);if(t.getElement()&&o.contentEditable){i.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var l=t.getElement().form||f.getParent(a,"form");l&&(t.formElement=l,i.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&(f.insertAfter(f.create("input",{type:"hidden",name:a}),a),t.hasHiddenInput=!0),t.formEventDelegate=function(e){t.fire(e.type,e)},f.bind(l,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!i.submit_patch||l.submit.nodeType||l.submit.length||l._mceOldSubmit||(l._mceOldSubmit=l.submit,l.submit=function(){return t.editorManager.triggerSave(),t.setDirty(!1),l._mceOldSubmit(l)})),t.windowManager=new d(t),t.notificationManager=new c(t),"xml"===i.encoding&&t.on("GetContent",function(e){e.save&&(e.content=f.encode(e.content))}),i.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&t.save()}),i.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),m(t,t.suffix)}}}}),l("tinymce.core.Mode",[],function(){function e(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}}function t(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}}function n(n,r){n._clickBlocker&&(n._clickBlocker.unbind(),n._clickBlocker=null),r?(n._clickBlocker=t(n),n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable=!1):(n.readonly=!1,n.getBody().contentEditable=!0,e(n,"StyleWithCSS",!1),e(n,"enableInlineTableEditing",!1),e(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())}function r(e,t){var r=e.readonly?"readonly":"design";t!=r&&(e.initialized?n(e,"readonly"==t):e.on("init",function(){n(e,"readonly"==t)}),e.fire("SwitchMode",{mode:t}))}return{setMode:r}}),l("tinymce.core.ui.Sidebar",[],function(){return{add:function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}}}),l("tinymce.core.Editor",["tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.EditorCommands","tinymce.core.EditorObservable","tinymce.core.EditorSettings","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.init.Render","tinymce.core.Mode","tinymce.core.Shortcuts","tinymce.core.ui.Sidebar","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.Uuid"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m,p){function g(n,o,c){var l=this,s,d;s=l.documentBaseUrl=c.documentBaseURL,d=c.baseURI,o=i.getEditorSettings(l,n,s,c.defaultSettings,o),l.settings=o,e.language=o.language||"en",e.languageLoad=o.language_load,e.baseURL=c.baseURL,l.id=n,l.setDirty(!1),l.plugins={},l.documentBaseURI=new m(o.document_base_url,{base_uri:d}),l.baseURI=d,l.contentCSS=[],l.contentStyles=[],l.shortcuts=new u(l),l.loadedCSS={},l.editorCommands=new r(l),l.suffix=c.suffix,l.editorManager=c,l.inline=o.inline,o.cache_suffix&&(a.cacheSuffix=o.cache_suffix.replace(/^[\?\&]+/,"")),!1===o.override_viewport&&(a.overrideViewPort=!1),c.fire("SetupEditor",l),l.execCallback("setup",l),l.$=t.overrideDefaults(function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}})}var h=n.DOM,v=f.extend,y=f.each,b=f.trim,x=f.resolve,C=a.gecko,w=a.ie;return g.prototype={render:function(){l.render(this)},focus:function(e){function t(e){return n.dom.getParent(e,function(e){return"true"===n.dom.getContentEditable(e)})}var n=this,r=n.selection,o=n.settings.content_editable,i,c,l=n.getDoc(),s=n.getBody(),u;if(!n.removed){if(!e){if(i=r.getRng(),i.item&&(c=i.item(0)),n.quirks.refreshContentEditable(),u=t(r.getNode()),n.$.contains(s,u))return u.focus(),r.normalize(),void n.editorManager.setActive(n);if(o||(a.opera||n.getBody().focus(),n.getWin().focus()),C||o){if(s.setActive)try{s.setActive()}catch(e){s.focus()}else n.selection.setRng(n.lastRng),s.focus();o&&r.normalize()}c&&c.ownerDocument==l&&(i=l.body.createControlRange(),i.addElement(c),i.select())}n.editorManager.setActive(n)}},execCallback:function(e){var t=this,n=t.settings[e],r;if(n)return t.callbackLookup&&(r=t.callbackLookup[e])&&(n=r.func,r=r.scope),"string"==typeof n&&(r=n.replace(/\.\w+$/,""),r=r?x(r):0,n=x(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r}),n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&f.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,o;return"hash"===n?(o={},"string"==typeof r?y(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),e.length>1?o[b(e[0])]=b(e[1]):o[b(e[0])]=b(e)}):o=r,o):r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return d.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addContextToolbar:function(e,t){var n=this,r;n.contextToolbars=n.contextToolbars||[],"string"==typeof e&&(r=e,e=function(e){return n.dom.is(e,r)}),n.contextToolbars.push({id:p.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(h.show(e.getContainer()),h.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(w&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(h.hide(e.getContainer()),h.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t=this,n=t.getElement(),r;return t.removed?"":n?(e=e||{},e.load=!0,r=t.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||t.fire("LoadContent",e),e.element=n=null,r):void 0},save:function(e){var t=this,n=t.getElement(),r,o;if(n&&t.initialized&&!t.removed)return e=e||{},e.save=!0,e.element=n,r=e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),"raw"==e.format&&t.fire("RawSaveContent",e),r=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=r:(t.inline||(n.innerHTML=r),(o=h.getParent(t.id,"form"))&&y(o.elements,function(e){if(e.name==t.id)return e.value=r,!1})),e.element=n=null,!1!==e.set_dirty&&t.setDirty(!1),r},setContent:function(e,t){var n=this,r=n.getBody(),o,i;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(i=w&&w<11?"":'<br data-mce-bogus="1">',"TABLE"==r.nodeName?e="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(r.nodeName)&&(e="<li>"+i+"</li>"),o=n.settings.forced_root_block,o&&n.schema.isValidChild(r.nodeName.toLowerCase(),o.toLowerCase())?(e=i,e=n.dom.createHTML(o,n.settings.forced_root_block_attrs,e)):w||e||(e='<br data-mce-bogus="1">'),n.dom.setHTML(r,e),n.fire("SetContent",t)):("raw"!==t.format&&(e=new c({validate:n.validate},n.schema).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=b(e),n.dom.setHTML(r,t.content),t.no_events||n.fire("SetContent",t)),t.content},getContent:function(e){var t=this,n,r=t.getBody();return t.removed?"":(e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),n="raw"==e.format?f.trim(t.serializer.getTrimmedContent()):"text"==e.format?r.innerText||r.textContent:t.serializer.serialize(r,e),"text"!=e.format?e.content=b(n):e.content=n,e.no_events||t.fire("GetContent",e),e.content)},insertContent:function(e,t){t&&(e=v({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){s.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=h.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=h.get(this.id)),this.targetElm},getWin:function(){var e=this,t;return e.contentWindow||(t=e.iframeElement)&&(e.contentWindow=t.contentWindow),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin())&&(e.contentDocument=t.document),e.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,o=r.settings;return o.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var t=this,n=t.settings,r=t.dom,o;e=e||t.getBody(),void 0===t.hasVisual&&(t.hasVisual=n.visual),y(r.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return o=n.visual_table_class||"mce-item-table",i=r.getAttrib(e,"border"),void(i&&"0"!=i||!t.hasVisual?r.removeClass(e,o):r.addClass(e,o));case"A":return void(r.getAttrib(e,"href",!1)||(i=r.getAttrib(e,"name")||e.id,o=n.visual_anchor_class||"mce-item-anchor",i&&t.hasVisual?r.addClass(e,o):r.removeClass(e,o)))}}),t.fire("VisualAid",{element:e,hasVisual:t.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&h.remove(e.getElement().nextSibling),e.inline||(w&&w<10&&e.getDoc().execCommand("SelectAll",!1,null),h.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),h.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t=this,n;if(!t.destroyed){if(!e&&!t.removed)return void t.remove();e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),h.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1}},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},v(g.prototype,o),g}),l("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(e){"use strict";var t={},n="en";return{setCode:function(e){e&&(n=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return n},rtl:!1,add:function(e,n){var r=t[e];r||(t[e]=r={});for(var o in n)r[o]=n[o];this.setCode(e)},translate:function(r){function o(t){return e.is(t,"function")?Object.prototype.toString.call(t):i(t)?"":""+t}function i(t){return""===t||null===t||e.is(t,"undefined")}function a(t){return t=o(t),e.hasOwn(c,t)?o(c[t]):t}var c=t[n]||{};if(i(r))return"";if(e.is(r,"object")&&e.hasOwn(r,"raw"))return o(r.raw);if(e.is(r,"array")){var l=r.slice(1);r=a(r[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(l,n)?o(l[n]):t})}return a(r).replace(/{context:\w+}$/,"")},data:t}}),l("tinymce.core.FocusManager",["tinymce.core.dom.DOMUtils","tinymce.core.util.Delay","tinymce.core.Env"],function(e,t,n){function r(e){function r(){try{return document.activeElement}catch(e){return document.body}}function s(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function d(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function f(f){var m=f.editor;m.on("init",function(){(m.inline||n.ie)&&("onbeforedeactivate"in document&&n.ie<9?m.dom.bind(m.getBody(),"beforedeactivate",function(e){if(e.target==m.getBody())try{m.lastRng=m.selection.getRng()}catch(e){}}):m.on("nodechange mouseup keyup",function(e){var t=r();"nodechange"==e.type&&e.selectionChange||(t&&t.id==m.id+"_ifr"&&(t=m.getBody()),m.dom.isChildOf(t,m.getBody())&&(m.lastRng=m.selection.getRng()))}),n.webkit&&!o&&(o=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(m.lastRng=n)}},c.bind(document,"selectionchange",o)))}),m.on("setcontent",function(){m.lastRng=null}),m.on("mousedown",function(){m.selection.lastFocusBookmark=null}),m.on("focusin",function(){var t=e.focusedEditor,n;m.selection.lastFocusBookmark&&(n=d(m,m.selection.lastFocusBookmark),m.selection.lastFocusBookmark=null,m.selection.setRng(n)),t!=m&&(t&&t.fire("blur",{focusedEditor:m}),e.setActive(m),e.focusedEditor=m,m.fire("focus",{blurredEditor:t}),m.focus(!0)),m.lastRng=null}),m.on("focusout",function(){t.setEditorTimeout(m,function(){var t=e.focusedEditor;l(m,r())||t!=m||(m.fire("blur",{focusedEditor:null}),e.focusedEditor=null,m.selection&&(m.selection.lastFocusBookmark=null))})}),i||(i=function(t){var n=e.activeEditor,r;r=t.target,n&&r.ownerDocument===document&&(n.selection&&r!==n.getBody()&&u(m,r)&&(n.selection.lastFocusBookmark=s(n.dom,n.lastRng)),r===document.body||l(n,r)||e.focusedEditor!==n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},c.bind(document,"focusin",i)),m.inline&&!a&&(a=function(t){var n=e.activeEditor,r=n.dom;if(n.inline&&r&&!r.isChildOf(t.target,n.getBody())){var o=n.selection.getRng();o.collapsed||(n.lastRng=o)}},c.bind(document,"mouseup",a))}function m(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(c.unbind(document,"selectionchange",o),c.unbind(document,"focusin",i),c.unbind(document,"mouseup",a),o=i=a=null)}e.on("AddEditor",f),e.on("RemoveEditor",m)}var o,i,a,c=e.DOM,l=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==c.getParent(t,function(t){return r.isEditorUIElement(t)||!!n&&e.dom.is(t,n)})},s=function(e){return!0===e.inline},u=function(e,t){return!1===s(e)||!1===e.dom.isChildOf(t,e.getBody())};return r.isEditorUIElement=function(e){return-1!==(""+e.className).indexOf("mce-")},r._isUIElement=l,r}),l("tinymce.core.LegacyInput",["tinymce.core.util.Tools"],function(e){var t=e.each,n=e.explode;return{register:function(e){e.on("AddEditor",function(e){var r=e.editor;r.on("preInit",function(){function e(e,n){t(n,function(t,n){t&&c.setStyle(e,n,t)}),c.rename(e,"span")}function o(e){c=r.dom,l.convert_fonts_to_spans&&t(c.select("font,u,strike",e.node),function(e){i[e.nodeName.toLowerCase()](c,e)})}var i,a,c,l=r.settings;l.inline_styles&&(a=n(l.font_size_legacy_values),i={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(t,n){"html4"===r.settings.schema&&e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},r.on("PreProcess SetContent",o))})})}}}),l("tinymce.core.EditorManager",["tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.Editor","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.FocusManager","tinymce.core.LegacyInput","tinymce.core.util.I18n","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI"],function(e,t,n,r,o,i,a,c,l,s,u,d,f){function m(e){b(T.editors,function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})}function p(e,n){n!==k&&(n?t(window).on("resize scroll",m):t(window).off("resize scroll",m),k=n)}function g(e){var t=T.editors,n;delete t[e.id];for(var r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1),n=!0;break}return T.activeEditor==e&&(T.activeEditor=t[0]),T.focusedEditor==e&&(T.focusedEditor=null),n}function h(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(g(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e}var v=n.DOM,y=d.explode,b=d.each,x=d.extend,C=0,w,T,k=!1;return T={$:t,majorVersion:"4",minorVersion:"6.4",releaseDate:"2017-06-13",editors:[],i18n:l,activeEditor:null,setup:function(){var e=this,t,n,r="",o,i;if(n=f.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),o=window.tinymce||window.tinyMCEPreInit)t=o.base||o.baseURL,r=o.suffix;else{for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){i=c[l].src;var s=i.substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){-1!=s.indexOf(".min")&&(r=".min"),t=i.substring(0,i.lastIndexOf("/"));break}}!t&&document.currentScript&&(i=document.currentScript.src,-1!=i.indexOf(".min")&&(r=".min"),t=i.substring(0,i.lastIndexOf("/")))}e.baseURL=new f(n).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new f(e.baseURL),e.suffix=r,e.focusManager=new a(e)},overrideDefaults:function(t){var n,r;n=t.base_url,n&&(this.baseURL=new f(this.documentBaseURL).toAbsolute(n.replace(/\/+$/,"")),this.baseURI=new f(this.baseURL)),r=t.suffix,t.suffix&&(this.suffix=r),this.defaultSettings=t;var o=t.plugin_base_urls;for(var i in o)e.PluginManager.urls[i]=o[i]},init:function(e){function n(e,t){return e.inline&&t.tagName.toLowerCase()in g}function a(e){var t=e.id;return t||(t=e.name,t=t&&!v.get(t)?e.name:v.uniqueId(),e.setAttribute("id",t)),t}function c(t){var n=e[t];if(n)return n.apply(m,Array.prototype.slice.call(arguments,2))}function l(e,t){return t.constructor===RegExp?t.test(e.className):v.hasClass(e,t)}function s(e){var t,n=[];if(o.ie&&o.ie<11)return i.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return b(e.types,function(e){n=n.concat(v.select(e.selector))}),n;if(e.selector)return v.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&b(y(t),function(e){var t;(t=v.get(e))?n.push(t):b(document.forms,function(t){b(t.elements,function(t){t.name===e&&(e="mce_editor_"+C++,v.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":b(v.select("textarea"),function(t){e.editor_deselector&&l(t,e.editor_deselector)||e.editor_selector&&!l(t,e.editor_selector)||n.push(t)})}return n}function f(){function o(e,t,n){var o=new r(e,t,m);u.push(o),o.on("init",function(){++l===p.length&&w(u)}),o.targetElm=o.targetElm||n,o.render()}var l=0,u=[],p;if(v.unbind(window,"ready",f),c("onpageload"),p=t.unique(s(e)),e.types)return void b(e.types,function(t){d.each(p,function(n){return!v.is(n,t.selector)||(o(a(n),x({},e,t),n),!1)})});d.each(p,function(e){h(m.get(e.id))}),p=d.grep(p,function(e){return!m.get(e.id)}),0===p.length?w([]):b(p,function(t){n(e,t)?i.initError("Could not initialize inline editor on invalid inline target element",t):o(a(t),e,t)})}var m=this,p,g;g=d.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var w=function(e){p=e};return m.settings=e,v.bind(window,"ready",f),new u(function(e){p?e(p):w=function(t){e(t)}})},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),p(n,!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),w||(w=function(){t.fire("BeforeUnload")},v.bind(window,"beforeunload",w)),e},createEditor:function(e,t){return this.add(new r(e,t,this))},remove:function(e){var t=this,n,r=t.editors,o;{if(e)return"string"==typeof e?(e=e.selector||e,void b(v.select(e),function(e){(o=r[e.id])&&t.remove(o)})):(o=e,r[o.id]?(g(o)&&t.fire("RemoveEditor",{editor:o}),r.length||v.unbind(window,"beforeunload",w),o.remove(),p(r,r.length>0),o):null);for(n=r.length-1;n>=0;n--)t.remove(r[n])}},execCommand:function(e,t,n){var o=this,i=o.get(n);switch(e){case"mceAddEditor":return o.get(n)||new r(n,o.settings,o).render(),!0;case"mceRemoveEditor":return i&&i.remove(),!0;case"mceToggleEditor":return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",0,n),!0)}return!!o.activeEditor&&o.activeEditor.execCommand(e,t,n)},triggerSave:function(){b(this.editors,function(e){e.save()})},addI18n:function(e,t){l.add(e,t)},translate:function(e){return l.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},x(T,s),T.setup(),c.register(T),T}),l("tinymce.core.util.XHR",["tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t){var n={send:function(e){function r(){!e.async||4==o.readyState||i++>1e4?(e.success&&i<1e4&&200==o.status?e.success.call(e.success_scope,""+o.responseText,o,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",o,e),o=null):setTimeout(r,10)}var o,i=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",n.fire("beforeInitialize",{settings:e}),o=new XMLHttpRequest){if(o.overrideMimeType&&o.overrideMimeType(e.content_type),o.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(o.withCredentials=!0),e.content_type&&o.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&t.each(e.requestheaders,function(e){o.setRequestHeader(e.key,e.value)}),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o=n.fire("beforeSend",{xhr:o,settings:e}).xhr,o.send(e.data),!e.async)return r();setTimeout(r,10)}}};return t.extend(n,e),n}),l("tinymce.core.util.JSON",[],function(){function e(t,n){var r,o,i,a;if(n=n||'"',null===t)return"null";if("string"==(i=typeof t))return o="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=o.indexOf(t))+1?"\\"+o.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"==i){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,o="[";r<t.length;r++)o+=(r>0?",":"")+e(t[r],n);return o+"]"}o="{";for(a in t)t.hasOwnProperty(a)&&(o+="function"!=typeof t[a]?(o.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return o+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}),l("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(e,t,n){function r(e){this.settings=o({},e),this.count=0}var o=n.extend;return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,i=n.success;n=o(this.settings,n),n.success=function(t,o){t=e.parse(t),void 0===t&&(t={error:"JSON Parse error."}),t.error?r.call(n.error_scope||n.scope,t.error,o):i.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),l("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(e){return{callbacks:{},count:0,send:function(t){var n=this,r=e.DOM,o=void 0!==t.count?t.count:n.count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}}}),l("tinymce.core.util.LocalStorage",[],function(){function e(){a=[];for(var e in i)a.push(e);r.length=a.length}function t(){function t(e){var t,n;return-1===(n=void 0!==e?s+e:r.indexOf(",",s))||n>r.length?null:(t=r.substring(s,n),s=n+1,t)}var n,r,a,s=0;if(i={},l){o.load(c),r=o.getAttribute(c)||"";do{var u=t();if(null===u)break;if(null!==(n=t(parseInt(u,32)||0))){if(null===(u=t()))break;a=t(parseInt(u,32)||0),n&&(i[n]=a)}}while(null!==n);e()}}function n(){var t,n="";if(l){for(var r in i)t=i[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;o.setAttribute(c,n);try{o.save(c)}catch(e){}e()}}var r,o,i,a,c,l;try{if(window.localStorage)return localStorage}catch(e){}return c="tinymce",o=document.documentElement,l=!!o.addBehavior,l&&o.addBehavior("#default#userData"),r={key:function(e){return a[e]},getItem:function(e){return e in i?i[e]:null},setItem:function(e,t){i[e]=""+t,n()},removeItem:function(e){delete i[e],n()},clear:function(){i={},n()}},t(),r}),l("tinymce.core.api.Compat",["tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.AddOnManager","tinymce.core.util.Tools","tinymce.core.Env"],function(e,t,n,r,o,i){return{register:function(a){a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=r.PluginManager,a.ThemeManager=r.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,o.each("trim isArray is toArray makeMap each map grep inArray extend create walk createNS resolve explode _addCacheSuffix".split(" "),function(e){a[e]=o[e]}),o.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=i[e.substr(2).toLowerCase()]})}}}),l("tinymce.core.util.Color",[],function(){function e(e){function o(e,o,i){var a,c,l,s,u,d;return a=0,c=0,l=0,e/=255,o/=255,i/=255,u=t(e,t(o,i)),d=n(e,n(o,i)),u==d?(l=u,{h:0,s:0,v:100*l}):(s=e==u?o-i:i==u?e-o:i-e,a=e==u?3:i==u?1:5,a=60*(a-s/(d-u)),c=(d-u)/d,l=d,{h:r(a),s:r(100*c),v:r(100*l)})}function i(e,o,i){var a,c,l,s;if(e=(parseInt(e,10)||0)%360,o=parseInt(o,10)/100,i=parseInt(i,10)/100,o=n(0,t(o,1)),i=n(0,t(i,1)),0===o)return void(d=f=m=r(255*i));switch(a=e/60,c=i*o,l=c*(1-Math.abs(a%2-1)),s=i-c,Math.floor(a)){case 0:d=c,f=l,m=0;break;case 1:d=l,f=c,m=0;break;case 2:d=0,f=c,m=l;break;case 3:d=0,f=l,m=c;break;case 4:d=l,f=0,m=c;break;case 5:d=c,f=0,m=l;break;default:d=f=m=0}d=r(255*(d+s)),f=r(255*(f+s)),m=r(255*(m+s))}function a(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(d)+e(f)+e(m)}function c(){return{r:d,g:f,b:m}}function l(){return o(d,f,m)}function s(e){var t;return"object"==typeof e?"r"in e?(d=e.r,f=e.g,m=e.b):"v"in e&&i(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(d=parseInt(t[1],10),f=parseInt(t[2],10),m=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(d=parseInt(t[1],16),f=parseInt(t[2],16),m=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(d=parseInt(t[1]+t[1],16),f=parseInt(t[2]+t[2],16),m=parseInt(t[3]+t[3],16)),d=d<0?0:d>255?255:d,f=f<0?0:f>255?255:f,m=m<0?0:m>255?255:m,u}var u=this,d=0,f=0,m=0;e&&s(e),u.toRgb=c,u.toHsv=l,u.toHex=a,u.parse=s}var t=Math.min,n=Math.max,r=Math.round;return e}),l("tinymce.core.ui.Layout",["tinymce.core.util.Class","tinymce.core.util.Tools"],function(e,t){"use strict";return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t=this,n=t.settings,r,o,i,a;r=n.firstControlClass,o=n.lastControlClass,e.each(function(e){e.classes.remove(r).remove(o).add(n.controlClass),e.visible()&&(i||(i=e),a=e)}),i&&i.classes.add(r),a&&a.classes.add(o)},renderHtml:function(e){var t=this,n="";return t.applyClasses(e.items()),e.items().each(function(e){n+=e.renderHtml()}),n},recalc:function(){},postRender:function(){},isNative:function(){return!1}})}),l("tinymce.core.ui.AbsoluteLayout",["tinymce.core.ui.Layout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),l("tinymce.core.ui.Button",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t._super(e),e=t.settings,n=t.settings.size,t.on("click mousedown",function(e){e.preventDefault()}),t.on("touchstart",function(e){t.fire("click",e),e.preventDefault()}),e.subtype&&t.classes.add(e.subtype),n&&t.classes.add("btn-"+n),e.icon&&t.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e=this.getEl().firstChild,t;e&&(t=e.style,t.width=t.height="100%"),this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("icon"),o,i=e.state.get("text"),a="";return o=e.settings.image,o?(r="none","string"!=typeof o&&(o=window.getSelection?o[0]:o[1]),o=" style=\"background-image: url('"+o+"')\""):o="",i&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(i)+"</span>"),r=r?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes+'" tabindex="-1"><button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+o+"></i>":"")+a+"</button></div>"},bindStates:function(){function e(e){var o=n("span."+r,t.getEl());e?(o[0]||(n("button:first",t.getEl()).append('<span class="'+r+'"></span>'),o=n("span."+r,t.getEl())),o.html(t.encode(e))):o.remove(),t.classes.toggle("btn-has-text",!!e)}var t=this,n=t.$,r=t.classPrefix+"txt";return t.state.on("change:text",function(t){e(t.value)}),t.state.on("change:icon",function(n){var r=n.value,o=t.classPrefix;t.settings.icon=r,r=r?o+"ico "+o+"i-"+t.settings.icon:"";var i=t.getEl().firstChild,a=i.getElementsByTagName("i")[0];r?(a&&a==i.firstChild||(a=document.createElement("i"),i.insertBefore(a,i.firstChild)),a.className=r):a&&i.removeChild(a),e(t.state.get("text"))}),t._super()}})}),l("tinymce.core.ui.ButtonGroup",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.classes.add("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),l("tinymce.core.ui.Checkbox",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e.state.get("text"))+"</span></div>"},bindStates:function(){function e(e){t.classes.toggle("checked",e),t.aria("checked",e)}var t=this;return t.state.on("change:text",function(e){t.getEl("al").firstChild.data=t.translate(e.value)}),t.state.on("change:checked change:value",function(n){t.fire("change"),e(n.value)}),t.state.on("change:icon",function(e){var n=e.value,r=t.classPrefix;if(void 0===n)return t.settings.icon;t.settings.icon=n,n=n?r+"ico "+r+"i-"+t.settings.icon:"";var o=t.getEl().firstChild,i=o.getElementsByTagName("i")[0];n?(i&&i==o.firstChild||(i=document.createElement("i"),o.insertBefore(i,o.firstChild)),i.className=n):i&&o.removeChild(i)}),t.state.get("checked")&&e(!0),t._super()}})}),l("tinymce.core.ui.ComboBox",["tinymce.core.ui.Widget","tinymce.core.ui.Factory","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery","tinymce.core.util.VK","tinymce.core.util.Tools"],function(e,t,n,r,o,i){"use strict";return e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var o=n.target,i=t.getEl();if(r.contains(i,o)||o==i)for(;o&&o!=i;)o.id&&-1!=o.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),o=o.parentNode}),t.on("keydown",function(e){var n;13==e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"==e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",o=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"==o),n.classes.toggle("tooltip-nw","bc-tl"==o),n.classes.toggle("tooltip-ne","bc-tr"==o),n.moveRel(e.target,o)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e=this,n=e.settings,r;e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){"INPUT"==t.target.tagName.toUpperCase()&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,t=e.getEl(),o=e.getEl("open"),i=e.layoutRect(),a,c,l=0,s=t.firstChild;e.statusLevel()&&"none"!==e.statusLevel()&&(l=parseInt(n.getRuntimeStyle(s,"padding-right"),10)-parseInt(n.getRuntimeStyle(s,"padding-left"),10)),a=o?i.w-n.getSize(o).width-10:i.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(c=e.layoutRect().h-2+"px"),r(s).css({width:a-l,lineHeight:c}),e._super(),e},postRender:function(){var e=this;return r(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,o=e.state.get("value")||"",i,a,c="",l="",s="";return"spellcheck"in n&&(l+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(l+=' maxlength="'+n.maxLength+'"'),n.size&&(l+=' size="'+n.size+'"'),n.subtype&&(l+=' type="'+n.subtype+'"'),s='<i id="'+t+'-status" class="mce-status mce-ico" style="display: none"></i>',e.disabled()&&(l+=' disabled="disabled"'),i=n.icon,i&&"caret"!=i&&(i=r+"ico "+r+"i-"+n.icon),a=e.state.get("text"),(i||a)&&(c='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=i?'<i class="'+i+'"></i>':'<i class="'+r+'caret"></i>')+(a?(i?" ":"")+a:"")+"</button></div>",e.classes.add("has-open")),'<div id="'+t+'" class="'+e.classes+'"><input id="'+t+'-inp" class="'+r+'textbox" value="'+e.encode(o,!1)+'" hidefocus="1"'+l+' placeholder="'+e.encode(n.placeholder)+'" />'+s+c+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,n){var r=this;if(0===e.length)return void r.hideMenu();var o=function(e,t){return function(){r.fire("selectitem",{title:t,value:e})}};r.menu?r.menu.items().remove():r.menu=t.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),i.each(e,function(e){r.menu.add({text:e.title,url:e.previewUrl,match:n,classes:"menu-item-ellipsis",onclick:o(e.value,e.title)})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(e){e.control.parent()===r.menu&&(e.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()});var a=r.layoutRect().w;r.menu.layoutRect({w:a,minW:0,maxW:a}),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!=t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var r=e.getEl("status"),o=e.classPrefix,i=t.value;n.css(r,"display","none"===i?"none":""),n.toggleClass(r,o+"i-checkmark","ok"===i),n.toggleClass(r,o+"i-warning","warn"===i),n.toggleClass(r,o+"i-error","error"===i),e.classes.toggle("has-status","none"!==i),e.repaint()}),n.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===o.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===o.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){r(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}})}),l("tinymce.core.ui.ColorBox",["tinymce.core.ui.ComboBox"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}})}),l("tinymce.core.ui.PanelButton",["tinymce.core.ui.Button","tinymce.core.ui.FloatPanel"],function(e,t){"use strict";return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var r=n.panel;r.type&&(r={layout:"grid",items:r}),r.role=r.role||"dialog",r.popover=!0,r.autohide=!0,r.ariaRoot=!0,e.panel=new t(r).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var o=e.panel.testMoveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl"]));e.panel.classes.toggle("start","bc-tl"===o),e.panel.classes.toggle("end","bc-tr"===o),e.panel.moveRel(e.getEl(),o)},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),l("tinymce.core.ui.ColorButton",["tinymce.core.ui.PanelButton","tinymce.core.dom.DOMUtils"],function(e,t){"use strict";var n=t.DOM;return e.extend({init:function(e){this._super(e),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.state.get("text"),o=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"",a="";return r&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(r)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.aria&&"down"==r.aria.key||r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),l("tinymce.core.ui.ColorPicker",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper","tinymce.core.ui.DomUtils","tinymce.core.util.Color"],function(e,t,n,r){"use strict";return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var r=n.getPos(e),o,i;return o=t.pageX-r.x,i=t.pageY-r.y,o=Math.max(0,Math.min(o/e.clientWidth,1)),i=Math.max(0,Math.min(i/e.clientHeight,1)),{x:o,y:i}}function o(e,t){var o=(360-e.h)/360;n.css(d,{top:100*o+"%"}),t||n.css(m,{left:e.s+"%",top:100-e.v+"%"}),f.style.background=new r({s:100,v:100,h:e.h}).toHex(),c.color().parse({s:e.s,v:e.v,h:e.h})}function i(t){var n;n=e(f,t),s.s=100*n.x,s.v=100*(1-n.y),o(s),c.fire("change")}function a(t){var n;n=e(u,t),s=l.toHsv(),s.h=360*(1-n.y),o(s,!0),c.fire("change")}var c=this,l=c.color(),s,u,d,f,m;u=c.getEl("h"),d=c.getEl("hp"),f=c.getEl("sv"),m=c.getEl("svp"),c._repaint=function(){s=l.toHsv(),o(s)},c._super(),c._svdraghelper=new t(c._id+"-sv",{start:i,drag:i}),c._hdraghelper=new t(c._id+"-h",{start:a,drag:a}),c._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(!arguments.length)return t.color().toHex();t.color().parse(e),t._rendered&&t._repaint()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){function e(){var e,t,n="",o,a;for(o="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",a=i.split(","),e=0,t=a.length-1;e<t;e++)n+='<div class="'+r+'colorpicker-h-chunk" style="height:'+100/t+"%;"+o+a[e]+",endColorstr="+a[e+1]+");-ms-"+o+a[e]+",endColorstr="+a[e+1]+')"></div>';return n}var t=this,n=t._id,r=t.classPrefix,o,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return o='<div id="'+n+'-h" class="'+r+'colorpicker-h" style="background: -ms-linear-gradient(top,'+i+");background: linear-gradient(to bottom,"+i+');">'+e()+'<div id="'+n+'-hp" class="'+r+'colorpicker-h-marker"></div></div>','<div id="'+n+'" class="'+t.classes+'"><div id="'+n+'-sv" class="'+r+'colorpicker-sv"><div class="'+r+'colorpicker-overlay1"><div class="'+r+'colorpicker-overlay2"><div id="'+n+'-svp" class="'+r+'colorpicker-selector1"><div class="'+r+'colorpicker-selector2"></div></div></div></div></div>'+o+"</div>"}})}),l("tinymce.core.ui.Path",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="\xbb"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes+'">'+e._getDataPathHtml(e.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t=this,n=e||[],r,o,i="",a=t.classPrefix;for(r=0,o=n.length;r<o;r++)i+=(r>0?'<div class="'+a+'divider" aria-hidden="true"> '+t.settings.delimiter+" </div>":"")+'<div role="button" class="'+a+"path-item"+(r==o-1?" "+a+"last":"")+'" data-index="'+r+'" tabindex="-1" id="'+t._id+"-"+r+'" aria-level="'+(r+1)+'">'+n[r].name+"</div>";return i||(i='<div class="'+a+'path-item">\xa0</div>'),i}})}),l("tinymce.core.ui.ElementPath",["tinymce.core.ui.Path"],function(e){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var t=this,n=t.settings.editor;return!1!==n.settings.elementpath&&(t.on("select",function(e){n.focus(),n.selection.select(this.row()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(r){for(var o=[],i=r.parents,a=i.length;a--;)if(1==i[a].nodeType&&!e(i[a])){var c=n.fire("ResolveName",{name:i[a].nodeName.toLowerCase(),target:i[a]});if(c.isDefaultPrevented()||o.push({name:c.name,element:i[a]}),c.isPropagationStopped())break}t.row(o)})),t._super()}})}),l("tinymce.core.ui.FormItem",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.classes.add("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),l("tinymce.core.ui.Form",["tinymce.core.ui.Container","tinymce.core.ui.FormItem","tinymce.core.util.Tools"],function(e,t,n){"use strict";return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,r=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),r.each(function(r){var o,i=r.settings.label;i&&(o=new t(n.extend({items:{type:"label",id:r._id+"-l",text:i,flex:0,forId:r._id,disabled:r.disabled()}},e.settings.formItemDefaults)),o.type="formitem",r.aria("labelledby",r._id+"-l"),void 0===r.settings.flex&&(r.settings.flex=1),e.replace(r,o),o.add(r))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.fromJSON(e.settings.data)},bindStates:function(){function e(){var e=0,n=[],r,o,i;if(!1!==t.settings.labelGapCalc)for(i="children"==t.settings.labelGapCalc?t.find("formitem"):t.items(),i.filter("formitem").each(function(t){var r=t.items()[0],o=r.getEl().clientWidth;e=o>e?o:e,n.push(r)}),o=t.settings.labelGap||0,r=n.length;r--;)n[r].settings.minWidth=e+o}var t=this;t._super(),t.on("show",e),e()}})}),l("tinymce.core.ui.FieldSet",["tinymce.core.ui.Form"],function(e){"use strict";return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),l("tinymce.core.content.LinkTargets",["tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Tools","tinymce.core.util.Uuid"],function(e,t,n,r,o,i){var a=o.trim,c=function(e,t,n,r,o){return{type:e,title:t,url:n,level:r,attach:o}},l=function(e){for(;e=e.parentNode;){var n=e.contentEditable;if(n&&"inherit"!==n)return t.isContentEditableTrue(e)}return!1},s=function(t,n){return e.DOM.select(t,n)},u=function(e){return e.innerText||e.textContent},d=function(e){return e.id?e.id:i.uuid("h")},f=function(e){return e&&"A"===e.nodeName&&(e.id||e.name)},m=function(e){return f(e)&&g(e)},p=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},g=function(e){return l(e)&&!t.isContentEditableFalse(e)},h=function(e){return p(e)&&g(e)},v=function(e){return p(e)?parseInt(e.nodeName.substr(1),10):0},y=function(e){var t=d(e),n=function(){e.id=t};return c("header",u(e),"#"+t,v(e),n)},b=function(e){var t=e.id||e.name,n=u(e);return c("anchor",n||"#"+t,"#"+t,0,r.noop)},x=function(e){return n.map(n.filter(e,h),y)},C=function(e){return n.map(n.filter(e,m),b)},w=function(e){return s("h1,h2,h3,h4,h5,h6,a:not([href])",e)},T=function(e){return a(e.title).length>0};return{find:function(e){var t=w(e);return n.filter(x(t).concat(C(t)),T)}}}),l("tinymce.core.ui.FilePicker",["global!window","tinymce.core.content.LinkTargets","tinymce.core.EditorManager","tinymce.core.ui.ComboBox","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a){"use strict";var c=function(){return e.tinymce?e.tinymce.activeEditor:n.activeEditor},l={},s=5,u=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},d=function(e){return a.map(e,u)},f=function(e,t){return{title:e,value:{title:e,url:t,attach:i.noop}}},m=function(e,t){return!o.find(t,function(t){return t.url===e})},p=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},g=function(e,t,n,r){var c={title:"-"},s=function(e){var r=o.filter(e[n],function(e){return m(e,t)});return a.map(r,function(e){return{title:e,value:{title:e,url:e,attach:i.noop}}})},u=function(e){var n=o.filter(t,function(t){return t.type==e});return d(n)},g=function(){var e=u("anchor"),t=p(r,"anchor_top","#top"),n=p(r,"anchor_bottom","#bottom");return null!==t&&e.unshift(f("<top>",t)),null!==n&&e.push(f("<bottom>",n)),e},h=function(e){return o.reduce(e,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(c,t)},[])};return!1===r.typeahead_urls?[]:"file"===n?h([v(e,s(l)),v(e,u("header")),v(e,g())]):v(e,s(l))},h=function(e,t){var n=l[t];/^https?/.test(e)&&(n?-1===o.indexOf(n,e)&&(l[t]=n.slice(0,5).concat(e)):l[t]=[e])},v=function(e,t){var n=e.toLowerCase(),r=a.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===r.length&&r[0].title===e?[]:r},y=function(e){var t=e.title;return t.raw?t.raw:t},b=function(e,n,r,o){var i=function(i){var a=t.find(r),c=g(i,a,o,n);e.showAutoComplete(c,i)};e.on("autocomplete",function(){i(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var r=y(n);"image"===o?e.fire("change",{meta:{alt:r,attach:n.attach}}):e.fire("change",{meta:{text:r,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&i("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||h(e.value(),o)})})},x=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}},C=function(e,t,n){var r=t.filepicker_validator_handler;if(r){var o=function(t){if(0===t.length)return void e.statusLevel("none");r({url:t,type:n},function(t){var n=x(t);e.statusMessage(n.message),e.statusLevel(n.status)})};e.state.on("change:value",function(e){o(e.value)})}};return r.extend({init:function(t){var n=this,r=c(),o=r.settings,i,l,s,u=t.filetype;t.spellcheck=!1,s=o.file_picker_types||o.file_browser_callback_types,s&&(s=a.makeMap(s,/[, ]/)),s&&!s[u]||(l=o.file_picker_callback,!l||s&&!s[u]?!(l=o.file_browser_callback)||s&&!s[u]||(i=function(){l(n.getEl("inp").id,n.value(),u,e)}):i=function(){var e=n.fire("beforecall").meta;e=a.extend({filetype:u},e),l.call(r,function(e,t){n.value(e).fire("change",{meta:t})},n.value(),e)}),i&&(t.icon="browse",t.onaction=i),n._super(t),b(n,o,r.getBody(),u),C(n,o,u)}})}),l("tinymce.core.ui.FitLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),l("tinymce.core.ui.FlexLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,r,o,i,a,c,l,s,u,d,f,m,p,g,h,v=[],y,b,x,C,w,T,k,E,S,N,R,A,_,B,P,D,M,I,O,L,F,H,U=Math.max,z=Math.min;for(r=e.items().filter(":visible"),o=e.layoutRect(),i=e.paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,c=a.align,l=e.isRtl()?a.pack||"end":a.pack,s=a.spacing||0,"row-reversed"!=f&&"column-reverse"!=f||(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"==f?(S="y",k="h",E="minH",N="maxH",A="innerH",R="top",_="deltaH",B="contentH",O="left",M="w",P="x",D="innerW",I="minW",L="right",F="deltaW",H="contentW"):(S="x",k="w",E="minW",N="maxW",A="innerW",R="left",_="deltaW",B="contentW",O="top",M="h",P="y",D="innerH",I="minH",L="bottom",F="deltaH",H="contentH"),d=o[A]-i[R]-i[R],T=u=0,t=0,n=r.length;t<n;t++)m=r[t],p=m.layoutRect(),g=m.settings,h=g.flex,d-=t<n-1?s:0,h>0&&(u+=h,p[N]&&v.push(m),p.flex=h),d-=p[E],(y=i[O]+p[I]+i[L])>T&&(T=y);if(C={},C[E]=d<0?o[E]-d+o[_]:o[A]-d+o[_],C[I]=T+o[F],C[B]=o[A]-d,C[H]=T,C.minW=z(C.minW,o.maxW),C.minH=z(C.minH,o.maxH),C.minW=U(C.minW,o.startMinWidth),C.minH=U(C.minH,o.startMinHeight),!o.autoResize||C.minW==o.minW&&C.minH==o.minH){for(x=d/u,t=0,n=v.length;t<n;t++)m=v[t],p=m.layoutRect(),b=p[N],y=p[E]+p.flex*x,y>b?(d-=p[N]-p[E],u-=p.flex,p.flex=0,p.maxFlexSize=b):p.maxFlexSize=0;for(x=d/u,w=i[R],C={},0===u&&("end"==l?w=d+i[R]:"center"==l?(w=Math.round(o[A]/2-(o[A]-d)/2)+i[R])<0&&(w=i[R]):"justify"==l&&(w=i[R],s=Math.floor(d/(r.length-1)))),C[P]=i[O],t=0,n=r.length;t<n;t++)m=r[t],p=m.layoutRect(),y=p.maxFlexSize||p[E],"center"===c?C[P]=Math.round(o[D]/2-p[M]/2):"stretch"===c?(C[M]=U(p[I]||0,o[D]-i[O]-i[L]),C[P]=i[O]):"end"===c&&(C[P]=o[D]-p[M]-i.top),p.flex>0&&(y+=p.flex*x),C[k]=y,C[S]=w,m.layoutRect(C),m.recalc&&m.recalc(),w+=y+s}else if(C.w=C.minW,C.h=C.minH,e.layoutRect(C),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}})}),l("tinymce.core.ui.FlowLayout",["tinymce.core.ui.Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}})}),l("tinymce.core.fmt.FontInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.core.dom.DOMUtils"],function(e,t,n,r,o){var i=function(e,n,r){for(;r!==n;){if(r.style[e]){var o=r.style[e];return""!==o?t.some(o):t.none()}r=r.parentNode}return t.none()},a=function(e){return/[0-9.]+px$/.test(e)?Math.round(72*parseInt(e,10)/96)+"pt":e},c=function(e){return e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")},l=function(e,n){return t.from(o.DOM.getStyle(n,e,!0))},s=function(e){return function(o,a){return t.from(a).map(n.fromDom).filter(r.isElement).bind(function(t){return i(e,o,t.dom()).or(l(e,t.dom()))}).getOr("")}};return{getFontSize:s("fontSize"),getFontFamily:e.compose(c,s("fontFamily")),toPt:a}}),l("tinymce.core.ui.FormatControls",["tinymce.core.ui.Control","tinymce.core.ui.Widget","tinymce.core.ui.FloatPanel","tinymce.core.util.Tools","tinymce.core.util.Arr","tinymce.core.dom.DOMUtils","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.fmt.FontInfo"],function(e,t,n,r,o,i,a,c,l){function s(e){e.settings.ui_container&&(c.container=i.DOM.select(e.settings.ui_container)[0])}function u(t){t.on("ScriptsLoaded",function(){t.rtl&&(e.rtl=!0)})}function d(e){function t(t,n){return function(){var r=this;e.on("nodeChange",function(o){var i=e.formatter,a=null;f(o.parents,function(e){if(f(t,function(t){if(n?i.matchNode(e,n,{value:t.value})&&(a=t.value):i.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),r.value(a)})}}function o(t){return function(){var n=this,r=function(e){return e?e.split(",")[0]:""};e.on("init nodeChange",function(o){var i,a=null;i=l.getFontFamily(e.getBody(),o.element),f(t,function(e){e.value.toLowerCase()===i.toLowerCase()&&(a=e.value)}),f(t,function(e){a||r(e.value).toLowerCase()!==r(i).toLowerCase()||(a=e.value)}),n.value(a),!a&&i&&n.text(r(i))})}}function i(t){return function(){var n=this;e.on("init nodeChange",function(r){var o,i,a=null;o=l.getFontSize(e.getBody(),r.element),i=l.toPt(o),f(t,function(e){e.value===o?a=o:e.value===i&&(a=i)}),n.value(a),a||n.text(i)})}}function a(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function c(){function t(e){var n=[];if(e)return f(e,function(e){var i={text:e.title,icon:e.icon};if(e.items)i.menu=t(e.items);else{var a=e.format||"custom"+r++;e.format||(e.name=a,o.push(e)),i.format=a,i.cmd=e.cmd}n.push(i)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?i.concat(e.settings.style_formats):i:e.settings.style_formats||i)}var r=0,o=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){f(o,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(r=t.settings.cmd)&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&p(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function s(t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}}function u(t){return function(){function n(){var n="redo"==t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()}var r=this;r.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){r.disabled(e.readonly||!n())})}}function d(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function p(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}function g(t){var n=t.length;return r.each(t,function(t){t.menu&&(t.hidden=0===g(t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--}),n}function h(t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(h(t.menu)>0),!t.menu&&t.settings.menu&&t.visible(g(t.settings.menu)>0);var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--}),n}var v;v=c(),f({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:s(n),onclick:function(){p(n)}})}),f({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),f({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:s(n)})});var y=function(e){var t=e;return t.length>0&&"-"===t[0].text&&(t=t.slice(1)),t.length>0&&"-"===t[t.length-1].text&&(t=t.slice(0,t.length-1)),t},b=function(t){var n,o;if("string"==typeof t)o=t.split(" ");else if(r.isArray(t))return m(r.map(t,b));return n=r.grep(o,function(t){return"|"===t||t in e.menuItems}),r.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},x=function(t){var n=[{text:"-"}],o=r.grep(e.menuItems,function(e){return e.context===t});return r.each(o,function(e){"before"==e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"==e.separator&&n.push({text:"|"})}),n},C=function(e){return y(e.insert_button_items?b(e.insert_button_items):x("insert"))};e.addButton("undo",{tooltip:"Undo",onPostRender:u("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:u("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:d,cmd:"mceToggleVisualAid"}),e.addButton("remove",{tooltip:"Remove",icon:"remove",cmd:"Delete"}),e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(C(e.settings)),this.menu.renderNew()}}),f({cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"],bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:v,onShowMenu:function(){e.settings.style_formats_autohide&&h(this.menu)}}),e.addButton("formatselect",function(){var n=[],r=a(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");return f(r,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:r[0][0],values:n,fixedWidth:!0,onselect:p,onPostRender:t(n)}}),e.addButton("fontselect",function(){var t="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=[],r=a(e.settings.font_formats||t);return f(r,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:o(n),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",r=e.settings.fontsize_formats||n;return f(r.split(" "),function(e){var n=e,r=e,o=e.split("=");o.length>1&&(n=o[0],r=o[1]),t.push({text:n,value:r})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:i(t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:v})}var f=r.each,m=function(e){return o.reduce(e,function(e,t){return e.concat(t)},[])};return a.on("AddEditor",function(e){var t=e.editor;u(t),d(t),s(t)}),e.translate=function(e){return a.translate(e)},t.tooltips=!c.iOS,{}}),l("tinymce.core.ui.GridLayout",["tinymce.core.ui.AbsoluteLayout"],function(e){"use strict";return e.extend({recalc:function(e){var t,n,r,o,i,a,c,l,s,u,d,f,m,p,g,h,v,y,b,x,C,w,T,k=[],E=[],S,N,R,A,_,B;t=e.settings,o=e.items().filter(":visible"),i=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(o.length)),n=Math.ceil(o.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,x=t.alignH||t.align,C=t.alignV||t.align,h=e.paddingBox,_="reverseRows"in t?t.reverseRows:e.isRtl(),x&&"string"==typeof x&&(x=[x]),C&&"string"==typeof C&&(C=[C]);for(d=0;d<r;d++)k.push(0);for(f=0;f<n;f++)E.push(0);for(f=0;f<n;f++)for(d=0;d<r&&(u=o[f*r+d]);d++)s=u.layoutRect(),S=s.minW,N=s.minH,k[d]=S>k[d]?S:k[d],E[f]=N>E[f]?N:E[f];for(R=i.innerW-h.left-h.right,w=0,d=0;d<r;d++)w+=k[d]+(d>0?y:0),R-=(d>0?y:0)+k[d];for(A=i.innerH-h.top-h.bottom,T=0,f=0;f<n;f++)T+=E[f]+(f>0?b:0),A-=(f>0?b:0)+E[f];if(w+=h.left+h.right,T+=h.top+h.bottom,l={},l.minW=w+(i.w-i.innerW),l.minH=T+(i.h-i.innerH),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH,l.minW=Math.min(l.minW,i.maxW),l.minH=Math.min(l.minH,i.maxH),l.minW=Math.max(l.minW,i.startMinWidth),l.minH=Math.max(l.minH,i.startMinHeight),!i.autoResize||l.minW==i.minW&&l.minH==i.minH){i.autoResize&&(l=e.layoutRect(l),l.contentW=l.minW-i.deltaW,l.contentH=l.minH-i.deltaH);var P;P="start"==t.packV?0:A>0?Math.floor(A/n):0;var D=0,M=t.flexWidths;if(M)for(d=0;d<M.length;d++)D+=M[d];else D=r;var I=R/D;for(d=0;d<r;d++)k[d]+=M?M[d]*I:I;for(p=h.top,f=0;f<n;f++){for(m=h.left,c=E[f]+P,d=0;d<r&&(B=_?f*r+r-1-d:f*r+d,u=o[B]);d++)g=u.settings,s=u.layoutRect(),a=Math.max(k[d],s.startMinWidth),s.x=m,s.y=p,v=g.alignH||(x?x[d]||x[0]:null),"center"==v?s.x=m+a/2-s.w/2:"right"==v?s.x=m+a-s.w:"stretch"==v&&(s.w=a),v=g.alignV||(C?C[d]||C[0]:null),"center"==v?s.y=p+c/2-s.h/2:"bottom"==v?s.y=p+c-s.h:"stretch"==v&&(s.h=c),u.layoutRect(s),m+=a+y,u.recalc&&u.recalc();p+=c+b}}else if(l.w=l.minW,l.h=l.minH,e.layoutRect(l),this.recalc(e),null===e._lastRect){var O=e.parent();O&&(O._lastRect=null,O.recalc())}}})}),l("tinymce.core.ui.Iframe",["tinymce.core.ui.Widget","tinymce.core.util.Delay"],function(e,t){"use strict";return e.extend({renderHtml:function(){var e=this;return e.classes.add("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,n){var r=this,o=this.getEl().contentWindow.document.body;return o?(o.innerHTML=e,n&&n()):t.setTimeout(function(){r.html(e)}),this}})}),l("tinymce.core.ui.InfoBox",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("infobox"),t.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes+'"><div id="'+e._id+'-body">'+e.encode(e.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),l("tinymce.core.ui.Label",["tinymce.core.ui.Widget","tinymce.core.ui.DomUtils"],function(e,t){"use strict";return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("widget").add("label"),t.canFocus=!1,e.multiline&&t.classes.add("autoscroll"),e.strong&&t.classes.add("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){t.getSize(e.getEl()).width>n.maxW&&(n.minW=n.maxW,e.classes.add("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e=this,t,n,r=e.settings.forId,o=e.settings.html?e.settings.html:e.encode(e.state.get("text"));return!r&&(n=e.settings.forName)&&(t=e.getRoot().find("#"+n)[0])&&(r=t._id),r?'<label id="'+e._id+'" class="'+e.classes+'"'+(r?' for="'+r+'"':"")+">"+o+"</label>":'<span id="'+e._id+'" class="'+e.classes+'">'+o+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}})}),l("tinymce.core.ui.Toolbar",["tinymce.core.ui.Container"],function(e){"use strict";return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.classes.add("toolbar")},postRender:function(){var e=this;return e.items().each(function(e){e.classes.add("toolbar-item")}),e._super()}})}),l("tinymce.core.ui.MenuBar",["tinymce.core.ui.Toolbar"],function(e){"use strict";return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),l("tinymce.core.ui.MenuButton",["tinymce.core.ui.Button","tinymce.core.ui.Factory","tinymce.core.ui.MenuBar"],function(e,t,n){"use strict";function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var o=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),e=t.settings,t.classes.add("menubtn"),e.fixedWidth&&t.classes.add("fixed-width"),t.aria("haspopup",!0),t.state.set("menu",e.menu||t.render())},showMenu:function(e){var n=this,r;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(r=n.state.get("menu")||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",r.renderTo?n.menu=r.parent(n).show().renderTo():n.menu=t.create(r).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type),n.aria("expanded","show"==e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,o=e.settings.icon,i,a=e.state.get("text"),c="";return i=e.settings.image,i?(o="none","string"!=typeof i&&(i=window.getSelection?i[0]:i[1]),i=" style=\"background-image: url('"+i+"')\""):i="",a&&(e.classes.add("btn-has-text"),c='<span class="'+r+'txt">'+e.encode(a)+"</span>"),o=e.settings.icon?r+"ico "+r+"i-"+o:"",e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+i+"></i>":"")+c+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n=t.control,r=e.parent(),i;n&&r&&n instanceof o&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(i=!0),e.hideMenu())}),i&&(n.focus(),n.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}});return o}),l("tinymce.core.ui.MenuItem",["tinymce.core.ui.Widget","tinymce.core.ui.Factory","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,r){"use strict";return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this,n;t._super(e),e=t.settings,t.classes.add("menu-item"),e.menu&&t.classes.add("menu-item-expand"),e.preview&&t.classes.add("menu-item-preview"),n=t.state.get("text"),"-"!==n&&"|"!==n||(t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-")),e.selectable&&(t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.classes.add("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,r,o=e.parent();if(o.items().each(function(t){t!==e&&t.hideMenu()}),n.menu){r=e.menu,r?r.show():(r=n.menu,r.length?r={type:"menu",items:r}:r.type=r.type||"menu",o.settings.itemDefaults&&(r.itemDefaults=o.settings.itemDefaults),r=e.menu=t.create(r).parent(e).renderTo(),r.reflow(),r.on("cancel",function(t){t.stopPropagation(),e.focus(),r.hide()}),r.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),r.on("hide",function(t){t.control===r&&e.classes.remove("selected")}),r.submenu=!0),r._parentMenu=o,r.classes.add("menu-sub");var i=r.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);r.moveRel(e.getEl(),i),r.rel=i,i="menu-sub-"+i,r.classes.remove(r._lastRel).add(i),r._lastRel=i,e.classes.add("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){function e(e){var t,r,o={};for(o=n.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(r=o[e[t].toLowerCase()])&&(e[t]=r);return e.join("+")}function t(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){var n=c.match||"";return n?e.replace(RegExp(t(n),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function o(e){return e.replace(RegExp(t("!mce~match["),"g"),"<b>").replace(RegExp(t("]mce~match!"),"g"),"</b>")}var i=this,a=i._id,c=i.settings,l=i.classPrefix,s=i.state.get("text"),u=i.settings.icon,d="",f=c.shortcut,m=i.encode(c.url),p="";return u&&i.parent().classes.add("menu-has-icons"),c.image&&(d=" style=\"background-image: url('"+c.image+"')\""),f&&(f=e(f)),u=l+"ico "+l+"i-"+(i.settings.icon||"none"),p="-"!==s?'<i class="'+u+'"'+d+"></i>\xa0":"",s=o(i.encode(r(s))),m=o(i.encode(r(m))),'<div id="'+a+'" class="'+i.classes+'" tabindex="-1">'+p+("-"!==s?'<span id="'+a+'-text" class="'+l+'text">'+s+"</span>":"")+(f?'<div id="'+a+'-shortcut" class="'+l+'menu-shortcut">'+f+"</div>":"")+(c.menu?'<div class="'+l+'caret"></div>':"")+(m?'<div class="'+l+'menu-item-link">'+m+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var o=e.getEl("text");o&&o.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),r.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){var e=this;return e.parent().items().each(function(e){e.classes.remove("selected")}),e.classes.toggle("selected",!0),e},active:function(e){return void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),l("tinymce.core.ui.Throbber",["tinymce.core.dom.DomQuery","tinymce.core.ui.Control","tinymce.core.util.Delay"],function(e,t,n){"use strict";return function(r,o){var i=this,a,c=t.classPrefix,l;i.show=function(t,s){function u(){a&&(e(r).append('<div class="'+c+"throbber"+(o?" "+c+"throbber-inline":"")+'"></div>'),s&&s())}return i.hide(),a=!0,t?l=n.setTimeout(u,t):u(),i},i.hide=function(){var e=r.lastChild;return n.clearTimeout(l),e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),a=!1,i}}}),l("tinymce.core.ui.Menu",["tinymce.core.ui.FloatPanel","tinymce.core.ui.MenuItem","tinymce.core.ui.Throbber","tinymce.core.util.Tools"],function(e,t,n,r){"use strict";return e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var n=e.items,o=n.length;o--;)n[o]=r.extend({},e.itemDefaults,n[o]);t._super(e),t.classes.add("menu")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},load:function(){function e(){t.throbber&&(t.throbber.hide(),t.throbber=null)}var t=this,r,o;(o=t.settings.itemsFactory)&&(t.throbber||(t.throbber=new n(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,function(){t.items().remove(),t.fire("loading")}),t.on("hide close",e)),t.requestTime=r=(new Date).getTime(),t.settings.itemsFactory(function(n){if(0===n.length)return void t.hide();t.requestTime===r&&(t.getEl().style.width="",t.getEl("body").style.width="",e(),t.items().remove(),t.getEl("body").innerHTML="",t.add(n),t.renderNew(),t.fire("loaded"))}))},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e._super()}})}),l("tinymce.core.ui.ListBox",["tinymce.core.ui.MenuButton","tinymce.core.ui.Menu"],function(e,t){"use strict";return e.extend({init:function(e){function t(r){for(var a=0;a<r.length;a++){if(o=r[a].selected||e.value===r[a].value)return i=i||r[a].text,n.state.set("value",r[a].value),!0;if(r[a].menu&&t(r[a].menu))return!0}}var n=this,r,o,i,a;n._super(e),e=n.settings,n._values=r=e.values,r&&(void 0!==e.value&&t(r),!o&&r.length>0&&(i=r[0].text,n.state.set("value",r[0].value)),n.state.set("menu",r)),n.state.set("text",e.text||i),n.classes.add("listbox"),n.on("select",function(t){var r=t.control;a&&(t.lastControl=a),e.multiple?r.active(!r.active()):n.value(t.control.value()),a=r})},bindStates:function(){function e(e,n){e instanceof t&&e.items().each(function(e){e.hasMenus()||e.active(e.value()===n)})}function n(e,t){var r;if(e)for(var o=0;o<e.length;o++){if(e[o].value===t)return e[o];if(e[o].menu&&(r=n(e[o].menu,t)))return r}}var r=this;return r.on("show",function(t){e(t.control,r.value())}),r.state.on("change:value",function(e){var t=n(r.state.get("menu"),e.value);t?r.text(t.text):r.text(r.settings.text)}),r._super()}})}),l("tinymce.core.ui.Radio",["tinymce.core.ui.Checkbox"],function(e){"use strict";return e.extend({Defaults:{classes:"radio",role:"radio"}})}),l("tinymce.core.ui.ResizeHandle",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper"],function(e,t){"use strict";return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.classes.add("resizehandle"),"both"==e.settings.direction&&e.classes.add("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),l("tinymce.core.ui.SelectBox",["tinymce.core.ui.Widget"],function(e){"use strict";function t(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}return e.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e=this,n,r="";return n=t(e._options),e.size&&(r=' size = "'+e.size+'"'),'<select id="'+e._id+'" class="'+e.classes+'"'+r+">"+n+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(n){e.getEl().innerHTML=t(n.value)}),e._super()}})}),l("tinymce.core.ui.Slider",["tinymce.core.ui.Widget","tinymce.core.ui.DragHelper","tinymce.core.ui.DomUtils"],function(e,t,n){"use strict";function r(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function o(e,t,n){e.setAttribute("aria-"+t,n)}function i(e,t){var r,i,a,c,l,s;"v"==e.settings.orientation?(c="top",a="height",i="h"):(c="left",a="width",i="w"),s=e.getEl("handle"),r=(e.layoutRect()[i]||100)-n.getSize(s)[a],l=r*((t-e._minValue)/(e._maxValue-e._minValue))+"px",s.style[c]=l,s.style.height=e.layoutRect().h+"px",o(s,"valuenow",t),o(s,"valuetext",""+e.settings.previewFilter(t)),o(s,"valuemin",e._minValue),o(s,"valuemax",e._maxValue)}return e.extend({init:function(e){var t=this;e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),t._super(e),t.classes.add("slider"),"v"==e.orientation&&t.classes.add("vertical"),t._minValue=e.minValue||0,t._maxValue=e.maxValue||100,t._initValue=t.state.get("value")},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes+'"><div id="'+t+'-handle" class="'+n+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){function e(e,t,n){return(n+e)/(t-e)}function o(e,t,n){return n*(t-e)-e}function i(t,n){function i(i){var a;a=c.value(),a=o(t,n,e(t,n,a)+.05*i),a=r(a,t,n),c.value(a),c.fire("dragstart",{value:a}),c.fire("drag",{value:a}),c.fire("dragend",{value:a})}c.on("keydown",function(e){switch(e.keyCode){case 37:case 38:i(-1);break;case 39:case 40:i(1)}})}function a(e,o,i){var a,l,s,p,g;c._dragHelper=new t(c._id,{handle:c._id+"-handle",start:function(e){a=e[u],l=parseInt(c.getEl("handle").style[d],10),s=(c.layoutRect()[m]||100)-n.getSize(i)[f],c.fire("dragstart",{value:g})},drag:function(t){var n=t[u]-a;p=r(l+n,0,s),i.style[d]=p+"px",g=e+p/s*(o-e),c.value(g),c.tooltip().text(""+c.settings.previewFilter(g)).show().moveRel(i,"bc tc"),c.fire("drag",{value:g})},stop:function(){c.tooltip().hide(),c.fire("dragend",{value:g})}})}var c=this,l,s,u,d,f,m;l=c._minValue,s=c._maxValue,"v"==c.settings.orientation?(u="screenY",d="top",f="height",m="h"):(u="screenX",d="left",f="width",m="w"),c._super(),i(l,s,c.getEl("handle")),a(l,s,c.getEl("handle"))},repaint:function(){this._super(),i(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){i(e,t.value)}),e._super()}})}),l("tinymce.core.ui.Spacer",["tinymce.core.ui.Widget"],function(e){"use strict";return e.extend({renderHtml:function(){var e=this;return e.classes.add("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes+'"></div>'}})}),l("tinymce.core.ui.SplitButton",["tinymce.core.ui.MenuButton","tinymce.core.ui.DomUtils","tinymce.core.dom.DomQuery"],function(e,t,n){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this,r=e.getEl(),o=e.layoutRect(),i,a;return e._super(),i=r.firstChild,a=r.lastChild,n(i).css({width:o.w-t.getSize(a).width,height:o.h-2}),n(a).css({height:o.h-2}),e},activeMenu:function(e){var t=this;n(t.getEl().lastChild).toggleClass(t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r,o=e.state.get("icon"),i=e.state.get("text"),a="";return r=e.settings.image,r?(o="none","string"!=typeof r&&(r=window.getSelection?r[0]:r[1]),r=" style=\"background-image: url('"+r+"')\""):r="",o=e.settings.icon?n+"ico "+n+"i-"+o:"",i&&(e.classes.add("btn-has-text"),a='<span class="'+n+'txt">'+e.encode(i)+"</span>"),'<div id="'+t+'" class="'+e.classes+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+r+"></i>":"")+a+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(o?"\xa0":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void(t&&t.call(this,e));n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),l("tinymce.core.ui.StackLayout",["tinymce.core.ui.FlowLayout"],function(e){"use strict";return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}})}),l("tinymce.core.ui.TabPanel",["tinymce.core.ui.Panel","tinymce.core.dom.DomQuery","tinymce.core.ui.DomUtils"],function(e,t,n){"use strict";return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t(n).removeClass(this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t(n).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var i=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",i),n+='<div id="'+i+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e=this,t,r,o;r=n.getSize(e.getEl("head")).width,r=r<0?0:r,o=0,e.items().each(function(e){r=Math.max(r,e.layoutRect().minW),o=Math.max(o,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=r,e.settings.h=o,e.layoutRect({x:0,y:0,w:r,h:o})});var i=n.getSize(e.getEl("head")).height;return e.settings.minWidth=r,e.settings.minHeight=o+i,t=e._super(),t.deltaH+=i,t.innerH=t.h-t.deltaH,t}})}),l("tinymce.core.ui.TextBox",["tinymce.core.ui.Widget","tinymce.core.util.Tools","tinymce.core.ui.DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13==e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e=this,t,n,r,o,i=0,a;t=e.getEl().style,n=e._layoutRect,a=e._lastRepaintRect||{};var c=document;return!e.settings.multiline&&c.all&&(!c.documentMode||c.documentMode<=8)&&(t.lineHeight=n.h-i+"px"),r=e.borderBox,o=r.left+r.right+8,i=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==a.x&&(t.left=n.x+"px",a.x=n.x),n.y!==a.y&&(t.top=n.y+"px",a.y=n.y),n.w!==a.w&&(t.width=n.w-o+"px",a.w=n.w),n.h!==a.h&&(t.height=n.h-i+"px",a.h=n.h),e._lastRepaintRect=a,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,r=e.settings,o,i;return o={id:e._id,hidefocus:"1"},t.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(e){o[e]=r[e]}),e.disabled()&&(o.disabled="disabled"),r.subtype&&(o.type=r.subtype),i=n.create(r.multiline?"textarea":"input",o),i.value=e.state.get("value"),i.className=e.classes,i.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!=t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}})}),l("tinymce.core.ui.Api",["tinymce.core.ui.Selector","tinymce.core.ui.Collection","tinymce.core.ui.ReflowQueue","tinymce.core.ui.Control","tinymce.core.ui.Factory","tinymce.core.ui.KeyboardNavigation","tinymce.core.ui.Container","tinymce.core.ui.DragHelper","tinymce.core.ui.Scrollable","tinymce.core.ui.Panel","tinymce.core.ui.Movable","tinymce.core.ui.Resizable","tinymce.core.ui.FloatPanel","tinymce.core.ui.Window","tinymce.core.ui.MessageBox","tinymce.core.ui.Tooltip","tinymce.core.ui.Widget","tinymce.core.ui.Progress","tinymce.core.ui.Notification","tinymce.core.ui.Layout","tinymce.core.ui.AbsoluteLayout","tinymce.core.ui.Button","tinymce.core.ui.ButtonGroup","tinymce.core.ui.Checkbox","tinymce.core.ui.ComboBox","tinymce.core.ui.ColorBox","tinymce.core.ui.PanelButton","tinymce.core.ui.ColorButton","tinymce.core.ui.ColorPicker","tinymce.core.ui.Path","tinymce.core.ui.ElementPath","tinymce.core.ui.FormItem","tinymce.core.ui.Form","tinymce.core.ui.FieldSet","tinymce.core.ui.FilePicker","tinymce.core.ui.FitLayout","tinymce.core.ui.FlexLayout","tinymce.core.ui.FlowLayout","tinymce.core.ui.FormatControls","tinymce.core.ui.GridLayout","tinymce.core.ui.Iframe","tinymce.core.ui.InfoBox","tinymce.core.ui.Label","tinymce.core.ui.Toolbar","tinymce.core.ui.MenuBar","tinymce.core.ui.MenuButton","tinymce.core.ui.MenuItem","tinymce.core.ui.Throbber","tinymce.core.ui.Menu","tinymce.core.ui.ListBox","tinymce.core.ui.Radio","tinymce.core.ui.ResizeHandle","tinymce.core.ui.SelectBox","tinymce.core.ui.Slider","tinymce.core.ui.Spacer","tinymce.core.ui.SplitButton","tinymce.core.ui.StackLayout","tinymce.core.ui.TabPanel","tinymce.core.ui.TextBox"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m,p,g,h,v,y,b,x,C,w,T,k,E,S,N,R,A,_,B,P,D,M,I,O,L,F,H,U,z,W,V,j,q,$,K,Y,X,G,J,Q,Z,ee,te,ne,re,oe){"use strict";var ie=function(e,t){o.add(e.split(".").pop(),t)},ae=function(e,t,n){var r,o;for(o=t.split(/[.\/]/),r=0;r<o.length-1;++r)void 0===e[o[r]]&&(e[o[r]]={}),e=e[o[r]];e[o[o.length-1]]=n,ie(t,n)},ce=function(ie){ae(ie,"ui.Selector",e),ae(ie,"ui.Collection",t),ae(ie,"ui.ReflowQueue",n),ae(ie,"ui.Control",r),ae(ie,"ui.Factory",o),ae(ie,"ui.KeyboardNavigation",i),ae(ie,"ui.Container",a),ae(ie,"ui.DragHelper",c),ae(ie,"ui.Scrollable",l),ae(ie,"ui.Panel",s),ae(ie,"ui.Movable",u),ae(ie,"ui.Resizable",d),ae(ie,"ui.FloatPanel",f),ae(ie,"ui.Window",m),ae(ie,"ui.MessageBox",p),ae(ie,"ui.Tooltip",g),ae(ie,"ui.Widget",h),ae(ie,"ui.Progress",v),ae(ie,"ui.Notification",y),ae(ie,"ui.Layout",b),ae(ie,"ui.AbsoluteLayout",x),ae(ie,"ui.Button",C),ae(ie,"ui.ButtonGroup",w),ae(ie,"ui.Checkbox",T),ae(ie,"ui.ComboBox",k),ae(ie,"ui.ColorBox",E),ae(ie,"ui.PanelButton",S),ae(ie,"ui.ColorButton",N),ae(ie,"ui.ColorPicker",R),ae(ie,"ui.Path",A),ae(ie,"ui.ElementPath",_),ae(ie,"ui.FormItem",B),ae(ie,"ui.Form",P),ae(ie,"ui.FieldSet",D),ae(ie,"ui.FilePicker",M),ae(ie,"ui.FitLayout",I),ae(ie,"ui.FlexLayout",O),ae(ie,"ui.FlowLayout",L),ae(ie,"ui.FormatControls",F),ae(ie,"ui.GridLayout",H),ae(ie,"ui.Iframe",U),ae(ie,"ui.InfoBox",z),ae(ie,"ui.Label",W),ae(ie,"ui.Toolbar",V),ae(ie,"ui.MenuBar",j),ae(ie,"ui.MenuButton",q),ae(ie,"ui.MenuItem",$),ae(ie,"ui.Throbber",K),ae(ie,"ui.Menu",Y),ae(ie,"ui.ListBox",X),ae(ie,"ui.Radio",G),ae(ie,"ui.ResizeHandle",J),ae(ie,"ui.SelectBox",Q),ae(ie,"ui.Slider",Z),ae(ie,"ui.Spacer",ee),ae(ie,"ui.SplitButton",te),ae(ie,"ui.StackLayout",ne),ae(ie,"ui.TabPanel",re),ae(ie,"ui.TextBox",oe),ae(ie,"ui.Api",le)},le={appendTo:ce};return le}),l("tinymce.core.api.Tinymce",["tinymce.core.geom.Rect","tinymce.core.util.Promise","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.util.Tools","tinymce.core.dom.DomQuery","tinymce.core.html.Styles","tinymce.core.dom.TreeWalker","tinymce.core.html.Entities","tinymce.core.dom.DOMUtils","tinymce.core.dom.ScriptLoader","tinymce.core.AddOnManager","tinymce.core.dom.RangeUtils","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.html.DomParser","tinymce.core.html.Writer","tinymce.core.html.Serializer","tinymce.core.dom.Serializer","tinymce.core.util.VK","tinymce.core.dom.ControlSelection","tinymce.core.dom.BookmarkManager","tinymce.core.dom.Selection","tinymce.core.Formatter","tinymce.core.UndoManager","tinymce.core.EditorCommands","tinymce.core.util.URI","tinymce.core.util.Class","tinymce.core.util.EventDispatcher","tinymce.core.util.Observable","tinymce.core.WindowManager","tinymce.core.NotificationManager","tinymce.core.EditorObservable","tinymce.core.Shortcuts","tinymce.core.Editor","tinymce.core.util.I18n","tinymce.core.FocusManager","tinymce.core.EditorManager","tinymce.core.util.XHR","tinymce.core.util.JSON","tinymce.core.util.JSONRequest","tinymce.core.util.JSONP","tinymce.core.util.LocalStorage","tinymce.core.api.Compat","tinymce.core.util.Color","tinymce.core.ui.Api"],function(e,t,n,r,o,i,a,c,l,s,u,d,f,m,p,g,h,v,y,b,x,C,w,T,k,E,S,N,R,A,_,B,P,D,M,I,O,L,F,H,U,z,W,V,j,q,$,K,Y){var X=U,G=function(e,t,n){var r,o;for(o=t.split(/[.\/]/),r=0;r<o.length-1;++r)void 0===e[o[r]]&&(e[o[r]]={}),e=e[o[r]];e[o[o.length-1]]=n};return G(X,"geom.Rect",e),G(X,"util.Promise",t),G(X,"util.Delay",n),G(X,"Env",r),G(X,"dom.EventUtils",o),G(X,"dom.Sizzle",i),G(X,"util.Tools",a),G(X,"dom.DomQuery",c),G(X,"html.Styles",l),G(X,"dom.TreeWalker",s),G(X,"html.Entities",u),G(X,"dom.DOMUtils",d),G(X,"dom.ScriptLoader",f),G(X,"AddOnManager",m),G(X,"dom.RangeUtils",p),G(X,"html.Node",g),G(X,"html.Schema",h),G(X,"html.SaxParser",v),G(X,"html.DomParser",y),G(X,"html.Writer",b),G(X,"html.Serializer",x),G(X,"dom.Serializer",C),G(X,"util.VK",w),G(X,"dom.ControlSelection",T),G(X,"dom.BookmarkManager",k),G(X,"dom.Selection",E),G(X,"Formatter",S),G(X,"UndoManager",N),G(X,"EditorCommands",R),G(X,"util.URI",A),G(X,"util.Class",_),G(X,"util.EventDispatcher",B),G(X,"util.Observable",P),G(X,"WindowManager",D),G(X,"NotificationManager",M),G(X,"EditorObservable",I),G(X,"Shortcuts",O),G(X,"Editor",L),G(X,"util.I18n",F),G(X,"FocusManager",H),G(X,"EditorManager",U),G(X,"util.XHR",z),G(X,"util.JSON",W),G(X,"util.JSONRequest",V),G(X,"util.JSONP",j),G(X,"util.LocalStorage",q),G(X,"Compat",$),G(X,"util.Color",K),Y.appendTo(X),$.register(X),X}),l("tinymce.core.Register",[],function(){var t=this||window;return{exposeToModuleLoaders:function(n){"function"==typeof t.define&&(t.define.amd||(t.define("ephox/tinymce",[],function(){return n}),t.define("tinymce.core.EditorManager",[],function(){return n}))),e.exports=n}}}),l("tinymce.core.api.Main",["tinymce.core.api.Tinymce","tinymce.core.Register"],function(e,t){return function(){return window.tinymce=e,window.tinyMCE=e,t.exposeToModuleLoaders(e),e}}),a("tinymce.core.api.Main")()}(),e.exports=window.tinymce}).call(window)}).call(t,n(49).setImmediate)},177:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.advlist.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools"],function(e,t){return e.add("advlist",function(e){function n(t){return e.$.contains(e.getBody(),t)}function r(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&n(e)}function o(e,n){var r=[];return n&&t.each(n.split(/[ ,]/),function(e){r.push({text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:"default"==e?"":e})}),r}function i(n,r){e.undoManager.transact(function(){var o,i=e.dom,a=e.selection;if(!(o=i.getParent(a.getNode(),"ol,ul"))||o.nodeName!=n||!1===r){var c={"list-style-type":r||""};e.execCommand("UL"==n?"InsertUnorderedList":"InsertOrderedList",!1,c)}o=i.getParent(a.getNode(),"ol,ul"),o&&t.each(i.select("ol,ul",o).concat([o]),function(e){e.nodeName!==n&&!1!==r&&(e=i.rename(e,n)),i.setStyle(e,"listStyleType",r||null),e.removeAttribute("data-mce-style")}),e.focus()})}function a(t){var n=e.dom.getStyle(e.dom.getParent(e.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(e){e.active(e.settings.data===n)})}var c,l,s=function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)};c=o("OL",e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),l=o("UL",e.getParam("advlist_bullet_styles","default,circle,disc,square"));var u=function(n){return function(){var o=this;e.on("NodeChange",function(e){var i=t.grep(e.parents,r);o.active(i.length>0&&i[0].nodeName===n)})}};s(e,"lists")&&(e.addCommand("ApplyUnorderedListStyle",function(e,t){i("UL",t["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(e,t){i("OL",t["list-style-type"])}),e.addButton("numlist",{type:c.length>0?"splitbutton":"button",tooltip:"Numbered list",menu:c,onPostRender:u("OL"),onshow:a,onselect:function(e){i("OL",e.control.settings.data)},onclick:function(){i("OL",!1)}}),e.addButton("bullist",{type:l.length>0?"splitbutton":"button",tooltip:"Bullet list",onPostRender:u("UL"),menu:l,onshow:a,onselect:function(e){i("UL",e.control.settings.data)},onclick:function(){i("UL",!1)}}))}),function(){}}),o("tinymce.plugins.advlist.Plugin")()}()}).call(window)},178:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager"],function(e,t){return t.add("autolink",function(t){function n(e){i(e,-1,"(",!0)}function r(e){i(e,0,"",!0)}function o(e){i(e,-1,"",!1)}function i(e,t,n){function r(e,t){if(t<0&&(t=0),3==e.nodeType){var n=e.data.length;t>n&&(t=n)}return t}function o(e,t){1!=e.nodeType||e.hasChildNodes()?a.setStart(e,r(e,t)):a.setStartBefore(e)}function i(e,t){1!=e.nodeType||e.hasChildNodes()?a.setEnd(e,r(e,t)):a.setEndAfter(e)}var a,l,s,u,d,f,m,p,g,h;if("A"!=e.selection.getNode().tagName){if(a=e.selection.getRng(!0).cloneRange(),a.startOffset<5){if(!(p=a.endContainer.previousSibling)){if(!a.endContainer.firstChild||!a.endContainer.firstChild.nextSibling)return;p=a.endContainer.firstChild.nextSibling}if(g=p.length,o(p,g),i(p,g),a.endOffset<5)return;l=a.endOffset,u=p}else{if(u=a.endContainer,3!=u.nodeType&&u.firstChild){for(;3!=u.nodeType&&u.firstChild;)u=u.firstChild;3==u.nodeType&&(o(u,0),i(u,u.nodeValue.length))}l=1==a.endOffset?2:a.endOffset-1-t}s=l;do{o(u,l>=2?l-2:0),i(u,l>=1?l-1:0),l-=1,h=""+a}while(" "!=h&&""!==h&&160!=h.charCodeAt(0)&&l-2>=0&&h!=n);""+a==n||160==(""+a).charCodeAt(0)?(o(u,l),i(u,s),l+=1):0===a.startOffset?(o(u,0),i(u,s)):(o(u,l),i(u,s)),f=""+a,"."==f.charAt(f.length-1)&&i(u,s-1),f=""+a,(m=f.match(c))&&("www."==m[1]?m[1]="http://www.":/@$/.test(m[1])&&!/^mailto:/.test(m[1])&&(m[1]="mailto:"+m[1]),d=e.selection.getBookmark(),e.selection.setRng(a),e.execCommand("createlink",!1,m[1]+m[2]),e.settings.default_link_target&&e.dom.setAttrib(e.selection.getNode(),"target",e.settings.default_link_target),e.selection.moveToBookmark(d),e.nodeChanged())}}var a,c=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;if(t.settings.autolink_pattern&&(c=t.settings.autolink_pattern),t.on("keydown",function(e){if(13==e.keyCode)return o(t)}),e.ie)return void t.on("focus",function(){if(!a){a=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}});t.on("keypress",function(e){if(41==e.keyCode)return n(t)}),t.on("keyup",function(e){if(32==e.keyCode)return r(t)})}),function(){}}),o("tinymce.plugins.autolink.Plugin")()}()}).call(window)},179:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),a("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),a("tinymce.plugins.lists.core.NodeType",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},r=function(e){return e&&"BR"===e.nodeName};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:r,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBogusBr:function(e,t){return!!r(t)&&!(!e.isBlock(t.nextSibling)||r(t.previousSibling))},isEmpty:function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}}}),a("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),a("tinymce.plugins.lists.core.Range",["tinymce.core.dom.RangeUtils","tinymce.plugins.lists.core.NodeType"],function(e,t){var n=function(n,r){var o=e.getNode(n,r);return t.isListItemNode(n)&&t.isTextNode(o)?{container:o,offset:r>=n.childNodes.length?o.data.length:0}:{container:n,offset:r}};return{getNormalizedEndPoint:n,normalizeRange:function(e){var t=e.cloneRange(),r=n(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var o=n(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t}}}),a("tinymce.plugins.lists.core.Bookmark",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Range"],function(e,t,n){var r=e.DOM;return{createBookmark:function(e){var t={},n=function(n){var o,i,a;i=e[n?"startContainer":"endContainer"],a=e[n?"startOffset":"endOffset"],1===i.nodeType&&(o=r.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(a=Math.min(a,i.childNodes.length-1),n?i.insertBefore(o,i.childNodes[a]):r.insertAfter(o,i.childNodes[a])):i.appendChild(o),i=o,a=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=a};return n(!0),e.collapsed||n(),t},resolveBookmark:function(e){function t(t){var n,o,i,a=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};n=i=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(o=a(n),n=n.parentNode,r.remove(i)),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=o)}t(!0),t();var o=r.createRng();return o.setStart(e.startContainer,e.startOffset),e.endContainer&&o.setEnd(e.endContainer,e.endOffset),n.normalizeRange(o)}}}),a("tinymce.plugins.lists.core.Selection",["tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t){return{getSelectedListItems:function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})}}}),a("tinymce.plugins.lists.actions.Indent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],function(e,t,n,r){var o=e.DOM,i=function(e,t){var r;if(n.isListNode(e)){for(;r=e.firstChild;)t.appendChild(r);o.remove(e)}},a=function(e){var t,r,a;return"DT"===e.nodeName?(o.rename(e,"DD"),!0):(t=e.previousSibling)&&n.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&n.isListNode(t.lastChild)?(t.lastChild.appendChild(e),i(e.lastChild,t.lastChild),!0):(t=e.nextSibling)&&n.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):!(!(t=e.previousSibling)||"LI"!==t.nodeName||(r=o.create(e.parentNode.nodeName),a=o.getStyle(e.parentNode,"listStyleType"),a&&o.setStyle(r,"listStyleType",a),t.appendChild(r),r.appendChild(e),i(e.lastChild,r),0))};return{indentSelection:function(e){var n=r.getSelectedListItems(e);if(n.length){for(var o=t.createBookmark(e.selection.getRng(!0)),i=0;i<n.length&&(a(n[i])||0!==i);i++);return e.selection.setRng(t.resolveBookmark(o)),e.nodeChanged(),!0}}}}),a("tinymce.plugins.lists.core.NormalizeLists",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var r=e.DOM,o=function(e,t){var o,i=t.parentNode;"LI"===i.nodeName&&i.firstChild===t&&(o=i.previousSibling,o&&"LI"===o.nodeName?(o.appendChild(t),n.isEmpty(e,i)&&r.remove(i)):r.setStyle(i,"listStyleType","none")),n.isListNode(i)&&(o=i.previousSibling)&&"LI"===o.nodeName&&o.appendChild(t)};return{normalizeList:o,normalizeLists:function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){o(e,t)})}}}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.plugins.lists.core.TextBlock",["tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(e,t){var n=e.DOM;return{createNewTextBlock:function(e,r,o){var i,a,c=n.createFragment(),l,s=e.schema.getBlockElements();if(e.settings.forced_root_block&&(o=o||e.settings.forced_root_block),o&&(a=n.create(o),a.tagName===e.settings.forced_root_block&&n.setAttribs(a,e.settings.forced_root_block_attrs),c.appendChild(a)),r)for(;i=r.firstChild;){var u=i.nodeName;l||"SPAN"===u&&"bookmark"===i.getAttribute("data-mce-type")||(l=!0),s[u]?(c.appendChild(i),a=null):o?(a||(a=n.create(o),c.appendChild(a)),a.appendChild(i)):c.appendChild(i)}return e.settings.forced_root_block?l||t.ie&&!(t.ie>10)||a.appendChild(n.create("br",{"data-mce-bogus":"1"})):c.appendChild(n.create("br")),c}}}),a("tinymce.plugins.lists.core.SplitList",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.TextBlock","tinymce.core.util.Tools"],function(e,t,n,r){var o=e.DOM;return{splitList:function(e,i,a,c){var l,s,u,d,f=function(e){r.each(u,function(t){e.parentNode.insertBefore(t,a.parentNode)}),o.remove(e)};for(u=o.select('span[data-mce-type="bookmark"]',i),c=c||n.createNewTextBlock(e,a),l=o.createRng(),l.setStartAfter(a),l.setEndAfter(i),s=l.extractContents(),d=s.firstChild;d;d=d.firstChild)if("LI"===d.nodeName&&e.dom.isEmpty(d)){o.remove(d);break}e.dom.isEmpty(s)||o.insertAfter(s,i),o.insertAfter(c,i),t.isEmpty(e.dom,a.parentNode)&&f(a.parentNode),o.remove(a),t.isEmpty(e.dom,i)&&o.remove(i)}}}),a("tinymce.plugins.lists.actions.Outdent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList","tinymce.plugins.lists.core.TextBlock"],function(e,t,n,r,o,i,a){var c=e.DOM,l=function(e,t){n.isEmpty(e,t)&&c.remove(t)},s=function(e,t){var o=t.parentNode,s=o.parentNode,u;return!(o!==e.getBody()&&("DD"===t.nodeName?(c.rename(t,"DT"),0):n.isFirstChild(t)&&n.isLastChild(t)?("LI"===s.nodeName?(c.insertAfter(t,s),l(e.dom,s),c.remove(o)):n.isListNode(s)?c.remove(o,!0):(s.insertBefore(a.createNewTextBlock(e,t),o),c.remove(o)),0):n.isFirstChild(t)?("LI"===s.nodeName?(c.insertAfter(t,s),t.appendChild(o),l(e.dom,s)):n.isListNode(s)?s.insertBefore(t,o):(s.insertBefore(a.createNewTextBlock(e,t),o),c.remove(t)),0):n.isLastChild(t)?("LI"===s.nodeName?c.insertAfter(t,s):n.isListNode(s)?c.insertAfter(t,o):(c.insertAfter(a.createNewTextBlock(e,t),o),c.remove(t)),0):("LI"===s.nodeName?(o=s,u=a.createNewTextBlock(e,t,"LI")):u=n.isListNode(s)?a.createNewTextBlock(e,t,"LI"):a.createNewTextBlock(e,t),i.splitList(e,o,t,u),r.normalizeLists(e.dom,o.parentNode),0)))};return{outdent:s,outdentSelection:function(e){var n=o.getSelectedListItems(e);if(n.length){var r=t.createBookmark(e.selection.getRng(!0)),i,a,c=e.getBody();for(i=n.length;i--;)for(var l=n[i].parentNode;l&&l!==c;){for(a=n.length;a--;)if(n[a]===l){n.splice(i,1);break}l=l.parentNode}for(i=0;i<n.length&&(s(e,n[i])||0!==i);i++);return e.selection.setRng(t.resolveBookmark(r)),e.nodeChanged(),!0}}}}),a("tinymce.core.dom.BookmarkManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.BookmarkManager")}),a("tinymce.plugins.lists.actions.ToggleList",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList"],function(e,t,n,r,o,i,a,c){var l=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},s=function(e,n){t.each(n,function(t,n){e.setAttribute(n,t)})},u=function(e,n,r){s(n,r["list-attributes"]),t.each(e.select("li",n),function(e){s(e,r["list-item-attributes"])})},d=function(e,t,n){l(e,t,n),u(e,t,n)},f=function(e,t,n){var r,i,a=e.getBody();for(r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===r.nodeType&&(r=r.childNodes[Math.min(i,r.childNodes.length-1)]||r);r.parentNode!==a;){if(o.isTextBlock(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},m=function(n,r){for(var i=[],a=n.getBody(),c=n.dom,l=f(n,r,!0),s=f(n,r,!1),u,d=[],m=l;m&&(d.push(m),m!==s);m=m.nextSibling);return t.each(d,function(t){if(o.isTextBlock(n,t))return i.push(t),void(u=null);if(c.isBlock(t)||o.isBr(t))return o.isBr(t)&&c.remove(t),void(u=null);var r=t.nextSibling;if(e.isBookmarkNode(t)&&(o.isTextBlock(n,r)||!r&&t.parentNode===a))return void(u=null);u||(u=c.create("p"),t.parentNode.insertBefore(u,t),i.push(u)),u.appendChild(t)}),i},p=function(e,n,i){var a=e.selection.getRng(!0),c,l="LI",s=e.dom;i=i||{},"false"!==s.getContentEditable(e.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(l="DT"),c=r.createBookmark(a),t.each(m(e,a),function(t){var r,a,c=function(e){var t=s.getStyle(e,"list-style-type"),n=i?i["list-style-type"]:"";return n=null===n?"":n,t===n};a=t.previousSibling,a&&o.isListNode(a)&&a.nodeName===n&&c(a)?(r=a,t=s.rename(t,l),a.appendChild(t)):(r=s.create(n),t.parentNode.insertBefore(r,t),r.appendChild(t),t=s.rename(t,l)),d(s,r,i),x(e.dom,r)}),e.selection.setRng(r.resolveBookmark(c)))},g=function(e){var l=r.createBookmark(e.selection.getRng(!0)),s=e.getBody(),u=a.getSelectedListItems(e),d=t.grep(u,function(t){return e.dom.isEmpty(t)});u=t.grep(u,function(t){return!e.dom.isEmpty(t)}),t.each(d,function(t){if(o.isEmpty(e.dom,t))return void n.outdent(e,t)}),t.each(u,function(t){var n,r;if(t.parentNode!==e.getBody()){for(n=t;n&&n!==s;n=n.parentNode)o.isListNode(n)&&(r=n);c.splitList(e,r,t),i.normalizeLists(e.dom,r.parentNode)}}),e.selection.setRng(r.resolveBookmark(l))},h=function(e,t){return e&&t&&o.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},y=function(e,t){return e.className===t.className},b=function(e,t,n){return h(t,n)&&v(e,t,n)&&y(t,n)},x=function(e,t){var n,r;if(n=t.nextSibling,b(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}};return{toggleList:function(e,t,n){var o=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n||{},o!==e.getBody())if(o)if(o.nodeName===t)g(e,t);else{var i=r.createBookmark(e.selection.getRng(!0));d(e.dom,o,n),x(e.dom,e.dom.rename(o,t)),e.selection.setRng(r.resolveBookmark(i))}else p(e,t,n)},removeList:g,mergeWithAdjacentLists:x}}),a("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")}),a("tinymce.plugins.lists.core.Delete",["tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.util.VK","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Range","tinymce.plugins.lists.core.Selection"],function(e,t,n,r,o,i,a,c,l){var s=function(n,r,o){var a=r.startContainer,c=r.startOffset,l,s;if(3===a.nodeType&&(o?c<a.data.length:c>0))return a;for(l=n.schema.getNonEmptyElements(),1===a.nodeType&&(a=e.getNode(a,c)),s=new t(a,n.getBody()),o&&i.isBogusBr(n.dom,a)&&s.next();a=s[o?"next":"prev2"]();){if("LI"===a.nodeName&&!a.hasChildNodes())return a;if(l[a.nodeName])return a;if(3===a.nodeType&&a.data.length>0)return a}},u=function(e,t,n){var r,o,a=t.parentNode;if(i.isChildOfBody(e,t)&&i.isChildOfBody(e,n)){if(i.isListNode(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&i.isBr(a.previousSibling)&&e.remove(a.previousSibling),r=n.lastChild,r&&i.isBr(r)&&t.hasChildNodes()&&e.remove(r),i.isEmpty(e,n,!0)&&e.$(n).empty(),!i.isEmpty(e,t,!0))for(;r=t.firstChild;)n.appendChild(r);o&&n.appendChild(o),e.remove(t),i.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a)}},d=function(e,t){var n=e.dom,a=e.selection,l=n.getParent(a.getStart(),"LI"),d,f,m;if(l){if((d=l.parentNode)===e.getBody()&&i.isEmpty(n,d))return!0;if(f=c.normalizeRange(a.getRng(!0)),(m=n.getParent(s(e,f,t),"LI"))&&m!==l){var p=o.createBookmark(f);return t?u(n,m,l):u(n,l,m),e.selection.setRng(o.resolveBookmark(p)),!0}if(!m&&!t&&r.removeList(e,d.nodeName))return!0}return!1},f=function(e,t){var n=e.dom,o=n.getParent(e.selection.getStart(),n.isBlock);if(o&&n.isEmpty(o)){var i=c.normalizeRange(e.selection.getRng(!0)),a=n.getParent(s(e,i,t),"LI");if(a)return e.undoManager.transact(function(){n.remove(o),r.mergeWithAdjacentLists(n,a.parentNode),e.selection.select(a,!0),e.selection.collapse(t)}),!0}return!1},m=function(e,t){return d(e,t)||f(e,t)},p=function(e){return!!(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")||l.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),a.normalizeLists(e.dom,e.getBody())}),!0)},g=function(e,t){return e.selection.isCollapsed()?m(e,t):p(e)};return{setup:function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?g(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&g(e,!0)&&t.preventDefault()})},backspaceDelete:g}}),a("tinymce.plugins.lists.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.lists.actions.Indent","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Delete","tinymce.plugins.lists.core.NodeType"],function(e,t,n,r,o,i,a,c){var l=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},s=function(e){e.on("BeforeExecCommand",function(t){var n=t.command.toLowerCase(),i;if("indent"===n?r.indentSelection(e)&&(i=!0):"outdent"===n&&o.outdentSelection(e)&&(i=!0),i)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){i.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){i.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){i.toggleList(e,"DL",n)})},u=function(e){e.addQueryStateHandler("InsertUnorderedList",l(e,"UL")),e.addQueryStateHandler("InsertOrderedList",l(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",l(e,"DL"))},d=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?o.outdentSelection(e):r.indentSelection(e))})},f=function(e){var n=function(n){return function(){var r=this;e.on("NodeChange",function(e){var o=t.grep(e.parents,c.isListNode);r.active(o.length>0&&o[0].nodeName===n)})}};(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),r=!1,o=0,i=t.length;!r&&o<i;o++){var a=t[o].nodeName;r="LI"===a&&c.isFirstChild(t[o])||"UL"===a||"OL"===a||"DD"===a}n.disabled(r)})}})};return e.add("lists",function(e){return f(e),a.setup(e),e.on("init",function(){s(e),u(e),e.getParam("lists_indent_on_tab",!0)&&d(e)}),{backspaceDelete:function(t){a.backspaceDelete(e,t)}}}),function(){}}),o("tinymce.plugins.lists.Plugin")()}()}).call(window)},180:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.charmap.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools"],function(e,t){return e.add("charmap",function(e){function n(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]}function r(e){return t.grep(e,function(e){return s(e)&&2==e.length})}function o(e){return s(e)?[].concat(r(e)):"function"==typeof e?e():[]}function i(t){var n=e.settings;return n.charmap&&(t=o(n.charmap)),n.charmap_append?[].concat(t).concat(o(n.charmap_append)):t}function a(){return i(n())}function c(t){e.fire("insertCustomChar",{chr:t}).chr,e.execCommand("mceInsertContent",!1,t)}function l(){function t(e){for(;e;){if("TD"==e.nodeName)return e;e=e.parentNode}}var n,r,o,i;n='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>';var l=a(),s=Math.min(l.length,25),u=Math.ceil(l.length/s);for(o=0;o<u;o++){for(n+="<tr>",r=0;r<s;r++){var d=o*s+r;if(d<l.length){var f=l[d],m=f?String.fromCharCode(parseInt(f[0],10)):"&nbsp;";n+='<td title="'+f[1]+'"><div tabindex="-1" title="'+f[1]+'" role="button" data-chr="'+m+'">'+m+"</div></td>"}else n+="<td />"}n+="</tr>"}n+="</tbody></table>";var p={type:"container",html:n,onclick:function(e){var n=e.target;if(/^(TD|DIV)$/.test(n.nodeName)){var r=t(n).firstChild;r&&r.hasAttribute("data-chr")&&(c(r.getAttribute("data-chr")),e.ctrlKey||i.close())}},onmouseover:function(e){var n=t(e.target);n&&n.firstChild?(i.find("#preview").text(n.firstChild.firstChild.data),i.find("#previewTitle").text(n.title)):(i.find("#preview").text(" "),i.find("#previewTitle").text(" "))}};i=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[p,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){i.close()}}]})}var s=t.isArray;return e.addCommand("mceShowCharmap",l),e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"}),{getCharMap:a,insertChar:c}}),function(){}}),o("tinymce.plugins.charmap.Plugin")()}()}).call(window)},181:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.plugins.print.Plugin",["tinymce.core.PluginManager"],function(e){return e.add("print",function(e){e.addCommand("mcePrint",function(){e.getWin().print()}),e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addShortcut("Meta+P","","mcePrint"),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Meta+P",context:"file"})}),function(){}}),o("tinymce.plugins.print.Plugin")()}()}).call(window)},182:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.preview.Plugin",["tinymce.core.PluginManager","tinymce.core.Env","tinymce.core.util.Tools"],function(e,t,n){return e.add("preview",function(e){var r=e.settings,o=!t.ie;e.addCommand("mcePreview",function(){e.windowManager.open({title:"Preview",width:parseInt(e.getParam("plugin_preview_width","650"),10),height:parseInt(e.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(o?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var t,i="",a=e.dom.encode;i+='<base href="'+a(e.documentBaseURI.getURI())+'">',n.each(e.contentCSS,function(t){i+='<link type="text/css" rel="stylesheet" href="'+a(e.documentBaseURI.toAbsolute(t))+'">'});var c=r.body_id||"tinymce";-1!=c.indexOf("=")&&(c=e.getParam("body_id","","hash"),c=c[e.id]||c);var l=r.body_class||"";-1!=l.indexOf("=")&&(l=e.getParam("body_class","","hash"),l=l[e.id]||"");var s=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";if(t="<!DOCTYPE html><html><head>"+i+'</head><body id="'+a(c)+'" class="mce-content-body '+a(l)+'"'+a(s)+">"+e.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>',o)this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(t);else{var u=this.getEl("body").firstChild.contentWindow.document;u.open(),u.write(t),u.close()}}})}),e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}),function(){}}),o("tinymce.plugins.preview.Plugin")()}()}).call(window)},183:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.plugins.hr.Plugin",["tinymce.core.PluginManager"],function(e){return e.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}),function(){}}),o("tinymce.plugins.hr.Plugin")()}()}).call(window)},184:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.plugins.anchor.Plugin",["tinymce.core.Env","tinymce.core.PluginManager"],function(e,t){return t.add("anchor",function(t){var n=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},r=function(e){return function(t){for(var r=0;r<t.length;r++)n(t[r])&&t[r].attr("contenteditable",e)}},o=function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},i=function(){var e=t.selection.getNode(),n="A"==e.tagName&&""===t.dom.getAttrib(e,"href"),r="";n&&(r=e.id||e.name||""),t.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:r},onsubmit:function(r){var i=r.data.id;if(!o(i))return r.preventDefault(),void t.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.");n?(e.removeAttribute("name"),e.id=i):(t.selection.collapse(!0),t.execCommand("mceInsertContent",!1,t.dom.createHTML("a",{id:i})))}})};e.ceFalse&&t.on("PreInit",function(){t.parser.addNodeFilter("a",r("false")),t.serializer.addNodeFilter("a",r(null))}),t.addCommand("mceAnchor",i),t.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:i,stateSelector:"a:not([href])"}),t.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:i})}),function(){}}),o("tinymce.plugins.anchor.Plugin")()}()}).call(window)},185:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.plugins.pagebreak.Plugin",["tinymce.core.PluginManager","tinymce.core.Env"],function(e,t){return e.add("pagebreak",function(e){var n="mce-pagebreak",r=e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e"),o=RegExp(r.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),i='<img src="'+t.transparentSrc+'" class="'+n+'" data-mce-resize="false" data-mce-placeholder />';e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+i+"</p>"):e.insertContent(i)}),e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),e.on("ResolveName",function(t){"IMG"==t.target.nodeName&&e.dom.hasClass(t.target,n)&&(t.name="pagebreak")}),e.on("click",function(t){t=t.target,"IMG"===t.nodeName&&e.dom.hasClass(t,n)&&e.selection.select(t)}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(o,i)}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(t){for(var n=t.length,o,i;n--;)if(o=t[n],(i=o.attr("class"))&&-1!==i.indexOf("mce-pagebreak")){var a=o.parent;if(e.schema.getBlockElements()[a.name]&&e.settings.pagebreak_split_block){a.type=3,a.value=r,a.raw=!0,o.remove();continue}o.type=3,o.value=r,o.raw=!0}})})}),function(){}}),o("tinymce.plugins.pagebreak.Plugin")()}()}).call(window)},186:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.searchreplace.core.FindReplaceText",[],function(){function e(e){return e&&1==e.nodeType&&"false"===e.contentEditable}function t(t,n,r,o,i){function a(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function c(t){var n;if(3===t.nodeType)return t.data;if(h[t.nodeName]&&!g[t.nodeName])return"";if(n="",e(t))return"\n";if((g[t.nodeName]||v[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=c(t)}while(t=t.nextSibling);return n}function l(t,n,r){var o,i,a,c,l=[],s=0,u=t,d=n.shift(),f=0;e:for(;;){if((g[u.nodeName]||v[u.nodeName]||e(u))&&s++,3===u.nodeType&&(!i&&u.length+s>=d[1]?(i=u,c=d[1]-s):o&&l.push(u),!o&&u.length+s>d[0]&&(o=u,a=d[0]-s),s+=u.length),o&&i){if(u=r({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:c,innerNodes:l,match:d[2],matchIndex:f}),s-=i.length-c,o=null,i=null,l=[],d=n.shift(),f++,!d)break}else if(h[u.nodeName]&&!g[u.nodeName]||!u.firstChild){if(u.nextSibling){u=u.nextSibling;continue}}else if(!e(u)){u=u.firstChild;continue}for(;;){if(u.nextSibling){u=u.nextSibling;break}if(u.parentNode===t)break e;u=u.parentNode}}}function s(e){var t;if("function"!=typeof e){var n=e.nodeType?e:p.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(p.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,i=e.startNode,a=e.endNode,c=e.matchIndex;if(i===a){var l=i;o=l.parentNode,e.startNodeIndex>0&&(n=p.createTextNode(l.data.substring(0,e.startNodeIndex)),o.insertBefore(n,l));var s=t(e.match[0],c);return o.insertBefore(s,l),e.endNodeIndex<l.length&&(r=p.createTextNode(l.data.substring(e.endNodeIndex)),o.insertBefore(r,l)),l.parentNode.removeChild(l),s}n=p.createTextNode(i.data.substring(0,e.startNodeIndex)),r=p.createTextNode(a.data.substring(e.endNodeIndex));for(var u=t(i.data.substring(e.startNodeIndex),c),d=[],f=0,m=e.innerNodes.length;f<m;++f){var g=e.innerNodes[f],h=t(g.data,c);g.parentNode.replaceChild(h,g),d.push(h)}var v=t(a.data.substring(0,e.endNodeIndex),c);return o=i.parentNode,o.insertBefore(n,i),o.insertBefore(u,i),o.removeChild(i),o=a.parentNode,o.insertBefore(v,a),o.insertBefore(r,a),o.removeChild(a),v}}var u,d=[],f,m=0,p,g,h,v;if(p=n.ownerDocument,g=i.getBlockElements(),h=i.getWhiteSpaceElements(),v=i.getShortEndedElements(),f=c(n)){if(t.global)for(;u=t.exec(f);)d.push(a(u,o));else u=f.match(t),d.push(a(u,o));return d.length&&(m=d.length,l(n,d,s(r))),m}}return{findAndReplaceDOMText:t}}),a("tinymce.plugins.searchreplace.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.FindReplaceText"],function(e,t,n){function r(e){function r(){function n(){a.statusbar.find("#next").disabled(!c(f+1).length),a.statusbar.find("#prev").disabled(!c(f-1).length)}function r(){e.windowManager.alert("Could not find the specified string.",function(){a.find("#find")[0].focus()})}var o={},i;i=t.trim(e.selection.getContent({format:"text"}));var a=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),d.done()},onSubmit:function(e){var t,i,l,s;return e.preventDefault(),i=a.find("#case").checked(),s=a.find("#words").checked(),l=a.find("#find").value(),l.length?o.text==l&&o.caseState==i&&o.wholeWord==s?0===c(f+1).length?void r():(d.next(),void n()):(t=d.find(l,i,s),t||r(),a.statusbar.items().slice(1).disabled(0===t),n(),void(o={text:l,caseState:i,wholeWord:s})):(d.done(!1),void a.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){a.submit()}},{text:"Replace",disabled:!0,onclick:function(){d.replace(a.find("#replace").value())||(a.statusbar.items().slice(1).disabled(!0),f=-1,o={})}},{text:"Replace all",disabled:!0,onclick:function(){d.replace(a.find("#replace").value(),!0,!0),a.statusbar.items().slice(1).disabled(!0),o={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){d.prev(),n()}},{text:"Next",name:"next",disabled:!0,onclick:function(){d.next(),n()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:i},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}function o(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function i(t){var r,o;return o=e.dom.create("span",{"data-mce-bogus":1}),o.className="mce-match-marker",r=e.getBody(),d.done(!1),n.findAndReplaceDOMText(t,r,o,!1,e.schema)}function a(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function c(n){var r,i=[];if(r=t.toArray(e.getBody().getElementsByTagName("span")),r.length)for(var a=0;a<r.length;a++){var c=o(r[a]);null!==c&&c.length&&c===""+n&&i.push(r[a])}return i}function l(t){var n=f,r=e.dom;t=!1!==t,t?n++:n--,r.removeClass(c(f),"mce-match-marker-selected");var o=c(n);return o.length?(r.addClass(c(n),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),n):-1}function s(t){var n=e.dom,r=t.parentNode;n.remove(t),n.isEmpty(r)&&n.remove(r)}function u(e){var t=o(e);return null!==t&&t.length>0}var d=this,f=-1;d.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:r,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Meta+F",onclick:r}),e.addCommand("SearchReplace",r),e.shortcuts.add("Meta+F","",r)},d.find=function(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=n?"\\b"+e+"\\b":e;var r=i(RegExp(e,t?"g":"gi"));return r&&(f=-1,f=l(!0)),r},d.next=function(){var e=l(!0);-1!==e&&(f=e)},d.prev=function(){var e=l(!1);-1!==e&&(f=e)},d.replace=function(n,r,i){var l,m,p,g,h,v=f,y;for(r=!1!==r,p=e.getBody(),m=t.grep(t.toArray(p.getElementsByTagName("span")),u),l=0;l<m.length;l++){var b=o(m[l]);if(g=h=parseInt(b,10),i||g===f){for(n.length?(m[l].firstChild.nodeValue=n,a(m[l])):s(m[l]);m[++l];){if((g=parseInt(o(m[l]),10))!==h){l--;break}s(m[l])}r&&v--}else h>f&&m[l].setAttribute("data-mce-index",h-1)}return e.undoManager.add(),f=v,r?(y=c(v+1).length>0,d.next()):(y=c(v-1).length>0,d.prev()),!i&&y},d.done=function(n){var r,i,c,l;for(i=t.toArray(e.getBody().getElementsByTagName("span")),r=0;r<i.length;r++){var s=o(i[r]);null!==s&&s.length&&(s===""+f&&(c||(c=i[r].firstChild),l=i[r].firstChild),a(i[r]))}if(c&&l){var u=e.dom.createRng();return u.setStart(c,0),u.setEnd(l,l.data.length),!1!==n&&e.selection.setRng(u),u}}}return e.add("searchreplace",r),function(){}}),o("tinymce.plugins.searchreplace.Plugin")()}()}).call(window)},187:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),a("tinymce.plugins.wordcount.text.UnicodeData",[],function(){var e={aletter:"[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f3\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u24b6-\u24e9\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u303b\u303c\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790\ua791\ua7a0-\ua7a9\ua7fa-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]",midnumlet:"['\\.\u2018\u2019\u2024\ufe52\uff07\uff0e]",midletter:"[:\xb7\xb7\u05f4\u2027\ufe13\ufe55\uff1a]",midnum:"[,;;\u0589\u060c\u060d\u066c\u07f8\u2044\ufe10\ufe14\ufe50\ufe54\uff0c\uff1b]",numeric:"[0-9\u0660-\u0669\u066b\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9]",cr:"\\r",lf:"\\n",newline:"[\v\f\x85\u2028\u2029]",extend:"[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1baa\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]",format:"[\xad\u0600-\u0603\u06dd\u070f\u17b4\u17b5\u200e\u200f\u202a-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb]",katakana:"[\u3031-\u3035\u309b\u309c\u30a0-\u30fa\u30fc-\u30ff\u31f0-\u31ff\u32d0-\u32fe\u3300-\u3357\uff66-\uff9d]",extendnumlet:"[_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}\xa1\xab\xb7\xbb\xbf;\xb7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]"},t="";return{characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[RegExp(e.aletter),RegExp("['\\.\u2018\u2019\u2024\ufe52\uff07\uff0e]"),RegExp("[:\xb7\xb7\u05f4\u2027\ufe13\ufe55\uff1a]"),RegExp(e.midnum),RegExp(e.numeric),RegExp("\\r"),RegExp("\\n"),RegExp(e.newline),RegExp(e.extend),RegExp(e.format),RegExp(e.katakana),RegExp("[_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f]"),RegExp("@")],EMPTY_STRING:"",PUNCTUATION:RegExp("^"+e.punctuation+"$"),WHITESPACE:/\s/}}),a("tinymce.plugins.wordcount.alien.Arr",[],function(){var e=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1};return{each:e,map:function(t,n){var r=[];return e(t,function(e,o){r.push(n(e,o,t))}),r}}}),a("tinymce.plugins.wordcount.text.StringMapper",["tinymce.plugins.wordcount.text.UnicodeData","tinymce.plugins.wordcount.alien.Arr"],function(e,t){var n=e.SETS,r=e.characterIndices.OTHER,o=function(e){var t,o,i=r,a=n.length;for(t=0;t<a;++t)if((o=n[t])&&o.test(e)){i=t;break}return i},i=function(e){var t={};return function(n){if(t[n])return t[n];var r=e(n);return t[n]=r,r}};return{classify:function(e){var n=i(o);return t.map(e.split(""),n)}}}),a("tinymce.plugins.wordcount.text.WordBoundary",["tinymce.plugins.wordcount.text.UnicodeData"],function(e){var t=e.characterIndices;return{isWordBoundary:function(e,n){var r,o=e[n],i=e[n+1],a;return!(n<0||n>e.length-1&&0!==n||o===t.ALETTER&&i===t.ALETTER||(a=e[n+2],o===t.ALETTER&&(i===t.MIDLETTER||i===t.MIDNUMLET||i===t.AT)&&a===t.ALETTER||(r=e[n-1],(o===t.MIDLETTER||o===t.MIDNUMLET||i===t.AT)&&i===t.ALETTER&&r===t.ALETTER||!(o!==t.NUMERIC&&o!==t.ALETTER||i!==t.NUMERIC&&i!==t.ALETTER)||(o===t.MIDNUM||o===t.MIDNUMLET)&&i===t.NUMERIC&&r===t.NUMERIC||o===t.NUMERIC&&(i===t.MIDNUM||i===t.MIDNUMLET)&&a===t.NUMERIC||o===t.EXTEND||o===t.FORMAT||r===t.EXTEND||r===t.FORMAT||i===t.EXTEND||i===t.FORMAT||o===t.CR&&i===t.LF||o!==t.NEWLINE&&o!==t.CR&&o!==t.LF&&i!==t.NEWLINE&&i!==t.CR&&i!==t.LF&&(o===t.KATAKANA&&i===t.KATAKANA||i===t.EXTENDNUMLET&&(o===t.ALETTER||o===t.NUMERIC||o===t.KATAKANA||o===t.EXTENDNUMLET)||o===t.EXTENDNUMLET&&(i===t.ALETTER||i===t.NUMERIC||i===t.KATAKANA)||o===t.AT))))}}}),a("tinymce.plugins.wordcount.text.WordGetter",["tinymce.plugins.wordcount.text.UnicodeData","tinymce.plugins.wordcount.text.StringMapper","tinymce.plugins.wordcount.text.WordBoundary"],function(e,t,n){var r=e.EMPTY_STRING,o=e.WHITESPACE,i=e.PUNCTUATION,a=function(e){return"http"===e||"https"===e},c=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(o.test(r))break}return n},l=function(e,t,n){var r=c(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}};return{getWords:function(e,c){var s=0,u=t.classify(e),d=u.length,f=[],m=[],p,g,h;for(c||(c={}),c.ignoreCase&&(e=e.toLowerCase()),g=c.includePunctuation,h=c.includeWhitespace;s<d;++s)if(p=e.charAt(s),f.push(p),n.isWordBoundary(u,s)){if((f=f.join(r))&&(h||!o.test(f))&&(g||!i.test(f)))if(a(f)){var v=l(f,e,s);m.push(v.word),s=v.index}else m.push(f);f=[]}return m}}}),a("tinymce.plugins.wordcount.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Delay","tinymce.plugins.wordcount.text.WordGetter"],function(e,t,n){return e.add("wordcount",function(e){var r=function(e){return e.removed?"":e.getBody().innerText},o=function(){return n.getWords(r(e)).length},i=function(){e.theme.panel.find("#wordcount").text(["Words: {0}",o()])};return e.on("init",function(){var n=e.theme.panel&&e.theme.panel.find("#statusbar")[0],r=t.debounce(i,300);n&&t.setEditorTimeout(e,function(){n.insert({type:"label",name:"wordcount",text:["Words: {0}",o()],classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo undo redo keyup",r)},0)}),{getCount:o}}),function(){}}),o("tinymce.plugins.wordcount.Plugin")()}()}).call(window)},188:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.plugins.visualblocks.Plugin",["tinymce.core.PluginManager"],function(e){return e.add("visualblocks",function(e,t){function n(){var t=this;t.active(i),e.on("VisualBlocks",function(){t.active(e.dom.hasClass(e.getBody(),"mce-visualblocks"))})}var r,o,i;window.NodeList&&(e.addCommand("mceVisualBlocks",function(){var n=e.dom,a;r||(r=n.uniqueId(),a=n.create("link",{id:r,rel:"stylesheet",href:t+"/css/visualblocks.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(a)),e.on("PreviewFormats AfterPreviewFormats",function(t){i&&n.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"==t.type)}),n.toggleClass(e.getBody(),"mce-visualblocks"),i=e.dom.hasClass(e.getBody(),"mce-visualblocks"),o&&o.active(n.hasClass(e.getBody(),"mce-visualblocks")),e.fire("VisualBlocks")}),e.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n,selectable:!0,context:"view",prependToContext:!0}),e.on("init",function(){e.settings.visualblocks_default_state&&e.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")}))}),function(){}}),o("tinymce.plugins.visualblocks.Plugin")()}()}).call(window)},189:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o,s=function(e,t){a(e,[],function(){return t})};s("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),s("global!Array",Array),s("global!Error",Error),a("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),s("global!Object",Object),a("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},c=function(e){return e},l=function(){},s={fold:function(e,t){return e()},is:n,isSome:n,isNone:r,getOr:c,getOrThunk:a,getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},or:c,orThunk:a,map:o,ap:o,each:l,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},c=function(){return u},l=function(t){return a(t(e))},s=function(t){return t(e)},u={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:c,orThunk:c,map:l,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?u:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),s("global!String",String),a("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},c=function(e,t){return b(e,t).isSome()},l=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},u=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},d=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},f=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},m=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},p=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var c=e[i],l=t(c);l!==n&&(r.push(o),o=[]),n=l,o.push(c)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},C=t.prototype.push,w=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);C.apply(r,e[o])}return r},T=function(e,t){var n=u(e,t);return w(n)},k=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},E=function(e,t){return e.length===t.length&&k(e,function(e,n){return e===t[n]})},S=t.prototype.slice;return{map:u,each:d,eachr:f,partition:m,filter:p,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:w,bind:T,forall:k,exists:c,contains:a,equal:E,reverse:function(e){var t=S.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return p(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=S.call(e,0);return n.sort(t),n},range:l}}),a("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),s("global!document",document),a("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,t,n,r){var o=function(e,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return c(i.childNodes[0])},i=function(e,t){var n=t||r,o=n.createElement(e);return c(o)},a=function(e,t){var n=t||r,o=n.createTextNode(e);return c(o)},c=function(n){if(null===n||void 0===n)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:o,fromTag:i,fromText:a,fromDom:c}}),a("tinymce.plugins.visualchars.core.Data",[],function(){var e={"\xa0":"nbsp","\xad":"shy"},t=function(e,t){var n,r="";for(n in e)r+=n;return RegExp("["+r+"]",t?"g":"")},n=function(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n};return{charMap:e,regExp:t(e),regExpGlobal:t(e,!0),selector:n(e),charMapToRegExp:t,charMapToSelector:n}}),a("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),a("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(t){return n(t)===e}},i=function(r){return n(r)===e.COMMENT||"#comment"===t(r)},a=o(e.ELEMENT),c=o(e.TEXT),l=o(e.DOCUMENT);return{name:t,type:n,value:r,isElement:a,isText:c,isDocument:l,isComment:i}}),a("tinymce.plugins.visualchars.core.Html",["tinymce.plugins.visualchars.core.Data"],function(e){return{wrapCharWithSpan:function(t){return'<span data-mce-bogus="1" class="mce-'+e.charMap[t]+'">'+t+"</span>"}}}),a("tinymce.plugins.visualchars.core.Nodes",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Html"],function(e,t,n,r,o){var i=function(e){return n.isText(e)&&void 0!==n.value(e)&&r.regExp.test(n.value(e))},a=function(n,r){var o=[],i=n.dom(),c=e.map(i.childNodes,t.fromDom);return e.each(c,function(e){r(e)&&(o=o.concat([e])),o=o.concat(a(e,r))}),o};return{isMatch:i,filterDescendants:a,findParentElm:function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},replaceWithSpans:function(e){return e.replace(r.regExpGlobal,o.wrapCharWithSpan)}}}),a("tinymce.plugins.visualchars.core.VisualChars",["tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Nodes","ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node"],function(e,t,n,r,o){var i=function(e,i){var a,c,l=t.filterDescendants(r.fromDom(i),t.isMatch);n.each(l,function(n){var r=t.replaceWithSpans(o.value(n));for(c=e.dom.create("div",null,r);a=c.lastChild;)e.dom.insertAfter(a,n.dom());e.dom.remove(n.dom())})},a=function(t,r){var o=t.dom.select(e.selector,r);n.each(o,function(e){t.dom.remove(e,1)})};return{show:i,hide:a,toggle:function(e){var n=e.getBody(),r=e.selection.getBookmark(),o=t.findParentElm(e.selection.getNode(),n);o=void 0!==o?o:n,a(e,o),i(e,o),e.selection.moveToBookmark(r)}}}),a("tinymce.plugins.visualchars.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Delay","ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.plugins.visualchars.core.VisualChars"],function(e,t,n,r,o){return e.add("visualchars",function(e){var n=this,r,i=function(){var t=this;e.on("VisualChars",function(e){t.active(e.state)})},a=t.debounce(function(){o.toggle(e)},300);!1!==e.settings.forced_root_block&&e.on("keydown",function(t){!0===n.state&&(13===t.keyCode?o.toggle(e):a())}),e.addCommand("mceVisualChars",function(){var t=e.getBody(),i=e.selection,a;r=!r,n.state=r,e.fire("VisualChars",{state:r}),a=i.getBookmark(),!0===r?o.show(e,t):o.hide(e,t),i.moveToBookmark(a)}),e.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:i}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:i,selectable:!0,context:"view",prependToContext:!0})}),function(){}}),o("tinymce.plugins.visualchars.Plugin")()}()}).call(window)},190:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.plugins.code.Plugin",["tinymce.core.dom.DOMUtils","tinymce.core.PluginManager"],function(e,t){return t.add("code",function(t){function n(){t.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t.getParam("code_dialog_width",600),minHeight:t.getParam("code_dialog_height",Math.min(e.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){t.focus(),t.undoManager.transact(function(){t.setContent(e.data.code)}),t.selection.setCursorLocation(),t.nodeChanged()}}).find("#code").value(t.getContent({source_view:!0}))}t.addCommand("mceCodeEditor",n),t.addButton("code",{icon:"code",tooltip:"Source code",onclick:n}),t.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:n})}),function(){}}),o("tinymce.plugins.code.Plugin")()}()}).call(window)},191:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.insertdatetime.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools"],function(e,t){return e.add("insertdatetime",function(e){function n(t,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",r(n.getMonth()+1,2)),t=t.replace("%d",r(n.getDate(),2)),t=t.replace("%H",""+r(n.getHours(),2)),t=t.replace("%M",""+r(n.getMinutes(),2)),t=t.replace("%S",""+r(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",n.getHours()<12?"AM":"PM"),t=t.replace("%B",""+e.translate(c[n.getMonth()])),t=t.replace("%b",""+e.translate(a[n.getMonth()])),t=t.replace("%A",""+e.translate(i[n.getDay()])),t=t.replace("%a",""+e.translate(o[n.getDay()])),t=t.replace("%%","%")}function r(t){var r=n(t);if(e.settings.insertdatetime_element){var o;o=n(/%[HMSIp]/.test(t)?"%Y-%m-%dT%H:%M":"%Y-%m-%d"),r='<time datetime="'+o+'">'+r+"</time>";var i=e.dom.getParent(e.selection.getStart(),"time");if(i)return void e.dom.setOuterHTML(i,r)}e.insertContent(r)}var o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="January February March April May June July August September October November December".split(" "),l=[],s,u;e.addCommand("mceInsertDate",function(){r(e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d")))}),e.addCommand("mceInsertTime",function(){r(e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S")))}),e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){r(s||u)},menu:l}),t.each(e.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(e){u||(u=e),l.push({text:n(e),onclick:function(){s=e,r(e)}})}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:l,context:"insert"})}),function(){}}),o("tinymce.plugins.insertdatetime.Plugin")()}()}).call(window)},192:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.plugins.nonbreaking.Plugin",["tinymce.core.PluginManager"],function(e){return e.add("nonbreaking",function(e){var t=e.getParam("nonbreaking_force_tab");if(e.addCommand("mceNonBreaking",function(){e.insertContent(e.plugins.visualchars&&e.plugins.visualchars.state?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;"),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),t){var n=+t>1?+t:3;e.on("keydown",function(t){if(9==t.keyCode){if(t.shiftKey)return;t.preventDefault();for(var r=0;r<n;r++)e.execCommand("mceNonBreaking")}})}}),function(){}}),o("tinymce.plugins.nonbreaking.Plugin")()}()}).call(window)},193:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),a("tinymce.plugins.table.util.Utils",["tinymce.core.Env"],function(e){function t(t){(!e.ie||e.ie>9)&&(t.hasChildNodes()||(t.innerHTML='<br data-mce-bogus="1" />'))}var n=function(e){return function(t,n){t&&(n=parseInt(n,10),1===n||0===n?t.removeAttribute(e,1):t.setAttribute(e,n,1))}},r=function(e){return function(t){return parseInt(t.getAttribute(e)||1,10)}};return{setColSpan:n("colSpan"),setRowSpan:n("rowspan"),getColSpan:r("colSpan"),getRowSpan:r("rowSpan"),setSpanVal:function(e,t,r){n(t)(e,r)},getSpanVal:function(e,t){return r(t)(e)},paddCell:t}}),a("tinymce.plugins.table.model.SplitCols",["tinymce.core.util.Tools","tinymce.plugins.table.util.Utils"],function(e,t){var n=function(e,t,n){return e[n]?e[n][t]:null},r=function(e,t,r){var o=n(e,t,r);return o?o.elm:null},o=function(e,t,o,i){var a,c,l=0,s=r(e,t,o);for(a=o;(i>0?a<e.length:a>=0)&&(c=n(e,t,a),s===c.elm);a+=i)l++;return l},i=function(e,t,n){for(var r,o=e[n],i=t;i<o.length;i++)if(r=o[i],r.real)return r.elm;return null},a=function(e,n){for(var r,i=[],a=e[n],c=0;c<a.length;c++)r=a[c],i.push({elm:r.elm,above:o(e,c,n,-1)-1,below:o(e,c,n,1)-1}),c+=t.getColSpan(r.elm)-1;return i},c=function(e,n){var r=e.elm.ownerDocument,o=r.createElement("td");return t.setColSpan(o,t.getColSpan(e.elm)),t.setRowSpan(o,n),t.paddCell(o),o},l=function(e,t,n,r){var o=i(e,n+1,r);o?o.parentNode.insertBefore(t,o):(o=i(e,0,r),o.parentNode.appendChild(t))},s=function(e,n,r,o){if(0!==n.above){t.setRowSpan(n.elm,n.above);var i=c(n,n.below+1);return l(e,i,r,o),i}return null},u=function(e,n,r,o){if(0!==n.below){t.setRowSpan(n.elm,n.above+1);var i=c(n,n.below);return l(e,i,r,o+1),i}return null};return{splitAt:function(t,n,o,i){var c=a(t,o),l=r(t,n,o).parentNode,d=[];return e.each(c,function(e,n){null!==(i?s(t,e,n,o):u(t,e,n,o))&&d.push(d)}),{cells:d,row:l}}}}),a("tinymce.plugins.table.model.TableGrid",["tinymce.core.util.Tools","tinymce.core.Env","tinymce.plugins.table.util.Utils","tinymce.plugins.table.model.SplitCols"],function(e,t,n,r){var o=e.each,i=n.getSpanVal,a=n.setSpanVal;return function(c,l,s){function u(){c.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected")}function d(e){return e===c.getBody()}function f(t,n){return t?(n=e.map(n.split(","),function(e){return e.toLowerCase()}),e.grep(t.childNodes,function(t){return-1!==e.inArray(n,t.nodeName.toLowerCase())})):[]}function m(){var e=0;J=[],Q=0,o(["thead","tbody","tfoot"],function(t){var n=f(l,t)[0],r=f(n,"tr");o(r,function(n,r){r+=e,o(f(n,"td,th"),function(e,n){var o,a,c,l;if(J[r])for(;J[r][n];)n++;for(c=i(e,"rowspan"),l=i(e,"colspan"),a=r;a<r+c;a++)for(J[a]||(J[a]=[]),o=n;o<n+l;o++)J[a][o]={part:t,real:a==r&&o==n,elm:e,rowspan:c,colspan:l};Q=Math.max(Q,n+1)})}),e+=r.length})}function p(e){return c.fire("newrow",{node:e}),e}function g(e){return c.fire("newcell",{node:e}),e}function h(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function v(e,t){var n;if(n=J[t])return n[e]}function y(e,t){return e[t]?e[t]:null}function b(e,t){for(var n=[],r=0;r<e.length;r++)n.push(v(t,r));return n}function x(e){return e&&(!!ne.getAttrib(e.elm,"data-mce-selected")||e==s)}function C(){var e=[];return o(l.rows,function(t){o(t.cells,function(n){if(ne.getAttrib(n,"data-mce-selected")||s&&n==s.elm)return e.push(t),!1})}),e}function w(){var e=0;return o(J,function(t){if(o(t,function(t){x(t)&&e++}),e)return!1}),e}function T(){var e=ne.createRng();d(l)||(e.setStartAfter(l),e.setEndAfter(l),te.setRng(e),ne.remove(l))}function k(r){var i,l={};return!1!==c.settings.table_clone_elements&&(l=e.makeMap((c.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(r,function(e){var n;if(3==e.nodeType)return o(ne.getParents(e.parentNode,null,r).reverse(),function(e){l[e.nodeName]&&(e=h(e,!1),i?n&&n.appendChild(e):i=n=e,n=e)}),n&&(n.innerHTML=t.ie&&t.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),r=h(r,!1),g(r),a(r,"rowSpan",1),a(r,"colSpan",1),i?r.appendChild(i):n.paddCell(r),r}function E(){var e=ne.createRng(),t;if(o(ne.select("tr",l),function(e){0===e.cells.length&&ne.remove(e)}),0===ne.select("tr",l).length)return e.setStartBefore(l),e.setEndBefore(l),te.setRng(e),void ne.remove(l);o(ne.select("thead,tbody,tfoot",l),function(e){0===e.rows.length&&ne.remove(e)}),m(),Z&&(t=J[Math.min(J.length-1,Z.y)])&&(te.select(t[Math.min(t.length-1,Z.x)].elm,!0),te.collapse(!0))}function S(e,t,n,r){var o,i,a,c,l;for(o=J[t][e].elm.parentNode,a=1;a<=n;a++)if(o=ne.getNext(o,"tr")){for(i=e;i>=0;i--)if(l=J[t+a][i].elm,l.parentNode==o){for(c=1;c<=r;c++)ne.insertAfter(k(l),l);break}if(-1==i)for(c=1;c<=r;c++)o.insertBefore(k(o.cells[0]),o.cells[0])}}function N(){o(J,function(e,t){o(e,function(e,n){var r,o,c;if(x(e)&&(e=e.elm,r=i(e,"colspan"),o=i(e,"rowspan"),r>1||o>1)){for(a(e,"rowSpan",1),a(e,"colSpan",1),c=0;c<r-1;c++)ne.insertAfter(k(e),e);S(n,t,o-1,r)}})})}function R(e,t,n){for(var r=[],o=0;o<e.length;o++)(o<t||o>n)&&r.push(e[o]);return r}function A(t){return e.grep(t,function(e){return!1===e.real})}function _(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].elm;t[t.length-1]!==r&&t.push(r)}return t}function B(t,r,o,i,a){var c=0;if(a-o<1)return 0;for(var l=o+1;l<=a;l++){var s=R(y(t,l),r,i),u=A(s);s.length===u.length&&(e.each(_(u),function(e){n.setRowSpan(e,n.getRowSpan(e)-1)}),c++)}return c}function P(t,r,o,i,a){var c=0;if(i-r<1)return 0;for(var l=r+1;l<=i;l++){var s=R(b(t,l),o,a),u=A(s);s.length===u.length&&(e.each(_(u),function(e){n.setColSpan(e,n.getColSpan(e)-1)}),c++)}return c}function D(t,n,r){var i,c,l,s,u,d,f,p,g,h,y,b,C;if(t?(i=q(t),c=i.x,l=i.y,s=c+(n-1),u=l+(r-1)):(Z=ee=null,o(J,function(e,t){o(e,function(e,n){x(e)&&(Z||(Z={x:n,y:t}),ee={x:n,y:t})})}),Z&&(c=Z.x,l=Z.y,s=ee.x,u=ee.y)),p=v(c,l),g=v(s,u),p&&g&&p.part==g.part){N(),m(),b=B(J,c,l,s,u),C=P(J,c,l,s,u),p=v(c,l).elm;var w=s-c-C+1,T=u-l-b+1;for(w===Q&&T===J.length&&(w=1,T=1),w===Q&&T>1&&(T=1),a(p,"colSpan",w),a(p,"rowSpan",T),f=l;f<=u;f++)for(d=c;d<=s;d++)J[f]&&J[f][d]&&(t=J[f][d].elm)!=p&&(h=e.grep(t.childNodes),o(h,function(e){p.appendChild(e)}),h.length&&(h=e.grep(p.childNodes),y=0,o(h,function(e){"BR"==e.nodeName&&y++<h.length-1&&p.removeChild(e)})),ne.remove(t));E()}}function M(e){var t,n,r,c,l,s,u,d,f,m;if(o(J,function(n,r){if(o(n,function(n){if(x(n)&&(n=n.elm,l=n.parentNode,s=p(h(l,!1)),t=r,e))return!1}),e)return void 0===t}),void 0!==t){for(c=0,m=0;c<J[0].length;c+=m)if(J[t][c]&&(n=J[t][c].elm,m=i(n,"colspan"),n!=r)){if(e){if(t>0&&J[t-1][c]&&(d=J[t-1][c].elm,(f=i(d,"rowSpan"))>1)){a(d,"rowSpan",f+1);continue}}else if((f=i(n,"rowspan"))>1){a(n,"rowSpan",f+1);continue}u=k(n),a(u,"colSpan",n.colSpan),s.appendChild(u),r=n}s.hasChildNodes()&&(e?l.parentNode.insertBefore(s,l):ne.insertAfter(s,l))}}function I(e,t){t=t||C().length||1;for(var n=0;n<t;n++)M(e)}function O(e){var t,n;o(J,function(n){if(o(n,function(n,r){if(x(n)&&(t=r,e))return!1}),e)return void 0===t}),o(J,function(r,o){var c,l,s;r[t]&&(c=r[t].elm)!=n&&(s=i(c,"colspan"),l=i(c,"rowspan"),1==s?e?(c.parentNode.insertBefore(k(c),c),S(t,o,l-1,s)):(ne.insertAfter(k(c),c),S(t,o,l-1,s)):a(c,"colSpan",c.colSpan+1),n=c)})}function L(e,t){t=t||w()||1;for(var n=0;n<t;n++)O(e)}function F(t){return e.grep(H(t),x)}function H(e){var t=[];return o(e,function(e){o(e,function(e){t.push(e)})}),t}function U(){var t=[];if(d(l)){if(1==J[0].length)return;if(F(J).length==H(J).length)return}o(J,function(n){o(n,function(n,r){x(n)&&-1===e.inArray(t,r)&&(o(J,function(e){var t=e[r].elm,n;n=i(t,"colSpan"),n>1?a(t,"colSpan",n-1):ne.remove(t)}),t.push(r))})}),E()}function z(){function e(e){var t,n;o(e.cells,function(e){var n=i(e,"rowSpan");n>1&&(a(e,"rowSpan",n-1),t=q(e),S(t.x,t.y,1,1))}),t=q(e.cells[0]),o(J[t.y],function(e){var t;(e=e.elm)!=n&&(t=i(e,"rowSpan"),t<=1?ne.remove(e):a(e,"rowSpan",t-1),n=e)})}var t;t=C(),d(l)&&t.length==l.rows.length||(o(t.reverse(),function(t){e(t)}),E())}function W(){var e=C();if(!d(l)||e.length!=l.rows.length)return ne.remove(e),E(),e}function V(){var e=C();return o(e,function(t,n){e[n]=h(t,!0)}),e}function j(t,n){var c,l,s,d=[];t&&(c=r.splitAt(J,Z.x,Z.y,n),l=c.row,e.each(c.cells,g),s=e.map(t,function(e){return e.cloneNode(!0)}),o(s,function(e,t,r){var c,s=e.cells.length,u,f=0,m,h;for(p(e),c=0;c<s;c++)u=e.cells[c],h=i(u,"colspan"),m=i(u,"rowspan"),f+=h,m>1&&(f--,t+m>r.length?(m=r.length-t,a(u,"rowSpan",m),d.push(r.length-1)):d.push(t+m-1)),g(u);for(o(d,function(e){t<=e&&f++}),c=f;c<Q;c++)e.appendChild(k(e.cells[s-1]));for(c=Q;c<f;c++)u=e.cells[e.cells.length-1],h=i(u,"colspan"),h>1?a(u,"colSpan",h-1):ne.remove(u);n?l.parentNode.insertBefore(e,l):l=ne.insertAfter(e,l)}),u())}function q(e){var t;return o(J,function(n,r){return o(n,function(n,o){if(n.elm==e)return t={x:o,y:r},!1}),!t}),t}function $(e){Z=q(e)}function K(){var e,t;return e=t=0,o(J,function(n,r){o(n,function(n,o){var i,a;x(n)&&(n=J[r][o],o>e&&(e=o),r>t&&(t=r),n.real&&(i=n.colspan-1,a=n.rowspan-1,i&&o+i>e&&(e=o+i),a&&r+a>t&&(t=r+a)))})}),{x:e,y:t}}function Y(e){var t,n,r,o,i,a,c,l,s,d;if(ee=q(e),Z&&ee){for(t=Math.min(Z.x,ee.x),n=Math.min(Z.y,ee.y),r=Math.max(Z.x,ee.x),o=Math.max(Z.y,ee.y),i=r,a=o,d=n;d<=o;d++)for(s=t;s<=r;s++)e=J[d][s],e.real&&(c=e.colspan-1,l=e.rowspan-1,c&&s+c>i&&(i=s+c),l&&d+l>a&&(a=d+l));for(u(),d=n;d<=a;d++)for(s=t;s<=i;s++)J[d][s]&&ne.setAttrib(J[d][s].elm,"data-mce-selected","1")}}function X(e,t){var n,r,o;n=q(e),r=n.y*Q+n.x;do{if(r+=t,!(o=v(r%Q,Math.floor(r/Q))))break;if(o.elm!=e)return te.select(o.elm,!0),ne.isEmpty(o.elm)&&te.collapse(!0),!0}while(o.elm==e);return!1}function G(t){if(Z){var n=r.splitAt(J,Z.x,Z.y,t);e.each(n.cells,g)}}var J,Q,Z,ee,te=c.selection,ne=te.dom;l=l||ne.getParent(te.getStart(!0),"table"),m(),s=s||ne.getParent(te.getStart(!0),"th,td"),s&&(Z=q(s),ee=K(),s=v(Z.x,Z.y)),e.extend(this,{deleteTable:T,split:N,merge:D,insertRow:M,insertRows:I,insertCol:O,insertCols:L,splitCols:G,deleteCols:U,deleteRows:z,cutRows:W,copyRows:V,pasteRows:j,getPos:q,setStartCell:$,setEndCell:Y,moveRelIdx:X,refresh:m})}}),a("tinymce.plugins.table.selection.CellSelection",["tinymce.plugins.table.model.TableGrid","tinymce.core.dom.TreeWalker","tinymce.core.util.Tools"],function(e,t,n){return function(r,o){function i(e){r.getBody().style.webkitUserSelect="",(e||m)&&(r.$("td[data-mce-selected],th[data-mce-selected]").removeAttr("data-mce-selected"),m=!1)}function a(e,t){return!(!e||!t)&&e===l.getParent(t,"table")}function c(t){var n,i=t.target,c;if(!p&&!g&&i!==f&&(f=i,d&&u)){if(c=l.getParent(i,"td,th"),a(d,c)||(c=l.getParent(d,"td,th")),u===c&&!m)return;if(o(!0),a(d,c)){t.preventDefault(),s||(s=new e(r,d,u),r.getBody().style.webkitUserSelect="none"),s.setEndCell(c),m=!0,n=r.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(e){}}}}var l=r.dom,s,u,d,f,m=!0,p,g,h=function(){u=s=d=f=null,o(!1)};return r.on("SelectionChange",function(e){m&&e.stopImmediatePropagation()},!0),r.on("MouseDown",function(e){2==e.button||p||g||(i(),u=l.getParent(e.target,"td,th"),d=l.getParent(u,"table"))}),r.on("mouseover",c),r.on("remove",function(){l.unbind(r.getDoc(),"mouseover",c),i()}),r.on("MouseUp",function(){function e(e,r){var i=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(r?o.setStart(e,0):o.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(r?o.setStartBefore(e):o.setEndBefore(e))}while(e=r?i.next():i.prev())}var o,i=r.selection,a,c,d,f;if(u){if(s&&(r.getBody().style.webkitUserSelect=""),a=l.select("td[data-mce-selected],th[data-mce-selected]"),a.length>0){o=l.createRng(),d=a[0],o.setStartBefore(d),o.setEndAfter(d),e(d,1),c=new t(d,l.getParent(a[0],"table"));do{if("TD"==d.nodeName||"TH"==d.nodeName){if(!l.getAttrib(d,"data-mce-selected"))break;f=d}}while(d=c.next());e(f),i.setRng(o)}r.nodeChanged(),h()}}),r.on("KeyUp Drop SetContent",function(e){i("setcontent"==e.type),h(),p=!1}),r.on("ObjectResizeStart ObjectResized",function(e){p="objectresized"!=e.type}),r.on("dragstart",function(){g=!0}),r.on("drop dragend",function(){g=!1}),{clear:i}}}),a("tinymce.plugins.table.ui.Dialogs",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each;return function(r){function o(){var e=r.settings.color_picker_callback;if(e)return function(){var t=this;e.call(r,function(e){t.value(e).fire("change")},t.value())}}function i(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){d(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:o()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:o()}]}]}}function a(e){return e?e.replace(/px$/,""):""}function c(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function l(e){n("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},e)})}function s(e){n("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},e)})}function u(t,n,r){function o(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r}return o(t,r||[])}function d(e,t,n){var r=t.toJSON(),o=e.parseStyle(r.style);n?(t.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change")):(o["border-color"]=r.borderColor,o["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}function f(e,t,n){var r=e.parseStyle(e.getAttrib(n,"style"));r["border-color"]&&(t.borderColor=r["border-color"]),r["background-color"]&&(t.backgroundColor=r["background-color"]),t.style=e.serializeStyle(r)}function m(e,t,r){var o=e.parseStyle(e.getAttrib(t,"style"));n(r,function(e){o[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}var p=this;p.tableProps=function(){p.table(!0)},p.table=function(o){function s(){function n(e,t,r){if("TD"===e.tagName||"TH"===e.tagName)g.setStyle(e,t,r);else if(e.children)for(var o=0;o<e.children.length;o++)n(e.children[o],t,r)}var o;d(g,this),x=e.extend(x,this.toJSON()),!1===x.class&&delete x.class,r.undoManager.transact(function(){if(h||(h=r.plugins.table.insertTable(x.cols||1,x.rows||1)),r.dom.setAttribs(h,{style:x.style,class:x.class}),r.settings.table_style_by_css){if(w=[],w.push({name:"border",value:x.border}),w.push({name:"border-spacing",value:c(x.cellspacing)}),m(g,h,w),g.setAttribs(h,{"data-mce-border-color":x.borderColor,"data-mce-cell-padding":x.cellpadding,"data-mce-border":x.border}),h.children)for(var e=0;e<h.children.length;e++)n(h.children[e],"border",x.border),n(h.children[e],"padding",c(x.cellpadding))}else r.dom.setAttribs(h,{border:x.border,cellpadding:x.cellpadding,cellspacing:x.cellspacing});g.getAttrib(h,"width")&&!r.settings.table_style_by_css?g.setAttrib(h,"width",a(x.width)):g.setStyle(h,"width",c(x.width)),g.setStyle(h,"height",c(x.height)),o=g.select("caption",h)[0],o&&!x.caption&&g.remove(o),!o&&x.caption&&(o=g.create("caption"),o.innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',h.insertBefore(o,h.firstChild)),l(h),x.align&&r.formatter.apply("align"+x.align,{},h),r.focus(),r.addVisual()})}function p(e,t){function n(e,n){for(var r=0;r<n.length;r++){var o=g.getStyle(n[r],t);if(void 0===e&&(e=o),e!=o)return""}return e}var o=r.dom.select("td,th",e),i;return i=n(i,o)}var g=r.dom,h,v,y,b,x={},C,w;!0===o?(h=g.getParent(r.selection.getStart(),"table"))&&(x={width:a(g.getStyle(h,"width")||g.getAttrib(h,"width")),height:a(g.getStyle(h,"height")||g.getAttrib(h,"height")),cellspacing:a(g.getStyle(h,"border-spacing")||g.getAttrib(h,"cellspacing")),cellpadding:g.getAttrib(h,"data-mce-cell-padding")||g.getAttrib(h,"cellpadding")||p(h,"padding"),border:g.getAttrib(h,"data-mce-border")||g.getAttrib(h,"border")||p(h,"border"),borderColor:g.getAttrib(h,"data-mce-border-color"),caption:!!g.select("caption",h)[0],class:g.getAttrib(h,"class")},n("left center right".split(" "),function(e){r.formatter.matchNode(h,"align"+e)&&(x.align=e)})):(v={label:"Cols",name:"cols"},y={label:"Rows",name:"rows"}),r.settings.table_class_list&&(x.class&&(x.class=x.class.replace(/\s*mce\-item\-table\s*/g,"")),b={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[e.value]})})})}),C={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==r.settings.table_appearance_options?[v,y,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[v,y,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},b]},!1!==r.settings.table_advtab?(f(g,x,h),r.windowManager.open({title:"Table properties",data:x,bodyType:"tabpanel",body:[{title:"General",type:"form",items:C},i(g)],onsubmit:s})):r.windowManager.open({title:"Table properties",data:x,body:C,onsubmit:s})},p.merge=function(e,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},p.cell=function(){function t(e,t,n){(1===y.length||n)&&p.setAttrib(e,t,n)}function o(e,t,n){(1===y.length||n)&&p.setStyle(e,t,n)}function m(){d(p,this),h=e.extend(h,this.toJSON()),r.undoManager.transact(function(){n(y,function(e){t(e,"scope",h.scope),t(e,"style",h.style),t(e,"class",h.class),o(e,"width",c(h.width)),o(e,"height",c(h.height)),h.type&&e.nodeName.toLowerCase()!==h.type&&(e=p.rename(e,h.type)),1===y.length&&(l(e),s(e)),h.align&&r.formatter.apply("align"+h.align,{},e),h.valign&&r.formatter.apply("valign"+h.valign,{},e)}),r.focus()})}var p=r.dom,g,h,v,y=[];if(y=r.dom.select("td[data-mce-selected],th[data-mce-selected]"),g=r.dom.getParent(r.selection.getStart(),"td,th"),!y.length&&g&&y.push(g),g=g||y[0]){y.length>1?h={width:"",height:"",scope:"",class:"",align:"",style:"",type:g.nodeName.toLowerCase()}:(h={width:a(p.getStyle(g,"width")||p.getAttrib(g,"width")),height:a(p.getStyle(g,"height")||p.getAttrib(g,"height")),scope:p.getAttrib(g,"scope"),class:p.getAttrib(g,"class")},h.type=g.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(g,"align"+e)&&(h.align=e)}),n("top middle bottom".split(" "),function(e){r.formatter.matchNode(g,"valign"+e)&&(h.valign=e)}),f(p,h,g)),r.settings.table_cell_class_list&&(v={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[e.value]})})})});var b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},v]};!1!==r.settings.table_cell_advtab?r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:h,body:[{title:"General",type:"form",items:b},i(p)],onsubmit:m}):r.windowManager.open({title:"Cell properties",data:h,body:b,onsubmit:m})}},p.row=function(){function t(e,t,n){(1===b.length||n)&&m.setAttrib(e,t,n)}function o(e,t,n){(1===b.length||n)&&m.setStyle(e,t,n)}function s(){var i,a,s;d(m,this),y=e.extend(y,this.toJSON()),r.undoManager.transact(function(){var e=y.type;n(b,function(n){t(n,"scope",y.scope),t(n,"style",y.style),t(n,"class",y.class),o(n,"height",c(y.height)),e!==n.parentNode.nodeName.toLowerCase()&&(i=m.getParent(n,"table"),a=n.parentNode,s=m.select(e,i)[0],s||(s=m.create(e),i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s)),s.appendChild(n),a.hasChildNodes()||m.remove(a)),1===b.length&&l(n),y.align&&r.formatter.apply("align"+y.align,{},n)}),r.focus()})}var m=r.dom,p,g,h,v,y,b=[],x;p=r.dom.getParent(r.selection.getStart(),"table"),g=r.dom.getParent(r.selection.getStart(),"td,th"),n(p.rows,function(e){n(e.cells,function(t){if(m.getAttrib(t,"data-mce-selected")||t==g)return b.push(e),!1})}),(h=b[0])&&(b.length>1?y={height:"",scope:"",class:"",align:"",type:h.parentNode.nodeName.toLowerCase()}:(y={height:a(m.getStyle(h,"height")||m.getAttrib(h,"height")),scope:m.getAttrib(h,"scope"),class:m.getAttrib(h,"class")},y.type=h.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(h,"align"+e)&&(y.align=e)}),f(m,y,h)),r.settings.table_row_class_list&&(v={name:"class",type:"listbox",label:"Class",values:u(r.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[e.value]})})})}),x={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},v]},!1!==r.settings.table_row_advtab?r.windowManager.open({title:"Row properties",data:y,bodyType:"tabpanel",body:[{title:"General",type:"form",items:x},i(m)],onsubmit:s}):r.windowManager.open({title:"Row properties",data:y,body:x,onsubmit:s}))}}}),a("tinymce.plugins.table.ui.ResizeBars",["tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t){var n;return function(r){function o(e,t){return{index:e,y:r.dom.getPos(t).y}}function i(e,t){return{index:e,y:r.dom.getPos(t).y+t.offsetHeight}}function a(e,t){return{index:e,x:r.dom.getPos(t).x}}function c(e,t){return{index:e,x:r.dom.getPos(t).x+t.offsetWidth}}function l(){return"rtl"===r.getBody().dir}function s(){return r.inline}function u(){return s?r.getBody().ownerDocument.body:r.getBody()}function d(e,t){return l()?c(e,t):a(e,t)}function f(e,t){return l()?a(e,t):c(e,t)}function m(e,t){return p(e,"width")/p(t,"width")*100}function p(e,t){var n=r.dom.getStyle(e,t,!0);return parseInt(n,10)}function g(e){return p(e,"width")/p(e.parentElement,"width")*100}function h(e,t){return t/p(e,"width")*100}function v(e,t){return t/p(e.parentElement,"width")*100}function y(e,t,n){for(var r=[],o=1;o<n.length;o++){var i=n[o].element;r.push(e(o-1,i))}var a=n[n.length-1];return r.push(t(n.length-1,a.element)),r}function b(){var t=r.dom.select("."+ie,u());e.each(t,function(e){r.dom.remove(e)})}function x(e){b(),_(e)}function C(e,t,n,r,o,i,a,c){var l={"data-mce-bogus":"all",class:ie+" "+e,unselectable:"on","data-mce-resize":!1,style:"cursor: "+t+"; margin: 0; padding: 0; position: absolute; left: "+n+"px; top: "+r+"px; height: "+o+"px; width: "+i+"px; "};return l[a]=c,l}function w(t,n,o){e.each(t,function(e){var t=o.x,i=e.y-pe/2,a=pe,c=n;r.dom.add(u(),"div",C(ae,ce,t,i,a,c,le,e.index))})}function T(t,n,o){e.each(t,function(e){var t=e.x-pe/2,i=o.y,a=n,c=pe;r.dom.add(u(),"div",C(ue,de,t,i,a,c,fe,e.index))})}function k(t){return e.map(t.rows,function(t){return{element:t,cells:e.map(t.cells,function(e){return{element:e,rowspan:e.hasAttribute("rowspan")?parseInt(e.getAttribute("rowspan"),10):1,colspan:e.hasAttribute("colspan")?parseInt(e.getAttribute("colspan"),10):1}})}})}function E(t){function n(e,t){return e+","+t}function r(e,t){return a[n(e,t)]}function o(){var t=[];return e.each(c,function(e){t=t.concat(e.cells)}),t}function i(){return c}var a={},c=[],l=0,s=0;return e.each(t,function(t,r){var o=[];e.each(t.cells,function(e){for(var t=0;void 0!==a[n(r,t)];)t++;for(var i={element:e.element,colspan:e.colspan,rowspan:e.rowspan,rowIndex:r,colIndex:t},c=0;c<e.colspan;c++)for(var u=0;u<e.rowspan;u++){var d=r+u,f=t+c;a[n(d,f)]=i,l=Math.max(l,d+1),s=Math.max(s,f+1)}o.push(i)}),c.push({element:t.element,cells:o})}),{grid:{maxRows:l,maxCols:s},getAt:r,getAllCells:o,getAllRows:i}}function S(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}function N(e,t,n){for(var r=e(),o,i=0;i<r.length;i++)t(r[i])&&(o=r[i]);return o||n()}function R(t){var n=S(0,t.grid.maxCols),r=S(0,t.grid.maxRows);return e.map(n,function(e){function n(){for(var n=[],o=0;o<r.length;o++){var i=t.getAt(o,e);i&&i.colIndex===e&&n.push(i)}return n}function o(e){return 1===e.colspan}function i(){for(var n,o=0;o<r.length;o++)if(n=t.getAt(o,e))return n;return null}return N(n,o,i)})}function A(t){var n=S(0,t.grid.maxCols),r=S(0,t.grid.maxRows);return e.map(r,function(e){function r(){for(var r=[],o=0;o<n.length;o++){var i=t.getAt(e,o);i&&i.rowIndex===e&&r.push(i)}return r}function o(e){return 1===e.rowspan}function i(){return t.getAt(e,0)}return N(r,o,i)})}function _(e){var t=k(e),n=E(t),a=A(n),c=R(n),l=r.dom.getPos(e),s=a.length>0?y(o,i,a):[],u=c.length>0?y(d,f,c):[];w(s,e.offsetWidth,l),T(u,e.offsetHeight,l)}function B(e,t,n,r){if(t<0||t>=e.length-1)return"";var o=e[t];if(o)o={value:o,delta:0};else for(var i=e.slice(0,t).reverse(),a=0;a<i.length;a++)i[a]&&(o={value:i[a],delta:a+1});var c=e[t+1];if(c)c={value:c,delta:1};else for(var l=e.slice(t+1),s=0;s<l.length;s++)l[s]&&(c={value:l[s],delta:s+1});var u=c.delta-o.delta,d=Math.abs(c.value-o.value)/u;return n?d/p(r,"width")*100:d}function P(e,t){var n=r.dom.getStyle(e,t);return n||(n=r.dom.getAttrib(e,t)),n||(n=r.dom.getStyle(e,t,!0)),n}function D(e,t,n){var r=P(e,"width"),o=parseInt(r,10),i=t?m(e,n):p(e,"width");return(t&&!W(r)||!t&&!V(r))&&(o=0),!isNaN(o)&&o>0?o:i}function M(t,n,r){for(var o=R(t),i=e.map(o,function(e){return d(e.colIndex,e.element).x}),a=[],c=0;c<o.length;c++){var l=o[c].element.hasAttribute("colspan")?parseInt(o[c].element.getAttribute("colspan"),10):1,s=l>1?B(i,c):D(o[c].element,n,r);s=s||ge,a.push(s)}return a}function I(e){var t=P(e,"height"),n=parseInt(t,10);return W(t)&&(n=0),!isNaN(n)&&n>0?n:p(e,"height")}function O(t){for(var n=A(t),r=e.map(n,function(e){return o(e.rowIndex,e.element).y}),i=[],a=0;a<n.length;a++){var c=n[a].element.hasAttribute("rowspan")?parseInt(n[a].element.getAttribute("rowspan"),10):1,l=c>1?B(r,a):I(n[a].element);l=l||he,i.push(l)}return i}function L(t,n,r,o,i){function a(t){return e.map(t,function(){return 0})}function c(){var e;return e=i?[100-u[0]]:[Math.max(o,u[0]+r)-u[0]]}function l(e,t){var n=a(u.slice(0,e)),i=a(u.slice(t+1)),c;if(r>=0){var l=Math.max(o,u[t]-r);c=n.concat([r,l-u[t]]).concat(i)}else{var s=Math.max(o,u[e]+r),d=u[e]-s;c=n.concat([s-u[e],d]).concat(i)}return c}function s(e,t){var n=a(u.slice(0,t)),i;if(r>=0)i=n.concat([r]);else{var c=Math.max(o,u[t]+r);i=n.concat([c-u[t]])}return i}var u=t.slice(0),d;return d=0===t.length?[]:1===t.length?c():0===n?l(0,1):n>0&&n<t.length-1?l(n,n+1):n===t.length-1?s(n-1,n):[]}function F(e,t,n){for(var r=0,o=e;o<t;o++)r+=n[o];return r}function H(t,n){var r=t.getAllCells();return e.map(r,function(e){var t=F(e.colIndex,e.colIndex+e.colspan,n);return{element:e.element,width:t,colspan:e.colspan}})}function U(t,n){var r=t.getAllCells();return e.map(r,function(e){var t=F(e.rowIndex,e.rowIndex+e.rowspan,n);return{element:e.element,height:t,rowspan:e.rowspan}})}function z(t,n){var r=t.getAllRows();return e.map(r,function(e,t){return{element:e.element,height:n[t]}})}function W(e){return ye.test(e)}function V(e){return be.test(e)}function j(t,n,o){function i(t,n){e.each(t,function(e){r.dom.setStyle(e.element,"width",e.width+n),r.dom.setAttrib(e.element,"width",null)})}function a(){return o<u.grid.maxCols-1?g(t):g(t)+v(t,n)}function c(){return o<u.grid.maxCols-1?p(t,"width"):p(t,"width")+n}function l(e,n,i){o!=u.grid.maxCols-1&&i||(r.dom.setStyle(t,"width",e+n),r.dom.setAttrib(t,"width",null))}for(var s=k(t),u=E(s),d=W(t.width)||W(t.style.width),f=M(u,d,t),m=d?h(t,n):n,y=L(f,o,m,ge,d,t),b=[],x=0;x<y.length;x++)b.push(y[x]+f[x]);var C=H(u,b),w=d?"%":"px",T=d?a():c();r.undoManager.transact(function(){i(C,w),l(T,w,d)})}function q(t,n,o){for(var i=k(t),a=E(i),c=O(a),l=[],s=0,u=0;u<c.length;u++)l.push(u===o?n+c[u]:c[u]),s+=s[u];var d=U(a,l),f=z(a,l);r.undoManager.transact(function(){e.each(f,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),e.each(d,function(e){r.dom.setStyle(e.element,"height",e.height+"px"),r.dom.setAttrib(e.element,"height",null)}),r.dom.setStyle(t,"height",s+"px"),r.dom.setAttrib(t,"height",null)})}function $(){xe=setTimeout(function(){G()},200)}function K(){clearTimeout(xe)}function Y(){var e=document.createElement("div");return e.setAttribute("style","margin: 0; padding: 0; position: fixed; left: 0px; top: 0px; height: 100%; width: 100%;"),e.setAttribute("data-mce-bogus","all"),e}function X(e,t){r.dom.bind(e,"mouseup",function(){G()}),r.dom.bind(e,"mousemove",function(e){K(),Ce&&t(e)}),r.dom.bind(e,"mouseout",function(){$()})}function G(){if(r.dom.remove(we),Ce){r.dom.removeClass(Te,ve),Ce=!1;var e,t;if(Q(Te)){var o=parseInt(r.dom.getAttrib(Te,me),10),i=r.dom.getPos(Te).x;e=parseInt(r.dom.getAttrib(Te,fe),10),t=l()?o-i:i-o,Math.abs(t)>=1&&j(n,t,e)}else if(Z(Te)){var a=parseInt(r.dom.getAttrib(Te,se),10),c=r.dom.getPos(Te).y;e=parseInt(r.dom.getAttrib(Te,le),10),t=c-a,Math.abs(t)>=1&&q(n,t,e)}x(n),r.nodeChanged()}}function J(e,t){we=we||Y(),Ce=!0,r.dom.addClass(e,ve),Te=e,X(we,t),r.dom.add(u(),we)}function Q(e){return r.dom.hasClass(e,ue)}function Z(e){return r.dom.hasClass(e,ae)}function ee(e){ke=void 0!==ke?ke:e.clientX;var t=e.clientX-ke;ke=e.clientX;var n=r.dom.getPos(Te).x;r.dom.setStyle(Te,"left",n+t+"px")}function te(e){Ee=void 0!==Ee?Ee:e.clientY;var t=e.clientY-Ee;Ee=e.clientY;var n=r.dom.getPos(Te).y;r.dom.setStyle(Te,"top",n+t+"px")}function ne(e){ke=void 0,J(e,ee)}function re(e){Ee=void 0,J(e,te)}function oe(e){var t=e.target,o=r.getBody();if(r.$.contains(o,n)||n===o)if(Q(t)){e.preventDefault();var i=r.dom.getPos(t).x;r.dom.setAttrib(t,me,i),ne(t)}else if(Z(t)){e.preventDefault();var a=r.dom.getPos(t).y;r.dom.setAttrib(t,se,a),re(t)}else b()}var ie="mce-resize-bar",ae="mce-resize-bar-row",ce="row-resize",le="data-row",se="data-initial-top",ue="mce-resize-bar-col",de="col-resize",fe="data-col",me="data-initial-left",pe=4,ge=10,he=10,ve="mce-resize-bar-dragging",ye=RegExp(/(\d+(\.\d+)?%)/),be=RegExp(/px|em/),xe,Ce,we,Te,ke,Ee;return r.on("init",function(){r.dom.bind(u(),"mousedown",oe)}),r.on("ObjectResized",function(t){var n=t.target;if("TABLE"===n.nodeName){var o=[];e.each(n.rows,function(t){e.each(t.cells,function(e){var t=r.dom.getStyle(e,"width",!0);o.push({cell:e,width:t})})}),e.each(o,function(e){r.dom.setStyle(e.cell,"width",e.width),r.dom.setAttrib(e.cell,"width",null)})}}),r.on("mouseover",function(e){if(!Ce){var t=r.dom.getParent(e.target,"table");("TABLE"===e.target.nodeName||t)&&(n=t,x(t))}}),r.on("keydown",function(e){switch(e.keyCode){case t.LEFT:case t.RIGHT:case t.UP:case t.DOWN:b()}}),r.on("remove",function(){b(),r.dom.unbind(u(),"mousedown",oe)}),{adjustWidth:j,adjustHeight:q,clearBars:b,drawBars:_,determineDeltas:L,getTableGrid:E,getTableDetails:k,getWidths:M,getPixelHeights:O,isPercentageBasedSize:W,isPixelBasedSize:V,recalculateWidths:H,recalculateCellHeights:U,recalculateRowHeights:z}}}),a("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),a("tinymce.plugins.table.util.Quirks",["tinymce.core.util.VK","tinymce.core.util.Delay","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.table.util.Utils"],function(e,t,n,r,o){var i=r.each,a=o.getSpanVal;return function(c){function l(){function n(n){function r(e,t){var r=e?"previousSibling":"nextSibling",i=c.dom.getParent(t,"tr"),a=i[r];if(a)return v(c,t,a,e),n.preventDefault(),!0;var l=c.dom.getParent(i,"table"),d=i.parentNode,f=d.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var m=o(e,l,d,"tbody");if(null!==m)return s(e,m,t)}return u(e,i,r,l)}function o(e,t,n,r){var o=c.dom.select(">"+r,t),i=o.indexOf(n);return e&&0===i||!e&&i===o.length-1?l(e,t):-1===i?o["thead"===n.tagName.toLowerCase()?0:o.length-1]:o[i+(e?-1:1)]}function l(e,t){var n=e?"thead":"tfoot",r=c.dom.select(">"+n,t);return 0!==r.length?r[0]:null}function s(e,t,r){var o=d(t,e);return o&&v(c,r,o,e),n.preventDefault(),!0}function u(e,t,o,i){var a=i[o];if(a)return f(a),!0;var l=c.dom.getParent(i,"td,th");return l?r(e,l,n):(f(d(t,!e)),n.preventDefault(),!1)}function d(e,t){var n=e&&e[t?"lastChild":"firstChild"];return n&&"BR"===n.nodeName?c.dom.getParent(n,"td,th"):n}function f(e){c.selection.setCursorLocation(e,0)}function m(){return x==e.UP||x==e.DOWN}function p(e){var t=e.selection.getNode();return null!==e.dom.getParent(t,"tr")}function g(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=a(n,"colspan");return t}function h(e,t){var n=0,r=0;return i(e.children,function(e,o){if(n+=a(e,"colspan"),r=o,n>t)return!1}),r}function v(e,t,n,r){var o=g(c.dom.getParent(t,"td,th")),i=h(n,o),a=n.childNodes[i];f(d(a,r)||a)}function y(e){var t=c.selection.getNode(),n=c.dom.getParent(t,"td,th"),r=c.dom.getParent(e,"td,th");return n&&n!==r&&b(n,r)}function b(e,t){return c.dom.getParent(e,"TABLE")===c.dom.getParent(t,"TABLE")}var x=n.keyCode;if(m()&&p(c)){var C=c.selection.getNode();t.setEditorTimeout(c,function(){y(C)&&r(!n.shiftKey&&x===e.UP,C,n)},0)}}c.on("KeyDown",function(e){n(e)})}function s(){function e(e,t){var n=t.ownerDocument,r=n.createRange(),o;return r.setStartBefore(t),r.setEnd(e.endContainer,e.endOffset),o=n.createElement("body"),o.appendChild(r.cloneContents()),0===o.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}c.on("KeyDown",function(t){var n,r,o=c.dom;37!=t.keyCode&&38!=t.keyCode||(n=c.selection.getRng(),(r=o.getParent(n.startContainer,"table"))&&c.getBody().firstChild==r&&e(n,r)&&(n=o.createRng(),n.setStartBefore(r),n.setEndBefore(r),c.selection.setRng(n),t.preventDefault()))})}function u(){c.on("KeyDown SetContent VisualAid",function(){var e;for(e=c.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(c.settings.forced_root_block?c.dom.add(c.getBody(),c.settings.forced_root_block,c.settings.forced_root_block_attrs,n.ie&&n.ie<10?"&nbsp;":'<br data-mce-bogus="1" />'):c.dom.add(c.getBody(),"br",{"data-mce-bogus":"1"}))}),c.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||"\xa0"==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&c.dom.remove(t)})}function d(){function e(e,t,n,r){var o=3,i=e.dom.getParent(t.startContainer,"TABLE"),a,c,l;return i&&(a=i.parentNode),c=3==t.startContainer.nodeType&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==n.nodeName||n==a),l=("TD"==n.nodeName||"TH"==n.nodeName)&&!r,c||l}function t(){var t=c.selection.getRng(),n=c.selection.getNode(),r=c.dom.getParent(t.startContainer,"TD,TH");if(e(c,t,n,r)){r||(r=n);for(var o=r.lastChild;o.lastChild;)o=o.lastChild;3==o.nodeType&&(t.setEnd(o,o.data.length),c.selection.setRng(t))}}c.on("KeyDown",function(){t()}),c.on("MouseDown",function(e){2!=e.button&&t()})}function f(){function t(e){c.selection.select(e,!0),c.selection.collapse(!0)}function n(e){c.$(e).empty(),o.paddCell(e)}c.on("keydown",function(o){if((o.keyCode==e.DELETE||o.keyCode==e.BACKSPACE)&&!o.isDefaultPrevented()){var i,a,l,s;if(i=c.dom.getParent(c.selection.getStart(),"table")){if(a=c.dom.select("td,th",i),l=r.grep(a,function(e){return!!c.dom.getAttrib(e,"data-mce-selected")}),0===l.length)return s=c.dom.getParent(c.selection.getStart(),"td,th"),void(c.selection.isCollapsed()&&s&&c.dom.isEmpty(s)&&(o.preventDefault(),n(s),t(s)));o.preventDefault(),c.undoManager.transact(function(){a.length==l.length?c.execCommand("mceTableDelete"):(r.each(l,n),t(l[0]))})}}})}function m(){var t="\ufeff",n=function(e){return c.dom.isEmpty(e)||e.firstChild===e.lastChild&&i(e.firstChild)},r=function(e){return e&&"CAPTION"==e.nodeName&&"TABLE"==e.parentNode.nodeName},o=function(e,t){var n=t.firstChild;do{if(n===e)return!0}while(n=n.firstChild);return!1},i=function(e){if(3===e.nodeType){if(e.data===t)return!0;e=e.parentNode}return 1===e.nodeType&&e.hasAttribute("data-mce-caret")},a=function(e){var t=c.selection.getRng();return!t.startOffset&&!t.startContainer.previousSibling&&o(t.startContainer,e)},l=function(e,n){var r;r=n?c.dom.create("p",{"data-mce-caret":"after","data-mce-bogus":"all"},'<br data-mce-bogus="1">'):e.ownerDocument.createTextNode(t),e.appendChild(r)},s=function(e,r){var o=e.lastChild,a=c.selection.getRng(),s=a.startContainer,u=a.startOffset;n(e)?(e.innerHTML=t,s=e.lastChild,u=0):i(o)||l(e,c.dom.isBlock(o)),c.selection.setCursorLocation(s,u)},u=function(e){var t=c.selection.getRng(),n=c.dom.createRng(),r=e.firstChild;t.commonAncestorContainer===e.parentNode&&o(t.startContainer,e)&&(n.setStart(e,0),1===r.nodeType?n.setEnd(e,e.childNodes.length):n.setEnd(r,r.nodeValue.length),c.selection.setRng(n))};c.on("keydown",function(t){if(!(t.keyCode!==e.DELETE&&t.keyCode!==e.BACKSPACE||t.isDefaultPrevented())){var o=c.dom.getParent(c.selection.getStart(),"caption");r(o)&&(c.selection.isCollapsed()?(s(o),(n(o)||t.keyCode===e.BACKSPACE&&a(o))&&t.preventDefault()):(u(o),c.undoManager.transact(function(){c.execCommand("Delete"),s(o)}),t.preventDefault()))}})}m(),f(),n.webkit&&(l(),d()),n.gecko&&(s(),u()),n.ie>9&&(s(),u())}}),a("tinymce.plugins.table.Plugin",["tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.table.model.TableGrid","tinymce.plugins.table.selection.CellSelection","tinymce.plugins.table.ui.Dialogs","tinymce.plugins.table.ui.ResizeBars","tinymce.plugins.table.util.Quirks"],function(e,t,n,r,o,i,a,c,l,s){function u(e){function n(t){return function(){e.execCommand(t)}}function r(n,r){var o,i,a,c;for(a='<table id="__mce"><tbody>',o=0;o<r;o++){for(a+="<tr>",i=0;i<n;i++)a+="<td>"+(t.ie&&t.ie<10?"&nbsp;":"<br>")+"</td>";a+="</tr>"}return a+="</tbody></table>",e.undoManager.transact(function(){e.insertContent(a),c=e.dom.get("__mce"),e.dom.setAttrib(c,"id",null),e.$("tr",c).each(function(t,n){e.fire("newrow",{node:n}),e.$("th,td",n).each(function(t,n){e.fire("newcell",{node:n})})}),e.dom.setAttribs(c,e.settings.table_default_attributes||{}),e.dom.setStyles(c,e.settings.table_default_styles||{})}),c}function u(t,n,r){function o(){var o,i,a={},c=0,l;i=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),o=i[0],o||(o=e.selection.getStart()),r&&i.length>0?(d(i,function(e){return a[e.parentNode.parentNode.nodeName]=1}),d(a,function(e){c+=e}),l=1!==c):l=!e.dom.getParent(o,n),t.disabled(l),e.selection.selectorChanged(n,function(e){t.disabled(!e)})}e.initialized?o():e.on("init",o)}function f(){u(this,"table")}function m(){u(this,"td,th")}function p(){u(this,"td,th",!0)}function g(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function h(t,n,r){var o=r.getEl().getElementsByTagName("table")[0],i,a,c,l,s,u=r.isRtl()||"tl-tr"==r.parent().rel;for(o.nextSibling.innerHTML=t+1+" x "+(n+1),u&&(t=9-t),a=0;a<10;a++)for(i=0;i<10;i++)l=o.rows[a].childNodes[i].firstChild,s=(u?i>=t:i<=t)&&a<=n,e.dom.toggleClass(l,"mce-active",s),s&&(c=l);return c.parentNode}function v(){e.addButton("tableprops",{title:"Table properties",onclick:k.tableProps,icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})}function y(t){return e.dom.is(t,"table")&&e.getBody().contains(t)}function b(){var t=e.settings.table_toolbar;""!==t&&!1!==t&&(t||(t="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),e.addContextToolbar(y,t))}function x(){return w}function C(e){w=e}var w,T=this,k=new c(e),E;!e.settings.object_resizing||!1===e.settings.table_resize_bars||!0!==e.settings.object_resizing&&"table"!==e.settings.object_resizing||(E=l(e)),!1===e.settings.table_grid?e.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",onclick:k.table}):e.addMenuItem("inserttable",{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),k.table())},onshow:function(){h(0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:g(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t=e.target,n,r;"A"==t.tagName.toUpperCase()&&(n=parseInt(t.getAttribute("data-mce-x"),10),r=parseInt(t.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(h(n,r,e.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"==t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact(function(){r(n.lastX+1,n.lastY+1)}),e.addVisual())}}]}),e.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:f,onclick:k.tableProps}),e.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:f,cmd:"mceTableDelete"}),e.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:n("mceTableCellProps"),onPostRender:m},{text:"Merge cells",onclick:n("mceTableMergeCells"),onPostRender:p},{text:"Split cell",onclick:n("mceTableSplitCells"),onPostRender:m}]}),e.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:n("mceTableInsertRowBefore"),onPostRender:m},{text:"Insert row after",onclick:n("mceTableInsertRowAfter"),onPostRender:m},{text:"Delete row",onclick:n("mceTableDeleteRow"),onPostRender:m},{text:"Row properties",onclick:n("mceTableRowProps"),onPostRender:m},{text:"-"},{text:"Cut row",onclick:n("mceTableCutRow"),onPostRender:m},{text:"Copy row",onclick:n("mceTableCopyRow"),onPostRender:m},{text:"Paste row before",onclick:n("mceTablePasteRowBefore"),onPostRender:m},{text:"Paste row after",onclick:n("mceTablePasteRowAfter"),onPostRender:m}]}),e.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:n("mceTableInsertColBefore"),onPostRender:m},{text:"Insert column after",onclick:n("mceTableInsertColAfter"),onPostRender:m},{text:"Delete column",onclick:n("mceTableDeleteCol"),onPostRender:m}]});var S=[];d("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"==t?S.push({text:"-"}):S.push(e.menuItems[t])}),e.addButton("table",{type:"menubutton",title:"Table",menu:S}),t.isIE||e.on("click",function(t){t=t.target,"TABLE"===t.nodeName&&(e.selection.select(t),e.nodeChanged())}),T.quirks=new s(e),e.on("Init",function(){T.cellSelection=new a(e,function(e){e&&E&&E.clearBars()}),T.resizeBars=E}),e.on("PreInit",function(){e.serializer.addAttributeFilter("data-mce-cell-padding,data-mce-border,data-mce-border-color",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})}),d({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(t){var n;n=e.dom.getParent(e.selection.getStart(),"th,td"),e.dom.select("td[data-mce-selected],th[data-mce-selected]").length?t.merge():k.merge(t,n)},mceTableInsertRowBefore:function(e){e.insertRows(!0)},mceTableInsertRowAfter:function(e){e.insertRows()},mceTableInsertColBefore:function(e){e.insertCols(!0)},mceTableInsertColAfter:function(e){e.insertCols()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){w=e.cutRows()},mceTableCopyRow:function(e){w=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(w,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(w)},mceSplitColsBefore:function(e){e.splitCols(!0)},mceSplitColsAfter:function(e){e.splitCols(!1)},mceTableDelete:function(e){E&&E.clearBars(),e.deleteTable()}},function(t,n){e.addCommand(n,function(){var n=new i(e);n&&(t(n),e.execCommand("mceRepaint"),T.cellSelection.clear())})}),d({mceInsertTable:k.table,mceTableProps:function(){k.table(!0)},mceTableRowProps:k.row,mceTableCellProps:k.cell},function(t,n){e.addCommand(n,function(e,n){t(n)})}),v(),b(),!1!==e.settings.table_tab_navigation&&e.on("keydown",function(t){var n,r,a,c=e.selection.getStart();if(t.keyCode===o.TAB){if(e.dom.getParent(c,"LI,DT,DD"))return;(n=e.dom.getParent(c,"th,td"))&&(t.preventDefault(),r=new i(e),a=t.shiftKey?-1:1,e.undoManager.transact(function(){!r.moveRelIdx(n,a)&&a>0&&(r.insertRow(),r.refresh(),r.moveRelIdx(n,a))}))}}),T.insertTable=r,T.setClipboardRows=C,T.getClipboardRows=x}var d=r.each;return n.add("table",u),function(){}}),o("tinymce.plugins.table.Plugin")()}()}).call(window)},194:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o,s=function(e,t){a(e,[],function(){return t})};s("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.ui.Menu",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Menu")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),s("global!Array",Array),s("global!Error",Error),a("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),s("global!Object",Object),a("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},c=function(e){return e},l=function(){},s={fold:function(e,t){return e()},is:n,isSome:n,isNone:r,getOr:c,getOrThunk:a,getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},or:c,orThunk:a,map:o,ap:o,each:l,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},c=function(){return u},l=function(t){return a(t(e))},s=function(t){return t(e)},u={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:c,orThunk:c,map:l,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?u:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),s("global!String",String),a("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},c=function(e,t){return b(e,t).isSome()},l=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},u=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},d=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},f=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},m=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},p=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var c=e[i],l=t(c);l!==n&&(r.push(o),o=[]),n=l,o.push(c)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},C=t.prototype.push,w=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);C.apply(r,e[o])}return r},T=function(e,t){var n=u(e,t);return w(n)},k=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},E=function(e,t){return e.length===t.length&&k(e,function(e,n){return e===t[n]})},S=t.prototype.slice;return{map:u,each:d,eachr:f,partition:m,filter:p,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:w,bind:T,forall:k,exists:c,contains:a,equal:E,reverse:function(e){var t=S.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return p(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=S.call(e,0);return n.sort(t),n},range:l}}),a("tinymce.plugins.contextmenu.RangePoint",["ephox.katamari.api.Arr"],function(e){var t=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};return{isXYWithinRange:function(n,r,o){return!o.collapsed&&e.foldl(o.getClientRects(),function(e,o){return e||t(o,n,r)},!1)}}}),a("tinymce.plugins.contextmenu.Plugin",["tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.PluginManager","tinymce.core.ui.Menu","tinymce.core.util.Tools","tinymce.plugins.contextmenu.RangePoint"],function(e,t,n,r,o,i){var a=e.DOM;return n.add("contextmenu",function(e){var n,c,l=e.settings.contextmenu_never_use_native,s=function(e){return e.ctrlKey&&!l},u=function(){return t.mac&&t.webkit},d=function(){return!0===c},f=function(e){return e&&"IMG"===e.nodeName},m=function(e,t){return f(e.target)&&!1===i.isXYWithinRange(e.clientX,e.clientY,t)};return e.on("mousedown",function(t){u()&&2===t.button&&!s(t)&&e.selection.isCollapsed()&&e.once("contextmenu",function(t){f(t.target)||e.selection.placeCaretAt(t.clientX,t.clientY)})}),e.on("contextmenu",function(t){var i;if(!s(t)){if(m(t,e.selection.getRng())&&e.selection.select(t.target),t.preventDefault(),i=e.settings.contextmenu||"link openlink image inserttable | cell row column deletetable",n)n.show();else{var l=[];o.each(i.split(/[ ,]/),function(t){var n=e.menuItems[t];"|"==t&&(n={text:t}),n&&(n.shortcut="",l.push(n))});for(var u=0;u<l.length;u++)"|"==l[u].text&&(0!==u&&u!=l.length-1||l.splice(u,1));n=new r({items:l,context:"contextmenu",classes:"contextmenu"}).renderTo(),n.on("hide",function(e){e.control===this&&(c=!1)}),e.on("remove",function(){n.remove(),n=null})}var d={x:t.pageX,y:t.pageY};e.inline||(d=a.getPos(e.getContentAreaContainer()),d.x+=t.clientX,d.y+=t.clientY),n.moveTo(d.x,d.y),c=!0}}),{isContextMenuVisible:d}}),function(){}}),o("tinymce.plugins.contextmenu.Plugin")()}()}).call(window)},195:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.directionality.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools"],function(e,t){return e.add("directionality",function(e){function n(n){var r=e.dom,o,i=e.selection.getSelectedBlocks();i.length&&(o=r.getAttrib(i[0],"dir"),t.each(i,function(e){r.getParent(e.parentNode,"*[dir='"+n+"']",r.getRoot())||(o!=n?r.setAttrib(e,"dir",n):r.setAttrib(e,"dir",null))}),e.nodeChanged())}function r(e){var n=[];return t.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(t){n.push(t+"[dir="+e+"]")}),n.join(",")}e.addCommand("mceDirectionLTR",function(){n("ltr")}),e.addCommand("mceDirectionRTL",function(){n("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:r("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:r("rtl")})}),function(){}}),o("tinymce.plugins.directionality.Plugin")()}()}).call(window)},196:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.emoticons.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools"],function(e,t){return e.add("emoticons",function(e,n){function r(){var e;return e='<table role="list" class="mce-grid">',t.each(o,function(r){e+="<tr>",t.each(r,function(t){var r=n+"/img/smiley-"+t+".gif";e+='<td><a href="#" data-mce-url="'+r+'" data-mce-alt="'+t+'" tabindex="-1" role="option" aria-label="'+t+'"><img src="'+r+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),e+="</tr>"}),e+="</table>"}var o=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:r,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(e.insertContent('<img src="'+n.getAttribute("data-mce-url")+'" alt="'+n.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})}),function(){}}),o("tinymce.plugins.emoticons.Plugin")()}()}).call(window)},197:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.JSON",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.JSON")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),a("tinymce.plugins.template.Plugin",["tinymce.core.dom.DOMUtils","tinymce.core.PluginManager","tinymce.core.util.JSON","tinymce.core.util.Tools","tinymce.core.util.XHR"],function(e,t,n,r,o){return t.add("template",function(t){function i(e){return function(){var r=t.settings.templates;if("function"==typeof r)return void r(e);"string"==typeof r?o.send({url:r,success:function(t){e(n.parse(t))}}):e(r)}}function a(n){function i(e){function n(e){if(-1==e.indexOf("<html>")){var n="";r.each(t.contentCSS,function(e){n+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(e)+'">'});var o=t.settings.body_class||"";-1!=o.indexOf("=")&&(o=t.getParam("body_class","","hash"),o=o[t.id]||""),e="<!DOCTYPE html><html><head>"+n+'</head><body class="'+o+'">'+e+"</body></html>"}e=s(e,"template_preview_replace_values");var i=a.find("iframe")[0].getEl().contentWindow.document;i.open(),i.write(e),i.close()}var i=e.control.value();i.url?o.send({url:i.url,success:function(e){l=e,n(l)}}):(l=i.content,n(l)),a.find("#description")[0].text(e.control.value().description)}var a,c=[],l;if(!n||0===n.length){var d=t.translate("No templates defined.");return void t.notificationManager.open({text:d,type:"info"})}r.each(n,function(e){c.push({selected:!c.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})}),a=t.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:c,onselect:i}}]},{type:"label",name:"description",label:"Description",text:"\xa0"},{type:"iframe",flex:1,border:1}],onsubmit:function(){u(!1,l)},minWidth:Math.min(e.DOM.getViewPort().w,t.getParam("template_popup_width",600)),minHeight:Math.min(e.DOM.getViewPort().h,t.getParam("template_popup_height",500))}),a.find("listbox")[0].fire("select")}function c(e,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}var o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),c="January February March April May June July August September October November December".split(" ");return n=n||new Date,e=e.replace("%D","%m/%d/%Y"),e=e.replace("%r","%I:%M:%S %p"),e=e.replace("%Y",""+n.getFullYear()),e=e.replace("%y",""+n.getYear()),e=e.replace("%m",r(n.getMonth()+1,2)),e=e.replace("%d",r(n.getDate(),2)),e=e.replace("%H",""+r(n.getHours(),2)),e=e.replace("%M",""+r(n.getMinutes(),2)),e=e.replace("%S",""+r(n.getSeconds(),2)),e=e.replace("%I",""+((n.getHours()+11)%12+1)),e=e.replace("%p",n.getHours()<12?"AM":"PM"),e=e.replace("%B",""+t.translate(c[n.getMonth()])),e=e.replace("%b",""+t.translate(a[n.getMonth()])),e=e.replace("%A",""+t.translate(i[n.getDay()])),e=e.replace("%a",""+t.translate(o[n.getDay()])),e=e.replace("%%","%")}function l(e){var n=t.dom,o=t.getParam("template_replace_values");r.each(n.select("*",e),function(e){r.each(o,function(t,r){n.hasClass(e,r)&&"function"==typeof o[r]&&o[r](e)})})}function s(e,n){return r.each(t.getParam(n),function(t,n){"function"==typeof t&&(t=t(n)),e=e.replace(RegExp("\\{\\$"+n+"\\}","g"),t)}),e}function u(e,n){function o(e,t){return RegExp("\\b"+t+"\\b","g").test(e.className)}var i,a,u=t.dom,d=t.selection.getContent();n=s(n,"template_replace_values"),i=u.create("div",null,n),a=u.select(".mceTmpl",i),a&&a.length>0&&(i=u.create("div",null),i.appendChild(a[0].cloneNode(!0))),r.each(u.select("*",i),function(e){o(e,t.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(e.innerHTML=c(t.getParam("template_cdate_format",t.getLang("template.cdate_format")))),o(e,t.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=c(t.getParam("template_mdate_format",t.getLang("template.mdate_format")))),o(e,t.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(e.innerHTML=d)}),l(i),t.execCommand("mceInsertContent",!1,i.innerHTML),t.addVisual()}t.addCommand("mceInsertTemplate",u),t.addButton("template",{title:"Insert template",onclick:i(a)}),t.addMenuItem("template",{text:"Template",onclick:i(a),context:"insert"}),t.on("PreProcess",function(e){var n=t.dom;r.each(n.select("div",e.node),function(e){n.hasClass(e,"mceTmpl")&&(r.each(n.select("*",e),function(e){n.hasClass(e,t.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=c(t.getParam("template_mdate_format",t.getLang("template.mdate_format"))))}),l(e))})})}),function(){}}),o("tinymce.plugins.template.Plugin")()}()}).call(window)},198:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.textcolor.Plugin",["tinymce.core.dom.DOMUtils","tinymce.core.PluginManager","tinymce.core.util.I18n","tinymce.core.util.Tools"],function(e,t,n,r){var o=n.translate;return t.add("textcolor",function(t){function n(e){var n;return t.dom.getParents(t.selection.getStart(),function(t){var r;(r=t.style["forecolor"==e?"color":"background-color"])&&(n=r)}),n}function i(e){var n,r=[],o;for(o=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],o=t.settings.textcolor_map||o,o=t.settings[e+"_map"]||o,n=0;n<o.length;n+=2)r.push({text:o[n+1],color:"#"+o[n]});return r}function a(){function e(e,t){var n="transparent"==e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+p+"-"+g+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+o(t)+'">'+(n?"&#215;":"")+"</div></td>"}var n=this,r,a,c,l,s,u,m,p=n._id,g=0,h;for(h=n.settings.origin,r=i(h),r.push({text:o("No color"),color:"transparent"}),c='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',l=r.length-1,u=0;u<f[h];u++){for(c+="<tr>",s=0;s<d[h];s++)m=u*d[h]+s,m>l?c+="<td></td>":(a=r[m],c+=e(a.color,a.text));c+="</tr>"}if(t.settings.color_picker_callback){for(c+='<tr><td colspan="'+d[h]+'" class="mce-custom-color-btn"><div id="'+p+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+p+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+o("Custom...")+"</button></div></td></tr>",c+="<tr>",s=0;s<d[h];s++)c+=e("","Custom color");c+="</tr>"}return c+="</tbody></table>"}function c(e,n){t.undoManager.transact(function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()})}function l(e){t.undoManager.transact(function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()})}function s(o){function i(e){u.hidePanel(),u.color(e),c(u.settings.format,e)}function a(){u.hidePanel(),u.resetColor(),l(u.settings.format)}function s(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var u=this.parent(),f,m;m=u.settings.origin,e.DOM.getParent(o.target,".mce-custom-color-btn")&&(u.hidePanel(),t.settings.color_picker_callback.call(t,function(e){var t=u.panel.getEl().getElementsByTagName("table")[0],n,o,a;for(n=r.map(t.rows[t.rows.length-1].childNodes,function(e){return e.firstChild}),a=0;a<n.length&&(o=n[a],o.getAttribute("data-mce-color"));a++);if(a==d[m])for(a=0;a<d[m]-1;a++)s(n[a],n[a+1].getAttribute("data-mce-color"));s(o,e),i(e)},n(u.settings.format))),f=o.target.getAttribute("data-mce-color"),f?(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),o.target.setAttribute("aria-selected",!0),this.lastId=o.target.id,"transparent"==f?a():i(f)):null!==f&&u.hidePanel()}function u(){var e=this;e._color?c(e.settings.format,e._color):l(e.settings.format)}var d,f;f={forecolor:t.settings.forecolor_rows||t.settings.textcolor_rows||5,backcolor:t.settings.backcolor_rows||t.settings.textcolor_rows||5},d={forecolor:t.settings.forecolor_cols||t.settings.textcolor_cols||8,backcolor:t.settings.backcolor_cols||t.settings.textcolor_cols||8},t.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{origin:"forecolor",role:"application",ariaRemember:!0,html:a,onclick:s},onclick:u}),t.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{origin:"backcolor",role:"application",ariaRemember:!0,html:a,onclick:s},onclick:u})}),function(){}}),o("tinymce.plugins.textcolor.Plugin")()}()}).call(window)},199:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.JSON",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.JSON")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),a("tinymce.plugins.image.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.core.util.JSON","tinymce.core.util.Tools","tinymce.core.util.XHR"],function(e,t,n,r,o){return t.add("image",function(t){function i(e,t){function n(e,n){r.parentNode&&r.parentNode.removeChild(r),t({width:e,height:n})}var r=document.createElement("img");r.onload=function(){n(Math.max(r.width,r.clientWidth),Math.max(r.height,r.clientHeight))},r.onerror=function(){n()};var o=r.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left=0,o.width=o.height="auto",document.body.appendChild(r),r.src=e}function a(e,t,n){function o(e,n){return n=n||[],r.each(e,function(e){var r={text:e.text||e.title};e.menu?r.menu=o(e.menu):(r.value=e.value,t(r)),n.push(r)}),n}return o(e,n||[])}function c(e){return function(){var r=t.settings.image_list;"string"==typeof r?o.send({url:r,success:function(t){e(n.parse(t))}}):"function"==typeof r?r(e):e(r)}}function l(n){function o(){var e,t,n,r;e=p.find("#width")[0],t=p.find("#height")[0],e&&t&&(n=e.value(),r=t.value(),p.find("#constrain")[0].checked()&&b&&x&&n&&r&&(b!=n?(r=Math.round(n/b*r),isNaN(r)||t.value(r)):(n=Math.round(r/x*n),isNaN(n)||e.value(n))),b=n,x=r)}function c(){function e(e){function n(){e.onload=e.onerror=null,t.selection&&(t.selection.select(e),t.nodeChanged())}e.onload=function(){g.width||g.height||!T||h.setAttribs(e,{width:e.clientWidth,height:e.clientHeight}),n()},e.onerror=n}var n,i;f(),o(),g=r.extend(g,p.toJSON()),g.alt||(g.alt=""),g.title||(g.title=""),""===g.width&&(g.width=null),""===g.height&&(g.height=null),g.style||(g.style=null),g={src:g.src,alt:g.alt,title:g.title,width:g.width,height:g.height,style:g.style,caption:g.caption,class:g.class},t.undoManager.transact(function(){function r(e){return t.schema.getTextBlockElements()[e.nodeName]}if(!g.src)return void(v&&(h.remove(v),t.focus(),t.nodeChanged()));if(""===g.title&&(g.title=null),v?h.setAttribs(v,g):(g.id="__mcenew",t.focus(),t.selection.setContent(h.createHTML("img",g)),v=h.get("__mcenew"),h.setAttrib(v,"id",null)),t.editorUpload.uploadImagesAuto(),!1===g.caption&&h.is(v.parentNode,"figure.image")&&(n=v.parentNode,h.insertAfter(v,n),h.remove(n)),!0!==g.caption)e(v);else if(!h.is(v.parentNode,"figure.image")){i=v,v=v.cloneNode(!0),n=h.create("figure",{class:"image"}),n.appendChild(v),n.appendChild(h.create("figcaption",{contentEditable:!0},"Caption")),n.contentEditable=!1;var o=h.getParent(i,r);o?h.split(o,i,n):h.replace(n,i),t.selection.select(n)}})}function l(e){return e&&(e=e.replace(/px$/,"")),e}function s(e){var n,o,a,c=e.meta||{};C&&C.value(t.convertURL(this.value(),"src")),r.each(c,function(e,t){p.find("#"+t).value(e)}),c.width||c.height||(n=t.convertURL(this.value(),"src"),o=t.settings.image_prepend_url,a=RegExp("^(?:[a-z]+:)?//","i"),o&&!a.test(n)&&n.substring(0,o.length)!==o&&(n=o+n),this.value(n),i(t.documentBaseURI.toAbsolute(this.value()),function(e){e.width&&e.height&&T&&(b=e.width,x=e.height,p.find("#width").value(b),p.find("#height").value(x))}))}function u(e){e.meta=p.toJSON()}function d(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}function f(){function e(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e}if(t.settings.image_advtab){var n=p.toJSON(),r=h.parseStyle(n.style);r=d(r),n.vspace&&(r["margin-top"]=r["margin-bottom"]=e(n.vspace)),n.hspace&&(r["margin-left"]=r["margin-right"]=e(n.hspace)),n.border&&(r["border-width"]=e(n.border)),p.find("#style").value(h.serializeStyle(h.parseStyle(h.serializeStyle(r))))}}function m(){if(t.settings.image_advtab){var e=p.toJSON(),n=h.parseStyle(e.style);p.find("#vspace").value(""),p.find("#hspace").value(""),n=d(n),(n["margin-top"]&&n["margin-bottom"]||n["margin-right"]&&n["margin-left"])&&(n["margin-top"]===n["margin-bottom"]?p.find("#vspace").value(l(n["margin-top"])):p.find("#vspace").value(""),n["margin-right"]===n["margin-left"]?p.find("#hspace").value(l(n["margin-right"])):p.find("#hspace").value("")),n["border-width"]&&p.find("#border").value(l(n["border-width"])),p.find("#style").value(h.serializeStyle(h.parseStyle(h.serializeStyle(n))))}}var p,g={},h=t.dom,v,y,b,x,C,w,T=!1!==t.settings.image_dimensions;v=t.selection.getNode(),y=h.getParent(v,"figure.image"),y&&(v=h.select("img",y)[0]),v&&("IMG"!=v.nodeName||v.getAttribute("data-mce-object")||v.getAttribute("data-mce-placeholder"))&&(v=null),v&&(b=h.getAttrib(v,"width"),x=h.getAttrib(v,"height"),g={src:h.getAttrib(v,"src"),alt:h.getAttrib(v,"alt"),title:h.getAttrib(v,"title"),class:h.getAttrib(v,"class"),width:b,height:x,caption:!!y}),n&&(C={type:"listbox",label:"Image list",values:a(n,function(e){e.value=t.convertURL(e.value||e.url,"src")},[{text:"None",value:""}]),value:g.src&&t.convertURL(g.src,"src"),onselect:function(e){var t=p.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),p.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){C=this}}),t.settings.image_class_list&&(w={name:"class",type:"listbox",label:"Class",values:a(t.settings.image_class_list,function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"img",classes:[e.value]})})})});var k=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:s,onbeforecall:u},C];!1!==t.settings.image_description&&k.push({name:"alt",type:"textbox",label:"Image description"}),t.settings.image_title&&k.push({name:"title",type:"textbox",label:"Image Title"}),T&&k.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:o,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:o,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),k.push(w),t.settings.image_caption&&e.ceFalse&&k.push({name:"caption",type:"checkbox",label:"Caption"}),t.settings.image_advtab?(v&&(v.style.marginLeft&&v.style.marginRight&&v.style.marginLeft===v.style.marginRight&&(g.hspace=l(v.style.marginLeft)),v.style.marginTop&&v.style.marginBottom&&v.style.marginTop===v.style.marginBottom&&(g.vspace=l(v.style.marginTop)),v.style.borderWidth&&(g.border=l(v.style.borderWidth)),g.style=t.dom.serializeStyle(t.dom.parseStyle(t.dom.getAttrib(v,"style")))),p=t.windowManager.open({title:"Insert/edit image",data:g,bodyType:"tabpanel",body:[{title:"General",type:"form",items:k},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:m},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:f},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:c})):p=t.windowManager.open({title:"Insert/edit image",data:g,body:k,onSubmit:c})}t.on("preInit",function(){function e(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)}function n(t){return function(n){function o(e){e.attr("contenteditable",t?"true":null)}for(var i=n.length,a;i--;)a=n[i],e(a)&&(a.attr("contenteditable",t?"false":null),r.each(a.getAll("figcaption"),o))}}t.parser.addNodeFilter("figure",n(!0)),t.serializer.addNodeFilter("figure",n(!1))}),t.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:c(l),stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),t.addMenuItem("image",{icon:"image",text:"Image",onclick:c(l),context:"insert",prependToContext:!0}),t.addCommand("mceImage",c(l))}),function(){}}),o("tinymce.plugins.image.Plugin")()}()}).call(window)},200:function(e,t,n){(function(e){(function(){!function(){var t={},n=function(e){for(var t=i(e),n=e.split("."),r=Function("return this;")(),o=0;o<n.length-1;++o)void 0===r[n[o]]&&(r[n[o]]={}),r=r[n[o]];r[n[n.length-1]]=t},r=function(e){for(var n=t[e],r=n.deps,o=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=i(r[l]);var s=o.apply(null,c);if(void 0===s)throw"module ["+e+"] returned undefined";n.instance=s},o=function(e,n,r){if("string"!=typeof e)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+e;if(void 0===r)throw"no definition function for "+e;t[e]={deps:n,defn:r,instance:void 0}},i=function(e){var n=t[e];if(void 0===n)throw"module ["+e+"] was undefined";return void 0===n.instance&&r(e),n.instance},a=function(e,t){for(var n=e.length,r=Array(n),o=0;o<n;++o)r.push(i(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:o,require:a,demand:i}}};var c=o,l=a,s=i,u=function(e,t){c(e,[],function(){return t})};c("ephox.imagetools.util.Promise",[],function(){function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,t(o,this),t(i,this))}function r(e){var t=this;if(null===this._state)return void this._deferreds.push(e);s(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void l(t(n,e),t(o,this),t(i,this))}this._state=!0,this._value=e,a.call(this)}catch(e){i.call(this,e)}}function i(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;e<t;e++)r.call(this,this._deferreds[e]);this._deferreds=null}function c(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function l(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var s=n.immediateFn||"function"==typeof e&&e||function(e){setTimeout(e,1)},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var o=this;return new n(function(n,i){r.call(o,new c(e,t,n,i))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new n(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(e){r(i,e)},n)}e[i]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},n}),c("ephox.imagetools.util.Canvas",[],function(){function e(e,t){return o(document.createElement("canvas"),e,t)}function t(t){var r,o;return r=e(t.width,t.height),o=n(r),o.drawImage(t,0,0),r}function n(e){return e.getContext("2d")}function r(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}function o(e,t,n){return e.width=t,e.height=n,e}return{create:e,clone:t,resize:o,get2dContext:n,get3dContext:r}}),c("ephox.imagetools.util.Mime",[],function(){function e(e){var t=document.createElement("a");return t.href=e,t.pathname}function t(t){var n,r,o,i;return 0===t.indexOf("data:")?(t=t.split(","),i=/data:([^;]+)/.exec(t[0]),i?i[1]:""):(o={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"},n=e(t).split("."),r=n[n.length-1],r&&(r=r.toLowerCase()),o[r])}return{guessMimeType:t}}),c("ephox.imagetools.util.ImageSize",[],function(){function e(e){return e.naturalWidth||e.width}function t(e){return e.naturalHeight||e.height}return{getWidth:e,getHeight:t}}),c("ephox.imagetools.util.Conversions",["ephox.imagetools.util.Promise","ephox.imagetools.util.Canvas","ephox.imagetools.util.Mime","ephox.imagetools.util.ImageSize"],function(e,t,n,r){function o(t){return new e(function(e){function n(){t.removeEventListener("load",n),e(t)}t.complete?e(t):t.addEventListener("load",n)})}function i(e){return o(e).then(function(e){var n,o;return o=t.create(r.getWidth(e),r.getHeight(e)),n=t.get2dContext(o),n.drawImage(e,0,0),o})}function a(e){return o(e).then(function(e){var t=e.src;return 0===t.indexOf("blob:")?l(t):0===t.indexOf("data:")?u(t):i(e).then(function(e){return u(e.toDataURL(n.guessMimeType(t)))})})}function c(t){return new e(function(e){function n(){r.removeEventListener("load",n),e(r)}var r=new Image;r.addEventListener("load",n),r.src=URL.createObjectURL(t),r.complete&&n()})}function l(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200==this.status&&e(this.response)},n.send()})}function s(e){var t,n,r,o,i,a;if(e=e.split(","),o=/data:([^;]+)/.exec(e[0]),o&&(i=o[1]),t=atob(e[1]),window.WebKitBlobBuilder){for(a=new WebKitBlobBuilder,n=new ArrayBuffer(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return a.append(n),a.getBlob(i)}for(n=new Uint8Array(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:i})}function u(t){return new e(function(e){e(s(t))})}function d(e){return 0===e.indexOf("blob:")?l(e):0===e.indexOf("data:")?u(e):null}function f(t,n,r){return n=n||"image/png",HTMLCanvasElement.prototype.toBlob?new e(function(e){t.toBlob(function(t){e(t)},n,r)}):u(t.toDataURL(n,r))}function m(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}function p(e){return m(e).then(function(e){return e.split(",")[1]})}function g(e){URL.revokeObjectURL(e.src)}return{blobToImage:c,imageToBlob:a,blobToDataUri:m,blobToBase64:p,imageToCanvas:i,canvasToBlob:f,revokeImageUrl:g,uriToBlob:d,dataUriToBlobSync:s}}),c("ephox.imagetools.util.ImageResult",["ephox.imagetools.util.Promise","ephox.imagetools.util.Conversions","ephox.imagetools.util.Mime","ephox.imagetools.util.Canvas"],function(e,t,n,r){function o(e,n){function o(){return n}function i(r,o){return t.canvasToBlob(e,r||n,o)}function a(t,r){return e.toDataURL(t||n,r)}function c(e,t){return a(e,t).split(",")[1]}function l(){return r.clone(e)}return{getType:o,toBlob:i,toDataURL:a,toBase64:c,toCanvas:l}}function i(e){return t.blobToImage(e).then(function(e){var n=t.imageToCanvas(e);return t.revokeImageUrl(e),n}).then(function(t){return o(t,e.type)})}function a(t,n){return new e(function(e){e(o(t,n))})}function c(e){var r=n.guessMimeType(e.src);return t.imageToCanvas(e).then(function(e){return o(e,r)})}return{fromBlob:i,fromCanvas:a,fromImage:c}}),c("ephox.imagetools.api.BlobConversions",["ephox.imagetools.util.Conversions","ephox.imagetools.util.ImageResult"],function(e,t){return{blobToImage:function(t){return e.blobToImage(t)},imageToBlob:function(t){return e.imageToBlob(t)},blobToDataUri:function(t){return e.blobToDataUri(t)},blobToBase64:function(t){return e.blobToBase64(t)},blobToImageResult:function(e){return t.fromBlob(e)},dataUriToImageResult:function(n){return e.uriToBlob(n).then(t.fromBlob)},imageToImageResult:function(e){return t.fromImage(e)},imageResultToBlob:function(e,t,n){return e.toBlob(t,n)},imageResultToBlobSync:function(t,n,r){return e.dataUriToBlobSync(t.toDataURL(n,r))}}}),c("ephox.imagetools.transformations.ColorMatrix",[],function(){function e(e,t,n){return e=parseFloat(e),e>n?e=n:e<t&&(e=t),e}function t(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function n(e,t){var n,r,o,i,a=[],c=Array(10);for(n=0;n<5;n++){for(r=0;r<5;r++)a[r]=t[r+5*n];for(r=0;r<5;r++){for(i=0,o=0;o<5;o++)i+=e[r+5*o]*a[o];c[r+5*n]=i}}return c}function r(t,n){return n=e(n,0,1),t.map(function(t,r){return r%6==0?t=1-(1-t)*n:t*=n,e(t,0,1)})}function o(t,r){var o;return r=e(r,-1,1),r*=100,r<0?o=127+r/100*127:(o=r%1,o=0===o?d[r]:d[Math.floor(r)]*(1-o)+d[Math.floor(r)+1]*o,o=127*o+127),n(t,[o/127,0,0,0,.5*(127-o),0,o/127,0,0,.5*(127-o),0,0,o/127,0,.5*(127-o),0,0,0,1,0,0,0,0,0,1])}function i(t,r){var o,i,a,c;return r=e(r,-1,1),o=1+(r>0?3*r:r),i=.3086,a=.6094,c=.082,n(t,[i*(1-o)+o,a*(1-o),c*(1-o),0,0,i*(1-o),a*(1-o)+o,c*(1-o),0,0,i*(1-o),a*(1-o),c*(1-o)+o,0,0,0,0,0,1,0,0,0,0,0,1])}function a(t,r){var o,i,a,c,l;return r=e(r,-180,180)/180*Math.PI,o=Math.cos(r),i=Math.sin(r),a=.213,c=.715,l=.072,n(t,[a+o*(1-a)+i*-a,c+o*-c+i*-c,l+o*-l+i*(1-l),0,0,a+o*-a+.143*i,c+o*(1-c)+.14*i,l+o*-l+-.283*i,0,0,a+o*-a+i*-(1-a),c+o*-c+i*c,l+o*(1-l)+i*l,0,0,0,0,0,1,0,0,0,0,0,1])}function c(t,r){return r=e(255*r,-255,255),n(t,[1,0,0,0,r,0,1,0,0,r,0,0,1,0,r,0,0,0,1,0,0,0,0,0,1])}function l(t,r,o,i){return r=e(r,0,2),o=e(o,0,2),i=e(i,0,2),n(t,[r,0,0,0,0,0,o,0,0,0,0,0,i,0,0,0,0,0,1,0,0,0,0,0,1])}function s(t,o){return o=e(o,0,1),n(t,r([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],o))}function u(t,o){return o=e(o,0,1),n(t,r([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],o))}var d=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return{identity:t,adjust:r,multiply:n,adjustContrast:o,adjustBrightness:c,adjustSaturation:i,adjustHue:a,adjustColors:l,adjustSepia:s,adjustGrayscale:u}}),c("ephox.imagetools.transformations.Filters",["ephox.imagetools.util.Canvas","ephox.imagetools.util.ImageResult","ephox.imagetools.transformations.ColorMatrix"],function(e,t,n){function r(n,r){function o(e,t){var n=e.data,r,o,i,a,c,l=t[0],s=t[1],u=t[2],d=t[3],f=t[4],m=t[5],p=t[6],g=t[7],h=t[8],v=t[9],y=t[10],b=t[11],x=t[12],C=t[13],w=t[14],T=t[15],k=t[16],E=t[17],S=t[18],N=t[19];for(c=0;c<n.length;c+=4)r=n[c],o=n[c+1],i=n[c+2],a=n[c+3],n[c]=r*l+o*s+i*u+a*d+f,n[c+1]=r*m+o*p+i*g+a*h+v,n[c+2]=r*y+o*b+i*x+a*C+w,n[c+3]=r*T+o*k+i*E+a*S+N;return e}var i=n.toCanvas(),a=e.get2dContext(i),c;return c=o(a.getImageData(0,0,i.width,i.height),r),a.putImageData(c,0,0),t.fromCanvas(i,n.getType())}function o(n,r){function o(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}var o,i,a,c,l,s,u,d,f,m,p,g,h,v,y,b,x;for(a=Math.round(Math.sqrt(n.length)),c=Math.floor(a/2),o=e.data,i=t.data,b=e.width,x=e.height,s=0;s<x;s++)for(l=0;l<b;l++){for(u=d=f=0,p=0;p<a;p++)for(m=0;m<a;m++)g=r(l+m-c,0,b-1),h=r(s+p-c,0,x-1),v=4*(h*b+g),y=n[p*a+m],u+=o[v]*y,d+=o[v+1]*y,f+=o[v+2]*y;v=4*(s*b+l),i[v]=r(u,0,255),i[v+1]=r(d,0,255),i[v+2]=r(f,0,255)}return t}var i=n.toCanvas(),a=e.get2dContext(i),c,l;return c=a.getImageData(0,0,i.width,i.height),l=a.getImageData(0,0,i.width,i.height),l=o(c,l,r),a.putImageData(l,0,0),t.fromCanvas(i,n.getType())}function i(n){return function(r,o){function i(e,t){var n=e.data,r;for(r=0;r<n.length;r+=4)n[r]=t[n[r]],n[r+1]=t[n[r+1]],n[r+2]=t[n[r+2]];return e}var a=r.toCanvas(),c=e.get2dContext(a),l,s,u=Array(256);for(s=0;s<u.length;s++)u[s]=n(s,o);return l=i(c.getImageData(0,0,a.width,a.height),u),c.putImageData(l,0,0),t.fromCanvas(a,r.getType())}}function a(e){return function(t,o){return r(t,e(n.identity(),o))}}function c(e){return function(t){return r(t,e)}}function l(e){return function(t){return o(t,e)}}return{invert:c([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:a(n.adjustBrightness),hue:a(n.adjustHue),saturate:a(n.adjustSaturation),contrast:a(n.adjustContrast),grayscale:a(n.adjustGrayscale),sepia:a(n.adjustSepia),colorize:function(e,t,o,i){return r(e,n.adjustColors(n.identity(),t,o,i))},sharpen:l([0,-1,0,-1,5,-1,0,-1,0]),emboss:l([-2,-1,0,-1,1,1,0,1,2]),gamma:i(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:i(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:r,convoluteFilter:o}}),c("ephox.imagetools.transformations.ImageResizerCanvas",["ephox.imagetools.util.Promise","ephox.imagetools.util.Conversions","ephox.imagetools.util.Canvas","ephox.imagetools.util.ImageSize"],function(e,t,n,r){function o(e,t,n){var a=r.getWidth(e),c=r.getHeight(e),l=t/a,s=n/c,u=!1;(l<.5||l>2)&&(l=l<.5?.5:2,u=!0),(s<.5||s>2)&&(s=s<.5?.5:2,u=!0);var d=i(e,l,s);return u?d.then(function(e){return o(e,t,n)}):d}function i(t,o,i){return new e(function(e){var a=r.getWidth(t),c=r.getHeight(t),l=Math.floor(a*o),s=Math.floor(c*i),u=n.create(l,s);n.get2dContext(u).drawImage(t,0,0,a,c,0,0,l,s),e(u)})}return{scale:o}}),c("ephox.imagetools.transformations.ImageTools",["ephox.imagetools.util.Canvas","ephox.imagetools.util.ImageResult","ephox.imagetools.transformations.ImageResizerCanvas"],function(e,t,n){function r(n,r){var o=n.toCanvas(),i=e.create(o.width,o.height),a=e.get2dContext(i),c=0,l=0;return r=r<0?360+r:r,90!=r&&270!=r||e.resize(i,i.height,i.width),90!=r&&180!=r||(c=i.width),270!=r&&180!=r||(l=i.height),a.translate(c,l),a.rotate(r*Math.PI/180),a.drawImage(o,0,0),t.fromCanvas(i,n.getType())}function o(n,r){var o=n.toCanvas(),i=e.create(o.width,o.height),a=e.get2dContext(i);return"v"==r?(a.scale(1,-1),a.drawImage(o,0,-i.height)):(a.scale(-1,1),a.drawImage(o,-i.width,0)),t.fromCanvas(i,n.getType())}function i(n,r,o,i,a){var c=n.toCanvas(),l=e.create(i,a);return e.get2dContext(l).drawImage(c,-r,-o),t.fromCanvas(l,n.getType())}function a(e,r,o){return n.scale(e.toCanvas(),r,o).then(function(n){return t.fromCanvas(n,e.getType())})}return{rotate:r,flip:o,crop:i,resize:a}}),c("ephox.imagetools.api.ImageTransformations",["ephox.imagetools.transformations.Filters","ephox.imagetools.transformations.ImageTools"],function(e,t){var n=function(t){return e.invert(t)},r=function(t){return e.sharpen(t)},o=function(t){return e.emboss(t)},i=function(t,n){return e.gamma(t,n)},a=function(t,n){return e.exposure(t,n)},c=function(t,n,r,o){return e.colorize(t,n,r,o)};return{invert:n,sharpen:r,emboss:o,brightness:function(t,n){return e.brightness(t,n)},hue:function(t,n){return e.hue(t,n)},saturate:function(t,n){return e.saturate(t,n)},contrast:function(t,n){return e.contrast(t,n)},grayscale:function(t,n){return e.grayscale(t,n)},sepia:function(t,n){return e.sepia(t,n)},colorize:c,gamma:i,exposure:a,flip:function(e,n){return t.flip(e,n)},crop:function(e,n,r,o,i){return t.crop(e,n,r,o,i)},resize:function(e,n,r){return t.resize(e,n,r)},rotate:function(e,n){return t.rotate(e,n)}}}),u("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),c("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),c("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),c("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),c("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")}),c("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),c("tinymce.core.util.URI",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.URI")}),c("tinymce.plugins.imagetools.core.ImageSize",[],function(){function e(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n,r;return n=e.style.width,r=e.style.height,n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function t(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))}function n(e){return{w:e.naturalWidth,h:e.naturalHeight}}return{getImageSize:e,setImageSize:t,getNaturalImageSize:n}}),u("global!Array",Array),u("global!Error",Error),c("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),u("global!Object",Object),c("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},c=function(e){return e},l=function(){},s={fold:function(e,t){return e()},is:n,isSome:n,isNone:r,getOr:c,getOrThunk:a,getOrDie:function(e){throw Error(e||"error: getOrDie called on none.")},or:c,orThunk:a,map:o,ap:o,each:l,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},c=function(){return u},l=function(t){return a(t(e))},s=function(t){return t(e)},u={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:c,orThunk:c,map:l,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?u:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return u};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),u("global!String",String),c("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},c=function(e,t){return b(e,t).isSome()},l=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},u=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},d=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},f=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},m=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},p=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var c=e[i],l=t(c);l!==n&&(r.push(o),o=[]),n=l,o.push(c)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},C=t.prototype.push,w=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);C.apply(r,e[o])}return r},T=function(e,t){var n=u(e,t);return w(n)},k=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},E=function(e,t){return e.length===t.length&&k(e,function(e,n){return e===t[n]})},S=t.prototype.slice;return{map:u,each:d,eachr:f,partition:m,filter:p,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:w,bind:T,forall:k,exists:c,contains:a,equal:E,reverse:function(e){var t=S.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return p(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=S.call(e,0);return n.sort(t),n},range:l}}),c("tinymce.plugins.imagetools.core.Utils",["tinymce.core.util.Promise","tinymce.core.util.Tools"],function(e,t){var n=function(e){return null!==e&&void 0!==e},r=function(e,t){var r;return r=t.reduce(function(e,t){return n(e)?e[t]:void 0},e),n(r)?r:null},o=function(n,r){return new e(function(e){var o;o=new XMLHttpRequest,o.onreadystatechange=function(){4===o.readyState&&e({status:o.status,blob:this.response})},o.open("GET",n,!0),t.each(r,function(e,t){o.setRequestHeader(t,e)}),o.responseType="blob",o.send()})};return{traverse:r,readBlob:function(t){return new e(function(e){var n=new FileReader;n.onload=function(t){var n=t.target;e(n.result)},n.readAsText(t)})},requestUrlAsBlob:o,parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}}}),c("tinymce.plugins.imagetools.core.Errors",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","tinymce.core.util.Promise","tinymce.plugins.imagetools.core.Utils"],function(e,t,n,r){var o=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],i=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],a=function(e){return 400===e||403===e||500===e},c=function(n){return"ImageProxy HTTP error: "+e.find(o,function(e){return n===e.code}).fold(t.constant("Unknown ImageProxy error"),function(e){return e.message})},l=function(e){var t=c(e);return n.reject(t)},s=function(n){return e.find(i,function(e){return e.type===n}).fold(t.constant("Unknown service error"),function(e){return e.message})},u=function(e){var t=r.parseJson(e),n=r.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?s(n):"Invalid JSON in service error message")},d=function(e,t){return r.readBlob(t).then(function(e){var t=u(e);return n.reject(t)})};return{handleServiceErrorResponse:function(e,t){return a(e)?d(e,t):l(e)},handleHttpError:l,getHttpErrorMsg:c,getServiceErrorMsg:s}}),c("tinymce.plugins.imagetools.core.Proxy",["tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.plugins.imagetools.core.Errors","tinymce.plugins.imagetools.core.Utils"],function(e,t,n,r){function o(t){return r.requestUrlAsBlob(t,{}).then(function(t){return t.status<200||t.status>=300?n.handleHttpError(t.status):e.resolve(t.blob)})}var i=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)},a=function(t,o){return r.requestUrlAsBlob(i(t,o),{"Content-Type":"application/json;charset=UTF-8","tiny-api-key":o}).then(function(t){return t.status<200||t.status>=300?n.handleServiceErrorResponse(t.status,t.blob):e.resolve(t.blob)})};return{getUrl:function(e,t){return t?a(e,t):o(e)}}}),c("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),c("tinymce.core.ui.Container",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Container")}),c("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),c("tinymce.core.ui.Form",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Form")}),c("tinymce.core.geom.Rect",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.geom.Rect")}),c("tinymce.core.ui.Control",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Control")}),c("tinymce.core.ui.DragHelper",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.DragHelper")}),c("tinymce.core.dom.DomQuery",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DomQuery")}),c("tinymce.core.util.Observable",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Observable")}),c("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),c("tinymce.plugins.imagetools.ui.CropRect",["tinymce.core.dom.DomQuery","tinymce.core.ui.DragHelper","tinymce.core.geom.Rect","tinymce.core.util.Tools","tinymce.core.util.Observable","tinymce.core.util.VK"],function(e,t,n,r,o,i){var a=0;return function(c,l,s,u,d){function f(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function m(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function p(){return m(s,c)}function g(e,t,r,o){var i,a,l,u,d;i=t.x,a=t.y,l=t.w,u=t.h,i+=r*e.deltaX,a+=o*e.deltaY,l+=r*e.deltaW,u+=o*e.deltaH,l<20&&(l=20),u<20&&(u=20),d=c=n.clamp({x:i,y:a,w:l,h:u},s,"move"==e.name),d=m(s,d),k.fire("updateRect",{rect:d}),C(d)}function h(){function n(e){var n;return new t(A,{document:u.ownerDocument,handle:A+"-"+e.name,start:function(){n=c},drag:function(t){g(e,n,t.deltaX,t.deltaY)}})}e('<div id="'+A+'" class="'+R+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(u),r.each(N,function(t){e("#"+A,u).append('<div id="'+A+"-"+t+'"class="'+R+'croprect-block" style="display: none" data-mce-bogus="all">')}),r.each(E,function(t){e("#"+A,u).append('<div id="'+A+"-"+t.name+'" class="'+R+"croprect-handle "+R+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false">')}),S=r.map(E,n),y(c),e(u).on("focusin focusout",function(t){e(t.target).attr("aria-grabbed","focus"===t.type)}),e(u).on("keydown",function(e){function t(e,t,r,o,i){e.stopPropagation(),e.preventDefault(),g(n,r,o,i)}var n;switch(r.each(E,function(t){if(e.target.id==A+"-"+t.name)return n=t,!1}),e.keyCode){case i.LEFT:t(e,n,c,-10,0);break;case i.RIGHT:t(e,n,c,10,0);break;case i.UP:t(e,n,c,0,-10);break;case i.DOWN:t(e,n,c,0,10);break;case i.ENTER:case i.SPACEBAR:e.preventDefault(),d()}})}function v(t){var n;n=r.map(E,function(e){return"#"+A+"-"+e.name}).concat(r.map(N,function(e){return"#"+A+"-"+e})).join(","),t?e(n,u).show():e(n,u).hide()}function y(t){function n(t,n){n.h<0&&(n.h=0),n.w<0&&(n.w=0),e("#"+A+"-"+t,u).css({left:n.x,top:n.y,width:n.w,height:n.h})}r.each(E,function(n){e("#"+A+"-"+n.name,u).css({left:t.w*n.xMul+t.x,top:t.h*n.yMul+t.y})}),n("top",{x:l.x,y:l.y,w:l.w,h:t.y-l.y}),n("right",{x:t.x+t.w,y:t.y,w:l.w-t.x-t.w+l.x,h:t.h}),n("bottom",{x:l.x,y:t.y+t.h,w:l.w,h:l.h-t.y-t.h+l.y}),n("left",{x:l.x,y:t.y,w:t.x-l.x,h:t.h}),n("move",t)}function b(e){c=e,y(c)}function x(e){l=e,y(c)}function C(e){b(f(s,e))}function w(e){s=e,y(c)}function T(){r.each(S,function(e){e.destroy()}),S=[]}var k,E,S,N,R="mce-",A=R+"crid-"+a++;return E=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],N=["top","right","bottom","left"],h(u),k=r.extend({toggleVisibility:v,setClampRect:w,setRect:b,getInnerRect:p,setInnerRect:C,setViewPortRect:x,destroy:T},o)}}),c("tinymce.plugins.imagetools.ui.ImagePanel",["tinymce.core.geom.Rect","tinymce.core.ui.Control","tinymce.core.ui.DragHelper","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.plugins.imagetools.ui.CropRect"],function(e,t,n,r,o,i){function a(e){return new r(function(t){function n(){e.removeEventListener("load",n),t(e)}e.complete?t(e):e.addEventListener("load",n)})}return t.extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(t){var n=this,r=new Image;r.src=t,a(r).then(function(){var t,o,i=n.state.get("viewRect");if(o=n.$el.find("img"),o[0])o.replaceWith(r);else{var a=document.createElement("div");a.className="mce-imagepanel-bg",n.getEl().appendChild(a),n.getEl().appendChild(r)}t={x:0,y:0,w:r.naturalWidth,h:r.naturalHeight},n.state.set("viewRect",t),n.state.set("rect",e.inflate(t,-20,-20)),i&&i.w==t.w&&i.h==t.h||n.zoomFit(),n.repaintImage(),n.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e=this,t,n,r,o,i,a,c;c=10,t=e.$el.find("img"),n=e.getEl().clientWidth,r=e.getEl().clientHeight,o=t[0].naturalWidth,i=t[0].naturalHeight,a=Math.min((n-c)/o,(r-c)/i),a>=1&&(a=1),e.zoom(a)},repaintImage:function(){var e,t,n,r,o,i,a,c,l,s,u;u=this.getEl(),l=this.zoom(),s=this.state.get("rect"),a=this.$el.find("img"),c=this.$el.find(".mce-imagepanel-bg"),o=u.offsetWidth,i=u.offsetHeight,n=a[0].naturalWidth*l,r=a[0].naturalHeight*l,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),c.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:s.x*l+e,y:s.y*l+t,w:s.w*l,h:s.h*l}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){function e(e){t.cropRect=new i(e,t.state.get("viewRect"),t.state.get("viewRect"),t.getEl(),function(){t.fire("crop")}),t.cropRect.on("updateRect",function(e){var n=e.rect,r=t.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},t.state.set("rect",n)}),t.on("remove",t.cropRect.destroy)}var t=this;t.state.on("change:cropEnabled",function(e){t.cropRect.toggleVisibility(e.value),t.repaintImage()}),t.state.on("change:zoom",function(){t.repaintImage()}),t.state.on("change:rect",function(n){var r=n.value;t.cropRect||e(r),t.cropRect.setRect(r)})}})}),c("tinymce.plugins.imagetools.core.UndoStack",[],function(){return function(){function e(e){var t;return t=i.splice(++a),i.push(e),{state:e,removed:t}}function t(){if(r())return i[--a]}function n(){if(o())return i[++a]}function r(){return a>0}function o(){return-1!=a&&a<i.length-1}var i=[],a=-1;return{data:i,add:e,undo:t,redo:n,canUndo:r,canRedo:o}}}),c("tinymce.plugins.imagetools.ui.Dialog",["ephox.imagetools.api.BlobConversions","ephox.imagetools.api.ImageTransformations","tinymce.core.dom.DOMUtils","tinymce.core.ui.Container","tinymce.core.ui.Factory","tinymce.core.ui.Form","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.plugins.imagetools.ui.ImagePanel","tinymce.plugins.imagetools.core.UndoStack"],function(e,t,n,r,o,i,a,c,l,s){function u(e){return{blob:e,url:URL.createObjectURL(e)}}function d(e){e&&URL.revokeObjectURL(e.url)}function f(e){c.each(e,d)}function m(a,m,p){function g(e){var t,n,r,o;t=F.find("#w")[0],n=F.find("#h")[0],r=parseInt(t.value(),10),o=parseInt(n.value(),10),F.find("#constrain")[0].checked()&&le&&se&&r&&o&&("w"==e.control.settings.name?(o=Math.round(r*ue),n.value(o)):(r=Math.round(o*de),t.value(r))),le=r,se=o}function h(e){return Math.round(100*e)+"%"}function v(){F.find("#undo").disabled(!H.canUndo()),F.find("#redo").disabled(!H.canRedo()),F.statusbar.find("#save").disabled(!H.canUndo())}function y(){F.find("#undo").disabled(!0),F.find("#redo").disabled(!0)}function b(e){e&&$.imageSrc(e.url)}function x(e){return function(){var t=c.grep(ce,function(t){return t.settings.name!=e});c.each(t,function(e){e.hide()}),e.show(),e.focus()}}function C(e){W=u(e),b(W)}function w(e){a=u(e),b(a),f(H.add(a).removed),v()}function T(){var n=$.selection();e.blobToImageResult(a.blob).then(function(e){t.crop(e,n.x,n.y,n.w,n.h).then(fe).then(function(e){w(e),S()})})}function k(t){var n=[].slice.call(arguments,1);return function(){var r=W||a;e.blobToImageResult(r.blob).then(function(e){t.apply(this,[e].concat(n)).then(fe).then(C)})}}function E(t){var n=[].slice.call(arguments,1);return function(){e.blobToImageResult(a.blob).then(function(e){t.apply(this,[e].concat(n)).then(fe).then(w)})}}function S(){b(a),d(W),x(U)(),v()}function N(){W&&(w(W.blob),S())}function R(){var e=$.zoom();e<2&&(e+=.1),$.zoom(e)}function A(){var e=$.zoom();e>.1&&(e-=.1),$.zoom(e)}function _(){a=H.undo(),b(a),v()}function B(){a=H.redo(),b(a),v()}function P(){m(a.blob),F.close()}function D(e){return new i({layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function M(t,n){return D([{text:"Back",onclick:S},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){y(),e.blobToImageResult(a.blob).then(function(e){return n(e)}).then(fe).then(function(e){var t=u(e);b(t),d(W),W=t})})}function I(t,n,r,o,i){function c(t){e.blobToImageResult(a.blob).then(function(e){return n(e,t)}).then(fe).then(function(e){var t=u(e);b(t),d(W),W=t})}return D([{text:"Back",onclick:S},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){c(e.value)},minValue:o,maxValue:i,value:r,previewFilter:h},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){this.find("slider").value(r),y()})}function O(t,n){function r(){var t,r,o;t=F.find("#r")[0].value(),r=F.find("#g")[0].value(),o=F.find("#b")[0].value(),e.blobToImageResult(a.blob).then(function(e){return n(e,t,r,o)}).then(fe).then(function(e){var t=u(e);b(t),d(W),W=t})}return D([{text:"Back",onclick:S},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:h},{type:"slider",label:"G",name:"g",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:h},{type:"slider",label:"B",name:"b",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:h},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){F.find("#r,#g,#b").value(1),y()})}function L(e){!0===e.control.value()&&(ue=se/le,de=le/se)}var F,H=new s,U,z,W,V,j,q,$,K,Y,X,G,J,Q,Z,ee,te,ne,re,oe,ie,ae,ce,le,se,ue,de,fe=function(e){return e.toBlob()};V=D([{text:"Back",onclick:S},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:T}]).hide().on("show hide",function(e){$.toggleCropRect("show"==e.type)}).on("show",y),j=D([{text:"Back",onclick:S},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:g},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:g},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:L},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}]).hide().on("submit",function(e){var n=parseInt(F.find("#w").value(),10),r=parseInt(F.find("#h").value(),10);e.preventDefault(),E(t.resize,n,r)(),S()}).on("show",y),q=D([{text:"Back",onclick:S},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:k(t.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:k(t.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:k(t.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:k(t.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",y),X=M("Invert",t.invert),re=M("Sharpen",t.sharpen),oe=M("Emboss",t.emboss),G=I("Brightness",t.brightness,0,-1,1),J=I("Hue",t.hue,180,0,360),Q=I("Saturate",t.saturate,0,-1,1),Z=I("Contrast",t.contrast,0,-1,1),ee=I("Grayscale",t.grayscale,0,0,1),te=I("Sepia",t.sepia,0,0,1),ne=O("Colorize",t.colorize),ie=I("Gamma",t.gamma,0,-1,1),ae=I("Exposure",t.exposure,1,0,2),z=D([{text:"Back",onclick:S},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:x(J)},{text:"saturate",icon:"saturate",onclick:x(Q)},{text:"sepia",icon:"sepia",onclick:x(te)},{text:"emboss",icon:"emboss",onclick:x(oe)},{text:"exposure",icon:"exposure",onclick:x(ae)},{type:"spacer",flex:1}]).hide(),U=D([{tooltip:"Crop",icon:"crop",onclick:x(V)},{tooltip:"Resize",icon:"resize2",onclick:x(j)},{tooltip:"Orientation",icon:"orientation",onclick:x(q)},{tooltip:"Brightness",icon:"sun",onclick:x(G)},{tooltip:"Sharpen",icon:"sharpen",onclick:x(re)},{tooltip:"Contrast",icon:"contrast",onclick:x(Z)},{tooltip:"Color levels",icon:"drop",onclick:x(ne)},{tooltip:"Gamma",icon:"gamma",onclick:x(ie)},{tooltip:"Invert",icon:"invert",onclick:x(X)}]),$=new l({flex:1,imageSrc:a.url}),K=new r({layout:"flex",direction:"column",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:_},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:B},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:R},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:A}]}),Y=new r({type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:[K,$]}),ce=[U,V,j,q,z,X,G,J,Q,Z,ee,te,ne,re,oe,ie,ae],F=o.create("window",{layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(n.DOM.getViewPort().w,800),minHeight:Math.min(n.DOM.getViewPort().h,650),title:"Edit image",items:ce.concat([Y]),buttons:[{text:"Save",name:"save",subtype:"primary",onclick:P},{text:"Cancel",onclick:"close"}]}),F.renderTo(document.body).reflow(),F.on("close",function(){p(),f(H.data),H=null,W=null}),H.add(a),v(),$.on("load",function(){le=$.imageSize().w,se=$.imageSize().h,ue=se/le,de=le/se,F.find("#w").value(le),F.find("#h").value(se)}),$.on("crop",T)}function p(e){return new a(function(t,n){return e.toBlob().then(function(e){m(u(e),t,n)})})}return{edit:p}}),c("tinymce.plugins.imagetools.Plugin",["ephox.imagetools.api.BlobConversions","ephox.imagetools.api.ImageTransformations","tinymce.core.Env","tinymce.core.PluginManager","tinymce.core.util.Delay","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.plugins.imagetools.core.ImageSize","tinymce.plugins.imagetools.core.Proxy","tinymce.plugins.imagetools.ui.Dialog"],function(e,t,n,r,o,i,a,c,l,s,u){var d=function(r){function d(e){r.notificationManager.open({text:e,type:"error"})}function f(){return r.selection.getNode()}function m(e){var t=e.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return t?r.dom.encode(t[1]):null}function p(){return"imagetools"+B++}function g(e){var t=e.src;return 0===t.indexOf("data:")||0===t.indexOf("blob:")||new c(t).host===r.documentBaseURI.host}function h(e){return-1!==a.inArray(r.settings.imagetools_cors_hosts,new c(e.src).host)}function v(){return r.settings.api_key||r.settings.imagetools_api_key}function y(t){var n=t.src,o;return h(t)?s.getUrl(t.src,null):g(t)?e.imageToBlob(t):(n=r.settings.imagetools_proxy,n+=(-1===n.indexOf("?")?"?":"&")+"url="+encodeURIComponent(t.src),o=v(),s.getUrl(n,o))}function b(){var e;return e=r.editorUpload.blobCache.getByUri(f().src),e?i.resolve(e.blob()):y(f())}function x(){P=o.setEditorTimeout(r,function(){r.editorUpload.uploadImagesAuto()},r.settings.images_upload_timeout||3e4)}function C(){clearTimeout(P)}function w(e,t){return e.toBlob().then(function(n){var o,i,a,c,l;return a=r.editorUpload.blobCache,l=f(),o=l.src,r.settings.images_reuse_filename&&(c=a.getByUri(o),c?(o=c.uri(),i=c.name()):i=m(o)),c=a.create({id:p(),blob:n,base64:e.toBase64(),uri:o,name:i}),a.add(c),r.undoManager.transact(function(){function e(){r.$(l).off("load",e),r.nodeChanged(),t?r.editorUpload.uploadImagesAuto():(C(),x())}r.$(l).on("load",e),r.$(l).attr({src:c.blobUri()}).removeAttr("data-mce-src")}),c})}function T(t){return function(){return r._scanForImages().then(b).then(e.blobToImageResult).then(t).then(w,d)}}function k(e){return function(){return T(function(n){var r=l.getImageSize(f());return r&&l.setImageSize(f(),{w:r.h,h:r.w}),t.rotate(n,e)})()}}function E(e){return function(){return T(function(n){return t.flip(n,e)})()}}function S(){var t=f(),n=l.getNaturalImageSize(t),r=function(r){return new i(function(o){e.blobToImage(r).then(function(e){var i=l.getNaturalImageSize(e);n.w==i.w&&n.h==i.h||l.getImageSize(t)&&l.setImageSize(t,i),URL.revokeObjectURL(e.src),o(r)})})},o=function(t){return u.edit(t).then(r).then(e.blobToImageResult).then(function(e){return w(e,!0)},function(){})};b().then(e.blobToImageResult).then(o,d)}function N(){r.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),r.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),r.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),r.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),r.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),r.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})}function R(){r.on("NodeChange",function(e){D&&D.src!=e.element.src&&(C(),r.editorUpload.uploadImagesAuto(),D=void 0),A(e.element)&&(D=e.element)})}function A(e){return r.dom.is(e,"img:not([data-mce-object],[data-mce-placeholder])")&&(g(e)||h(e)||r.settings.imagetools_proxy)}function _(){var e=r.settings.imagetools_toolbar;e||(e="rotateleft rotateright | flipv fliph | crop editimage imageoptions"),r.addContextToolbar(A,e)}var B=0,P,D;n.fileApi&&(a.each({mceImageRotateLeft:k(-90),mceImageRotateRight:k(90),mceImageFlipVertical:E("v"),mceImageFlipHorizontal:E("h"),mceEditImage:S},function(e,t){r.addCommand(t,e)}),N(),_(),R())};return r.add("imagetools",d),function(){}}),i("tinymce.plugins.imagetools.Plugin")()}()}).call(window)}).call(t,n(49).setImmediate)},201:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.util.Color",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Color")}),a("tinymce.plugins.colorpicker.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Color"],function(e,t){return e.add("colorpicker",function(e){function n(n,r){function o(e){var n=new t(e),r=n.toRgb();a.fromJSON({r:r.r,g:r.g,b:r.b,hex:n.toHex().substr(1)}),i(n.toHex())}function i(e){a.find("#preview")[0].getEl().style.background=e}var a=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:r,onchange:function(){var e=this.rgb();a&&(a.find("#r").value(e.r),a.find("#g").value(e.g),a.find("#b").value(e.b),a.find("#hex").value(this.value().substr(1)),i(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e=a.find("colorpicker")[0],t,n;if(t=this.name(),n=this.value(),"hex"==t)return n="#"+n,o(n),void e.value(n);n={r:a.find("#r").value(),g:a.find("#g").value(),b:a.find("#b").value()},e.value(n),o(n)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){n("#"+this.toJSON().hex)}});o(r)}e.settings.color_picker_callback||(e.settings.color_picker_callback=n)}),function(){}}),o("tinymce.plugins.colorpicker.Plugin")()}()}).call(window)},202:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o;(function(e,t){a(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),a("tinymce.plugins.paste.core.InternalHtml",[],function(){var e="x-tinymce/html",t="\x3c!-- x-tinymce/html --\x3e";return{mark:function(e){return t+e},unmark:function(e){return e.replace(t,"")},isMarked:function(e){return-1!==e.indexOf(t)},internalHtmlMime:function(){return"x-tinymce/html"}}}),a("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),a("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),a("tinymce.plugins.paste.core.Utils",["tinymce.core.util.Tools","tinymce.core.html.DomParser","tinymce.core.html.Schema"],function(e,t,n){function r(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function o(o){function i(e){var t=e.name,n=e;if("br"===t)return void(l+="\n");if(s[t]&&(l+=" "),u[t])return void(l+=" ");if(3==e.type&&(l+=e.value),!e.shortEnded&&(e=e.firstChild))do{i(e)}while(e=e.next);d[t]&&n.next&&(l+="\n","p"==t&&(l+="\n"))}var a=new n,c=new t({},a),l="",s=a.getShortEndedElements(),u=e.makeMap("script noscript style textarea video audio iframe object"," "),d=a.getBlockElements();return o=r(o,[/<!\[[^\]]+\]>/g]),i(c.parse(o)),l}function i(e){function t(e,t,n){return t||n?"\xa0":" "}return e=r(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function a(e){var t=0;return function(){return e+t++}}return{filter:r,innerText:o,trimHtml:i,createIdGenerator:a,isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}}}),a("tinymce.plugins.paste.core.CutCopy",["tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n){var r=function(){},o=function(t){return!1===e.iOS&&void 0!==t&&"function"==typeof t.setData&&!0!==n.isMsEdge()},i=function(e,n,r){if(!o(e))return!1;try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",r),e.setData(t.internalHtmlMime(),n),!0}catch(e){return!1}},a=function(e,t,n,r){i(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},c=function(e){return function(n,r){var o=t.mark(n),i=e.dom.create("div",{contenteditable:"false"}),a=e.dom.create("div",{contenteditable:"true"},o);e.dom.setStyles(i,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"}),i.appendChild(a),e.dom.add(e.getBody(),i);var c=e.selection.getRng();a.focus();var l=e.dom.createRng();l.selectNodeContents(a),e.selection.setRng(l),setTimeout(function(){i.parentNode.removeChild(i),e.selection.setRng(c),r()},0)}},l=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},s=function(e){return function(t){!1===e.selection.isCollapsed()&&a(t,l(e),c(e),function(){e.execCommand("Delete")})}},u=function(e){return function(t){!1===e.selection.isCollapsed()&&a(t,l(e),c(e),r)}};return{register:function(e){e.on("cut",s(e)),e.on("copy",u(e))}}}),a("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Entities")}),a("tinymce.plugins.paste.core.Newlines",["tinymce.core.util.Tools","tinymce.core.html.Entities"],function(e,t){var n=function(e){return!/<(?:(?!\/?(?:div|p|br))[^>]*|(?:div|p|br)\s+\w[^>]+)>/.test(e)},r=function(e){return e.replace(/\r?\n/g,"<br>")},o=function(e,n){var r,o=[],i="<"+e;if("object"==typeof n){for(r in n)n.hasOwnProperty(r)&&o.push(r+'="'+t.encodeAllRaw(n[r])+'"');o.length&&(i+=" "+o.join(" "))}return i+">"},i=function(t,n,r){var i=t.split(/\n\n/),a=o(n,r),c="</"+n+">",l=e.map(i,function(e){return e.split(/\n/).join("<br />")}),s=function(e){return a+e+c};return 1===l.length?l[0]:e.map(l,s).join("")};return{isPlainText:n,convert:function(e,t,n){return t?i(e,t,n):r(e)},toBRs:r,toBlockElements:i}}),a("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools"],function(e){var t=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},n=function(e){return t(e)&&/.(gif|jpe?g|png)$/.test(e)},r=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},o=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},i=function(e,n,r){return!(!1!==e.selection.isCollapsed()||!t(n))&&o(e,n,r)},a=function(e,t,o){return!!n(t)&&r(e,t,o)},c=function(e,t){return e.insertContent(t,{merge:!1!==e.settings.paste_merge_formats,paste:!0}),!0},l=function(t,n){e.each([i,a,c],function(e){return!0!==e(t,n,c)})};return{isImageUrl:n,isAbsoluteUrl:t,insertContent:function(e,t){!1===e.settings.smart_paste?c(e,t):l(e,t)}}}),a("tinymce.plugins.paste.core.Clipboard",["tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Newlines","tinymce.plugins.paste.core.SmartPaste","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o,i,a,c,l,s){return function(i){function u(e,t){var n,r=i.dom,o;if(o=t||a.isMarked(e),e=a.unmark(e),n=i.fire("BeforePastePreProcess",{content:e,internal:o}),n=i.fire("PastePreProcess",n),e=n.content,!n.isDefaultPrevented()){if(i.hasEventListeners("PastePostProcess")&&!n.isDefaultPrevented()){var c=r.add(i.getBody(),"div",{style:"display:none"},e);n=i.fire("PastePostProcess",{node:c,internal:o}),r.remove(c),e=n.node.innerHTML}n.isDefaultPrevented()||l.insertContent(i,e)}}function d(e){e=i.dom.encode(e).replace(/\r\n/g,"\n"),e=c.convert(e,i.settings.forced_root_block,i.settings.forced_root_block_attrs),u(e,!1)}function f(){function e(e){var t,r,o,i=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1==i.nodeType){for(o=i.childNodes[_.startOffset];o&&3==o.nodeType&&!o.data.length;)o=o.nextSibling;if(o)return"BR"==o.tagName&&(r=n.doc.createTextNode("\ufeff"),o.parentNode.insertBefore(r,o),e=n.createRng(),e.setStartBefore(r),e.setEndAfter(r),t=e.getClientRects(),n.remove(r)),t.length?t[0]:void 0}}var n=i.dom,r=i.getBody(),o=i.dom.getViewPort(i.getWin()),a=o.y,c=20,l;if(_=i.selection.getRng(),i.inline&&(l=i.selection.getScrollContainer())&&l.scrollTop>0&&(a=l.scrollTop),_.getClientRects){var s=e(_);if(s)c=a+(s.top-n.getPos(r).y);else{c=a;var u=_.startContainer;u&&(3==u.nodeType&&u.parentNode!=r&&(u=u.parentNode),1==u.nodeType&&(c=n.getPos(u,l||r).y))}}A=n.add(i.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+c+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},D),(t.ie||t.gecko)&&n.setStyle(A,"left","rtl"==n.getStyle(r,"direction",!0)?65535:-65535),n.bind(A,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),A.focus(),i.selection.select(A,!0)}function m(){if(A){for(var e;e=i.dom.get("mcepastebin");)i.dom.remove(e),i.dom.unbind(e);_&&i.selection.setRng(_)}A=_=null}function p(){var e="",t,n,r,o;for(t=i.dom.select("div[id=mcepastebin]"),n=0;n<t.length;n++)r=t[n],r.firstChild&&"mcepastebin"==r.firstChild.id&&(r=r.firstChild),o=r.innerHTML,e!=D&&(e+=o);return e}function g(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1==n.indexOf(I)&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t}function h(e){var t=g(e.clipboardData||i.getDoc().dataTransfer);return s.isMsEdge()?r.extend(t,{"text/html":""}):t}function v(e){return E(e,"text/html")||E(e,"text/plain")}function y(e){var t;return t=e.indexOf(","),-1!==t?e.substr(t+1):null}function b(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)}function x(e){var t=e.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return t?i.dom.encode(t[1]):null}function C(e,t,n){e&&(i.selection.setRng(e),e=null);var r=t.result,o=y(r),a=O(),c=i.settings.images_reuse_filename&&n.name?x(n.name):a,l=new Image;if(l.src=r,b(i.settings,l)){var s=i.editorUpload.blobCache,d,f;f=s.findFirst(function(e){return e.base64()===o}),f?d=f:(d=s.create(a,n,o,c),s.add(d)),u('<img src="'+d.blobUri()+'">',!1)}else u('<img src="'+r+'">',!1)}function w(e,t){function n(n){var r,o,i,a=!1;if(n)for(r=0;r<n.length;r++)if(o=n[r],/^image\/(jpeg|png|gif|bmp)$/.test(o.type)){var c=o.getAsFile?o.getAsFile():o;i=new FileReader,i.onload=C.bind(null,t,i,c),i.readAsDataURL(c),e.preventDefault(),a=!0}return a}var r=e.clipboardData||e.dataTransfer;if(i.settings.paste_data_images&&r)return n(r.items)||n(r.files)}function T(e){var t=e.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function k(t){return e.getCaretRangeFromPoint(t.clientX,t.clientY,i.getDoc())}function E(e,t){return t in e&&e[t].length>0}function S(e){return o.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function N(){function e(e,t,n,r){var o,a;if(E(e,"text/html")?o=e["text/html"]:(o=p())==D&&(n=!0),o=s.trimHtml(o),A&&A.firstChild&&"mcepastebin"===A.firstChild.id&&(n=!0),m(),a=!1===r&&c.isPlainText(o),o.length&&!a||(n=!0),n&&(o=E(e,"text/plain")&&a?e["text/plain"]:s.innerText(o)),o==D)return void(t||i.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."));n?d(o):u(o,r)}function r(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}i.on("keydown",function(e){function n(e){S(e)&&!e.isDefaultPrevented()&&m()}if(S(e)&&!e.isDefaultPrevented()){if((M=e.shiftKey&&86==e.keyCode)&&t.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),B=(new Date).getTime(),t.ie&&M)return e.preventDefault(),void i.fire("paste",{ieFake:!0});m(),f(),i.once("keyup",n),i.once("paste",function(){i.off("keyup",n)})}});var o=function(){return _||i.selection.getRng()};i.on("paste",function(r){var c=(new Date).getTime(),l=h(r),s=(new Date).getTime()-c,u=(new Date).getTime()-B-s<1e3,d="text"==R.pasteFormat||M,g=E(l,a.internalHtmlMime());return M=!1,r.isDefaultPrevented()||T(r)?void m():!v(l)&&w(r,o())?void m():(u||r.preventDefault(),!t.ie||u&&!r.ieFake||E(l,"text/html")||(f(),i.dom.bind(A,"paste",function(e){e.stopPropagation()}),i.getDoc().execCommand("Paste",!1,null),l["text/html"]=p()),void(E(l,"text/html")?(r.preventDefault(),e(l,u,d,g)):n.setEditorTimeout(i,function(){e(l,u,d,g)},0)))}),i.on("dragstart dragend",function(e){P="dragstart"==e.type}),i.on("drop",function(e){var t,o;if(o=k(e),!e.isDefaultPrevented()&&!P){t=g(e.dataTransfer);var c=E(t,a.internalHtmlMime());if((v(t)&&!r(t)||!w(e,o))&&o&&!1!==i.settings.paste_filter_drop){var l=t["mce-internal"]||t["text/html"]||t["text/plain"];l&&(e.preventDefault(),n.setEditorTimeout(i,function(){i.undoManager.transact(function(){t["mce-internal"]&&i.execCommand("Delete"),i.selection.setRng(o),l=s.trimHtml(l),t["text/html"]?u(l,c):d(l)})}))}}}),i.on("dragover dragend",function(e){i.settings.paste_data_images&&e.preventDefault()})}var R=this,A,_,B=0,P=!1,D="%MCEPASTEBIN%",M,I="data:text/mce-internal,",O=s.createIdGenerator("mceclip");R.pasteHtml=u,R.pasteText=d,R.pasteImageData=w,i.on("preInit",function(){N(),i.parser.addNodeFilter("img",function(e,n,r){function o(e){return e.data&&!0===e.data.paste}function a(e){e.attr("data-mce-object")||u===t.transparentSrc||e.remove()}function c(e){return 0===e.indexOf("webkit-fake-url")}function l(e){return 0===e.indexOf("data:")}if(!i.settings.paste_data_images&&o(r))for(var s=e.length;s--;){var u=e[s].attributes.map.src;u&&(c(u)?a(e[s]):!i.settings.allow_html_data_urls&&l(u)&&a(e[s]))}})})}}),a("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),a("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),a("tinymce.plugins.paste.core.WordFilter",["tinymce.core.util.Tools","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.html.Node","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o,i){function a(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function c(t){var n,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(r,function(e){if(e.test(t))return n=!0,!1}),n}function l(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function s(s){var u=s.settings;s.on("BeforePastePreProcess",function(d){function f(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do{n+=t(e)}while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!n(e,t))return!1}while(e=e.next);return!0}function r(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do{r(e)}while(e=e.next)}function i(e,t,i){var c=e._listLevel||u;c!=u&&(c<u?a&&(a=a.parent.parent):(s=a,a=null)),a&&a.name==t?a.append(e):(s=s||a,a=new o(t,1),i>1&&a.attr("start",""+i),e.wrap(a)),e.name="li",c>u&&s&&s.lastChild.append(a),u=c,r(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var a,s,u=1,d=[],f=e.firstChild;void 0!==f&&null!==f;)if(d.push(f),null!==(f=f.walk()))for(;void 0!==f&&f.parent!==e;)f=f.walk();for(var m=0;m<d.length;m++)if(e=d[m],"p"==e.name&&e.firstChild){var p=t(e);if(l(p)){i(e,"ul");continue}if(c(p)){var g=/([0-9]+)\./.exec(p),h=1;g&&(h=parseInt(g[1],10)),i(e,"ol",h);continue}if(e._listLevel){i(e,"ul",1);continue}a=null}else s=a,a=null}function m(t,n){var r={},i,a=s.dom.parseStyle(n);return e.each(a,function(e,o){switch(o){case"mso-list":i=/\w+ \w+([0-9]+)/i.exec(n),i&&(t._listLevel=parseInt(i[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":o="text-align";break;case"vert-align":o="vertical-align";break;case"font-color":case"mso-foreground":o="color";break;case"mso-background":case"mso-highlight":o="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(r[o]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}if(0===o.indexOf("mso-comment"))return void t.remove();0!==o.indexOf("mso-")&&("all"==g||h&&h[o])&&(r[o]=e)}),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],t.wrap(new o("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],t.wrap(new o("i",1))),(r=s.dom.serializeStyle(r,t.name))||null}var p=d.content,g,h;if(p=p.replace(/<b[^>]+id="?docs-internal-[^>]*>/gi,""),p=p.replace(/<br class="?Apple-interchange-newline"?>/gi,""),g=u.paste_retain_style_properties,g&&(h=e.makeMap(g.split(/[, ]/))),!1!==u.paste_enable_default_filters&&a(d.content)){d.wordContent=!0,p=i.filter(p,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var v=u.paste_word_valid_elements;v||(v="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var y=new n({valid_elements:v,valid_children:"-li[p]"});e.each(y.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var b=new t({},y);b.addAttributeFilter("style",function(e){for(var t=e.length,n;t--;)n=e[t],n.attr("style",m(n,n.attr("style"))),"span"==n.name&&n.parent&&!n.attributes.length&&n.unwrap()}),b.addAttributeFilter("class",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(r)&&n.remove(),n.attr("class",null)}),b.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),b.addNodeFilter("a",function(e){for(var t=e.length,n,r,o;t--;)if(n=e[t],r=n.attr("href"),o=n.attr("name"),r&&-1!=r.indexOf("#_msocom_"))n.remove();else if(r&&0===r.indexOf("file://")&&(r=r.split("#")[1])&&(r="#"+r),r||o){if(o&&!/^_?(?:toc|edn|ftn)/i.test(o)){n.unwrap();continue}n.attr({href:r,name:o})}else n.unwrap()});var x=b.parse(p);!1!==u.paste_convert_word_fake_lists&&f(x),d.content=new r({validate:u.validate},y).serialize(x)}})}return s.isWordContent=a,s}),a("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.core.WordFilter","tinymce.plugins.paste.core.Utils"],function(e,t,n,r){"use strict";return function(o){function i(e){o.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function a(e){o.on("PastePostProcess",function(t){e(t.node)})}function c(e){if(!n.isWordContent(e))return e;var i=[];t.each(o.schema.getBlockElements(),function(e,t){i.push(t)});var a=RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=r.filter(e,[[a,"$1"]]),e=r.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function l(e){if(n.isWordContent(e))return e;var t=o.settings.paste_webkit_styles;if(!1===o.settings.paste_remove_styles_if_webkit||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var r=o.dom,i=o.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,o,a){var c=r.parseStyle(r.decode(o),"span"),l={};if("none"===t)return n+a;for(var s=0;s<t.length;s++){var u=c[t[s]],d=r.getStyle(i,t[s],!0);/color/.test(t[s])&&(u=r.toHex(u),d=r.toHex(d)),d!=u&&(l[t[s]]=u)}return l=r.serializeStyle(l,"span"),l?n+' style="'+l+'"'+a:n+a})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function s(e){o.$("a",e).find("font,u").each(function(e,t){o.dom.remove(t,!0)})}e.webkit&&i(l),e.ie&&(i(c),a(s))}}),a("tinymce.plugins.paste.Plugin",["tinymce.core.PluginManager","tinymce.plugins.paste.core.Clipboard","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.Quirks","tinymce.plugins.paste.core.WordFilter"],function(e,t,n,r,o){var i;return e.add("paste",function(a){function c(){return i||!1===a.settings.paste_plaintext_inform}function l(){if("text"==d.pasteFormat)d.pasteFormat="html",a.fire("PastePlainTextToggle",{state:!1});else if(d.pasteFormat="text",a.fire("PastePlainTextToggle",{state:!0}),!c()){var e=a.translate("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.");a.notificationManager.open({text:e,type:"info"}),i=!0}a.focus()}function s(){var e=this;e.active("text"===d.pasteFormat),a.on("PastePlainTextToggle",function(t){e.active(t.state)})}var u=this,d,f=a.settings;if(/(^|[ ,])powerpaste([, ]|$)/.test(f.plugins)&&e.get("powerpaste"))return void("undefined"!=typeof console&&console.log&&console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."));u.clipboard=d=new t(a),u.quirks=new r(a),u.wordFilter=new o(a),a.settings.paste_as_text&&(u.clipboard.pasteFormat="text"),f.paste_preprocess&&a.on("PastePreProcess",function(e){f.paste_preprocess.call(u,u,e)}),f.paste_postprocess&&a.on("PastePostProcess",function(e){f.paste_postprocess.call(u,u,e)}),a.addCommand("mceInsertClipboardContent",function(e,t){t.content&&u.clipboard.pasteHtml(t.content,t.internal),t.text&&u.clipboard.pasteText(t.text)}),a.settings.paste_block_drop&&a.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),a.settings.paste_data_images||a.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),a.addCommand("mceTogglePlainTextPaste",l),a.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:l,onPostRender:s}),a.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:d.pasteFormat,onclick:l,onPostRender:s}),n.register(a)}),function(){}}),o("tinymce.plugins.paste.Plugin")()}()}).call(window)},203:function(e,t){(function(){!function(){var e={},t=function(e){for(var t=o(e),n=e.split("."),r=Function("return this;")(),i=0;i<n.length-1;++i)void 0===r[n[i]]&&(r[n[i]]={}),r=r[n[i]];r[n[n.length-1]]=t},n=function(t){for(var n=e[t],r=n.deps,i=n.defn,a=r.length,c=Array(a),l=0;l<a;++l)c[l]=o(r[l]);var s=i.apply(null,c);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},r=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},o=function(t){var r=e[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&n(t),r.instance},i=function(e,t){for(var n=e.length,r=Array(n),i=0;i<n;++i)r.push(o(e[i]));t.apply(null,t)};({}).bolt={module:{api:{define:r,require:i,demand:o}}};var a=r,c=i,l=o,s=function(e,t){a(e,[],function(){return t})};s("global!window",window),s("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.AddOnManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.AddOnManager")}),a("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.core.ui.Api",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Api")}),a("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),a("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.themes.modern.ui.A11y",[],function(){var e=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}};return{addKeys:function(t,n){t.shortcuts.add("Alt+F9","",e(n,"menubar")),t.shortcuts.add("Alt+F10,F10","",e(n,"toolbar")),t.shortcuts.add("Alt+F11","",e(n,"elementpath")),n.on("cancel",function(){t.focus()})}}}),a("tinymce.themes.modern.ui.Branding",["tinymce.core.dom.DOMUtils"],function(e){var t=e.DOM,n=function(e,n,r){return function(){var o=e.getContentAreaContainer().querySelector("iframe").offsetWidth,i=Math.max(o-e.getDoc().documentElement.offsetWidth,0);t.setStyle(n,"right",i+"px"),r?t.setStyle(n,"top","-16px"):t.setStyle(n,"bottom","1px")}},r=function(e){return function(){t.hide(e)}},o=function(e,t,r){n(e,t,r)(),e.on("NodeChange ResizeEditor",n(e,t,r))},i=function(e,t,n){n.appendChild(t),o(e,t,!0)},a=function(e,t){e.getContainer().appendChild(t),o(e,t,!1)},c=function(e){e.on("SkinLoaded",function(){var n=t.create("div",{class:"mce-branding-powered-by"}),o=e.getContainer().querySelector(".mce-statusbar");o?i(e,n,o):a(e,n),t.bind(n,"click",r(n))})};return{setup:function(e){!1!==e.settings.branding&&c(e)}}}),a("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),a("tinymce.core.geom.Rect",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.geom.Rect")}),a("tinymce.themes.modern.ui.Toolbar",["tinymce.core.util.Tools","tinymce.core.ui.Factory"],function(e,t){var n=function(n,r,o){var i=[],a;if(r)return e.each(r.split(/[ ,]/),function(e){var r,c=function(){var t=n.selection;e.settings.stateSelector&&t.selectorChanged(e.settings.stateSelector,function(t){e.active(t)},!0),e.settings.disabledStateSelector&&t.selectorChanged(e.settings.disabledStateSelector,function(t){e.disabled(t)})};"|"==e?a=null:(a||(a={type:"buttongroup",items:[]},i.push(a)),n.buttons[e]&&(r=e,e=n.buttons[r],"function"==typeof e&&(e=e()),e.type=e.type||"button",e.size=o,e=t.create(e),a.items.push(e),n.initialized?c():n.on("init",c)))}),{type:"toolbar",layout:"flow",items:i}};return{createToolbar:n,createToolbars:function(t,r){var o=[],i=t.settings,a=function(e){if(e)return o.push(n(t,e,r)),!0};if(e.isArray(i.toolbar)){if(0===i.toolbar.length)return;e.each(i.toolbar,function(e,t){i["toolbar"+(t+1)]=e}),delete i.toolbar}for(var c=1;c<10&&a(i["toolbar"+c]);c++);if(o.length||!1===i.toolbar||a(i.toolbar||"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),o.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:o}}}}),a("tinymce.themes.modern.ui.ContextToolbars",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.util.Delay","tinymce.core.ui.Factory","tinymce.core.geom.Rect","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,r,o,i){var a=e.DOM,c=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},l=function(e){t.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})},s=function(e,t){e.moveTo(t.left,t.top)},u=function(e,n,r){n=n?n.substr(0,2):"",t.each({t:"down",b:"up"},function(t,o){e.classes.toggle("arrow-"+t,r(o,n.substr(0,1)))}),t.each({l:"left",r:"right"},function(t,o){e.classes.toggle("arrow-"+t,r(o,n.substr(1,1)))})},d=function(e,t,n,r,o,i){return i=c({x:t,y:n,w:i.w,h:i.h}),e&&(i=e({elementRect:c(r),contentAreaRect:c(o),panelRect:i})),i};return{addContextualToolbars:function(e){var c,f=e.settings,m=function(){return e.contextToolbars||[]},p=function(t){var n,r,o;return n=a.getPos(e.getContentAreaContainer()),r=e.dom.getRect(t),o=e.dom.getRoot(),"BODY"===o.nodeName&&(r.x-=o.ownerDocument.documentElement.scrollLeft||o.scrollLeft,r.y-=o.ownerDocument.documentElement.scrollTop||o.scrollTop),r.x+=n.x,r.y+=n.y,r},g=function(t,n){var r,i,c,m,g,h,v,y,b=f.inline_toolbar_position_handler;if(!e.removed){if(!t||!t.toolbar.panel)return void l(e);v=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],g=t.toolbar.panel,n&&g.show(),c=p(t.element),i=a.getRect(g.getEl()),m=a.getRect(e.getContentAreaContainer()||e.getBody()),y=25,"inline"!==a.getStyle(t.element,"display",!0)&&(c.w=t.element.clientWidth,c.h=t.element.clientHeight),e.inline||(m.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&c.w<y&&(c=o.inflate(c,0,8)),r=o.findBestRelativePosition(i,c,m,v),c=o.clamp(c,m),r?(h=o.relativePosition(i,c,r),s(g,d(b,h.x,h.y,c,m,i))):(m.h+=i.h,c=o.intersect(m,c),c?(r=o.findBestRelativePosition(i,c,m,["bc-tc","bl-tl","br-tr"]),r?(h=o.relativePosition(i,c,r),s(g,d(b,h.x,h.y,c,m,i))):s(g,d(b,c.x,c.y,c,m,i))):g.hide()),u(g,r,function(e,t){return e===t})}},h=function(t){return function(){var r=function(){e.selection&&g(x(e.selection.getNode()),t)};n.requestAnimationFrame(r)}},v=function(){c||(c=e.selection.getScrollContainer()||e.getWin(),a.bind(c,"scroll",h(!0)),e.on("remove",function(){a.unbind(c,"scroll")}))},y=function(t){var n;if(t.toolbar.panel)return t.toolbar.panel.show(),void g(t);v(),n=r.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:i.createToolbar(e,t.toolbar.items),oncancel:function(){e.focus()}}),t.toolbar.panel=n,n.renderTo(document.body).reflow(),g(t)},b=function(){t.each(m(),function(e){e.panel&&e.panel.hide()})},x=function(t){var n,r,o,i=m();for(o=e.$(t).parents().add(t),n=o.length-1;n>=0;n--)for(r=i.length-1;r>=0;r--)if(i[r].predicate(o[n]))return{toolbar:i[r],element:o[n]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&n.setEditorTimeout(e,function(){var t;t=x(e.selection.getNode()),t?(b(),y(t)):b()})}),e.on("blur hide contextmenu",b),e.on("ObjectResizeStart",function(){var t=x(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",h(!0)),e.on("nodeChange",h(!1)),e.on("remove",function(){t.each(m(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=x(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})}}}),a("tinymce.themes.modern.ui.Menubar",["tinymce.core.util.Tools"],function(e){var t={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},n=function(e,t){var n;return"|"==t?{text:"|"}:n=e[t]},r=function(r,o,i){var a,c,l,s,u;if(u=e.makeMap((o.removed_menuitems||"").split(/[ ,]/)),o.menu?(c=o.menu[i],s=!0):c=t[i],c){a={text:c.title},l=[],e.each((c.items||"").split(/[ ,]/),function(e){n(r,e)&&!u[e]&&l.push(n(r,e))}),s||e.each(r,function(e){e.context==i&&("before"==e.separator&&l.push({text:"|"}),e.prependToContext?l.unshift(e):l.push(e),"after"==e.separator&&l.push({text:"|"}))});for(var d=0;d<l.length;d++)"|"==l[d].text&&(0!==d&&d!=l.length-1||l.splice(d,1));if(a.menu=l,!a.menu.length)return null}return a};return{createMenuButtons:function(e){var n,o=[],i=e.settings,a=[];if(i.menu)for(n in i.menu)a.push(n);else for(n in t)a.push(n);for(var c="string"==typeof i.menubar?i.menubar.split(/[ ,]/):a,l=0;l<c.length;l++){var s=c[l];s=r(e.menuItems,e.settings,s),s&&o.push(s)}return o}}}),a("tinymce.themes.modern.ui.Resize",["tinymce.core.dom.DOMUtils"],function(e){var t=e.DOM,n=function(e){return{width:e.clientWidth,height:e.clientHeight}},r=function(e,r,o){var i,a,c,l,s=e.settings;i=e.getContainer(),a=e.getContentAreaContainer().firstChild,c=n(i),l=n(a),null!==r&&(r=Math.max(s.min_width||100,r),r=Math.min(s.max_width||65535,r),t.setStyle(i,"width",r+(c.width-l.width)),t.setStyle(a,"width",r)),o=Math.max(s.min_height||100,o),o=Math.min(s.max_height||65535,o),t.setStyle(a,"height",o),e.fire("ResizeEditor")};return{resizeTo:r,resizeBy:function(e,t,n){var o=e.getContentAreaContainer();r(e,o.clientWidth+t,o.clientHeight+n)}}}),a("tinymce.themes.modern.ui.Sidebar",["tinymce.core.util.Tools","tinymce.core.ui.Factory","tinymce.core.Env"],function(e,t,n){var r=function(e){return{element:function(){return e}}},o=function(e,t,n){var o=e.settings[n];o&&o(r(t.getEl("body")))},i=function(t,n,r){e.each(r,function(e){var r=n.items().filter("#"+e.name)[0];r&&r.visible()&&e.name!==t&&(o(e,r,"onhide"),r.visible(!1))})},a=function(e){e.items().each(function(e){e.active(!1)})},c=function(t,n){return e.grep(t,function(e){return e.name===n})[0]},l=function(e,n,r){return function(l){var s=l.control,u=s.parents().filter("panel")[0],d=u.find("#"+n)[0],f=c(r,n);i(n,u,r),a(s.parent()),d&&d.visible()?(o(f,d,"onhide"),d.hide(),s.active(!1)):(d?(d.show(),o(f,d,"onshow")):(d=t.create({type:"container",name:n,layout:"stack",classes:"sidebar-panel",html:""}),u.prepend(d),o(f,d,"onrender"),o(f,d,"onshow")),s.active(!0)),e.fire("ResizeEditor")}},s=function(){return!n.ie||n.ie>=11};return{hasSidebar:function(e){return!(!s()||!e.sidebars)&&e.sidebars.length>0},createSidebar:function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:e.map(t.sidebars,function(e){var n=e.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:l(t,e.name,t.sidebars)}})}]}}}}),a("tinymce.themes.modern.ui.SkinLoaded",[],function(){return{fireSkinLoaded:function(e){var t=function(){e._skinLoaded=!0,e.fire("SkinLoaded")};return function(){e.initialized?t():e.on("init",t)}}}}),a("tinymce.themes.modern.modes.Iframe",["tinymce.core.dom.DOMUtils","tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.Branding","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.Resize","tinymce.themes.modern.ui.Sidebar","tinymce.themes.modern.ui.SkinLoaded","tinymce.themes.modern.ui.Toolbar"],function(e,t,n,r,o,i,a,c,l,s,u){var d=e.DOM,f=function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}},m=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},p=function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[m("0"),l.createSidebar(e)]}};return{render:function(e,n,g){var h,v,y,b=e.settings;return g.skinUiCss&&d.styleSheetLoader.load(g.skinUiCss,s.fireSkinLoaded(e)),h=n.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[!1===b.menubar?null:{type:"menubar",border:"0 0 1 0",items:a.createMenuButtons(e)},u.createToolbars(e,b.toolbar_items_size),l.hasSidebar(e)?p(e):m("1 0 0 0")]}),!1!==b.resize&&(v={type:"resizehandle",direction:b.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;y={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===b.resize?c.resizeTo(e,y.width+t.deltaX,y.height+t.deltaY):c.resizeTo(e,null,y.height+t.deltaY)}}),!1!==b.statusbar&&h.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},v]}),e.fire("BeforeRenderUI"),e.on("SwitchMode",f(h)),h.renderBefore(g.targetNode).reflow(),b.readonly&&e.setMode("readonly"),g.width&&d.setStyle(h.getEl(),"width",g.width),e.on("remove",function(){h.remove(),h=null}),r.addKeys(e,h),i.addContextualToolbars(e),o.setup(e),{iframeContainer:h.find("#iframe")[0].getEl(),editorContainer:h.getEl()}}}}),a("tinymce.core.ui.FloatPanel",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.FloatPanel")}),a("tinymce.themes.modern.modes.Inline",["tinymce.core.util.Tools","tinymce.core.ui.Factory","tinymce.core.dom.DOMUtils","tinymce.core.ui.FloatPanel","tinymce.themes.modern.ui.Toolbar","tinymce.themes.modern.ui.Menubar","tinymce.themes.modern.ui.ContextToolbars","tinymce.themes.modern.ui.A11y","tinymce.themes.modern.ui.SkinLoaded"],function(e,t,n,r,o,i,a,c,l){return{render:function(e,s,u){var d,f,m=e.settings,p=n.DOM;m.fixed_toolbar_container&&(f=p.select(m.fixed_toolbar_container)[0]);var g=function(){if(d&&d.moveRel&&d.visible()&&!d._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),r=0,o=0;if(t){var i=p.getPos(n),a=p.getPos(t);r=Math.max(0,a.x-i.x),o=Math.max(0,a.y-i.y)}d.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,o)}},h=function(){d&&(d.show(),g(),p.addClass(e.getBody(),"mce-edit-focus"))},v=function(){d&&(d.hide(),r.hideAll(),p.removeClass(e.getBody(),"mce-edit-focus"))},y=function(){if(d)return void(d.visible()||h());d=s.panel=t.create({type:f?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!f,border:1,items:[!1===m.menubar?null:{type:"menubar",border:"0 0 1 0",items:i.createMenuButtons(e)},o.createToolbars(e,m.toolbar_items_size)]}),e.fire("BeforeRenderUI"),d.renderTo(f||document.body).reflow(),c.addKeys(e,d),h(),a.addContextualToolbars(e),e.on("nodeChange",g),e.on("activate",h),e.on("deactivate",v),e.nodeChanged()};return m.content_editable=!0,e.on("focus",function(){u.skinUiCss?p.styleSheetLoader.load(u.skinUiCss,y,y):y()}),e.on("blur hide",v),e.on("remove",function(){d&&(d.remove(),d=null)}),u.skinUiCss&&p.styleSheetLoader.load(u.skinUiCss,l.fireSkinLoaded(e)),{}}}}),a("tinymce.core.ui.Throbber",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Throbber")}),a("tinymce.themes.modern.ui.ProgressState",["tinymce.core.ui.Throbber"],function(e){return{setup:function(t,n){var r;t.on("ProgressState",function(t){r=r||new e(n.panel.getEl("body")),t.state?r.show(t.time):r.hide()})}}}),a("tinymce.themes.modern.Theme",["global!window","tinymce.core.AddOnManager","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.ui.Api","tinymce.themes.modern.modes.Iframe","tinymce.themes.modern.modes.Inline","tinymce.themes.modern.ui.ProgressState","tinymce.themes.modern.ui.Resize"],function(e,t,n,r,o,i,a,c,l){var s=t.ThemeManager;o.appendTo(e.tinymce?e.tinymce:{});var u=function(e,t,r){var o=e.settings,l=!1!==o.skin&&(o.skin||"lightgray");if(l){var s=o.skin_url;s=s?e.documentBaseURI.toAbsolute(s):n.baseURL+"/skins/"+l,r.skinUiCss=s+"/skin.min.css",e.contentCSS.push(s+"/content"+(e.inline?".inline":"")+".min.css")}return c.setup(e,t),o.inline?a.render(e,t,r):i.render(e,t,r)};return s.add("modern",function(e){return{renderUI:function(t){return u(e,this,t)},resizeTo:function(t,n){return l.resizeTo(e,t,n)},resizeBy:function(t,n){return l.resizeBy(e,t,n)}}}),function(){}}),o("tinymce.themes.modern.Theme")()}()}).call(window)},204:function(e,t){tinymce.PluginManager.add("templateEditor",function(e,t){function n(){var t=e.dom,n={},r=t.getParent(e.selection.getStart(),"tr");if(r||(r=t.getParent(e.selection.getStart(),"p")||t.getParent(e.selection.getStart(),"div")||e.selection.getStart()),r){if(r.previousSibling&&"#comment"===r.previousSibling.nodeName&&r.previousSibling.nodeValue&&/^{{[#\/]{0,1}?\w*?}}$/.test(r.previousSibling.nodeValue)){var o=r.previousSibling.nodeValue.match(/^{{[#\/]{0,1}?(\w*?)}}$/);o&&o.length>1&&(n.templateType=o[1])}e.windowManager.open({title:"Section",data:n,body:{type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,items:[{type:"textbox",label:"Key",name:"templateType"},{type:"checkbox",label:"Remove section",name:"removeSection"}]}]},onsubmit:function t(){n=this.toJSON(),e.undoManager.transact(function(){var t=n.templateType?n.templateType.trim():null,o=void 0,i=void 0;!0!==n.removeSection&&t?(e.dom.setAttribs(r,{templateType:t}),e.dom.addClass(r,"tinymce_templated"),r.dataset.iterateOver=t,t&&(r.insertAdjacentHTML("beforebegin","\x3c!--{{#"+t+"}}--\x3e"),r.insertAdjacentHTML("afterend","\x3c!--{{/"+t+"}}--\x3e"))):(e.dom.removeClass(r,"tinymce_templated"),r.dataset.iterateOver="",r.previousSibling&&"#comment"===r.previousSibling.nodeName&&(o=r.previousSibling.nodeValue),r.nextSibling&&"#comment"===r.nextSibling.nodeName&&(i=r.nextSibling.nodeValue),o&&i&&o.substr(3)===i.substr(3)&&(r.parentNode.removeChild(r.previousSibling),r.parentNode.removeChild(r.nextSibling)))}),e.save()}})}}e.addMenuItem("rowTemplate",{text:"Section",shortcut:"Ctrl+Alt+T",icon:"row-template-icon",context:"edit",onPostRender:function e(){},onclick:n}),e.addButton("rowTemplate",{text:"Section",shortcut:"Ctrl+Alt+T",icon:"row-template-icon",onclick:n}),e.addButton("pageOrientation",{type:"menubutton",title:"Page orientation",text:"Page orientation",menu:[{text:"Portrait",onclick:function t(){e.settings.reportEditor.setOrientation("portrait")}},{text:"Landscape",onclick:function t(){e.settings.reportEditor.setOrientation("landscape")}}]}),e.on("init",function(){e.dom.addStyle(".tinymce_templated{border-style: dashed; border-width: 2px; border-color: #8bd689;}");var t="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img";e.formatter.register({alignleftTe:{selector:t,styles:{align:"left"}},aligncenterTe:{selector:t,styles:{align:"center"}},alignrightTe:{selector:t,styles:{align:"right"}},alignjustifyTe:{selector:t,styles:{align:"justify"}}})}),e.on("dblclick",n)})}});